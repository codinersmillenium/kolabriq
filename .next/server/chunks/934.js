exports.id=934,exports.ids=[934],exports.modules={1070:(a,b,c)=>{"use strict";let{Buffer:d}=c(79428),e=c(66221).BigNumber,f=c(13270),g=f.SHIFT32,h=f.SHIFT16;b.parseHalf=function(a){var b,c,d;return(d=128&a[0]?-1:1,b=(124&a[0])>>2,c=(3&a[0])<<8|a[1],b)?31===b?d*(c?0/0:2e308):d*Math.pow(2,b-25)*(1024+c):5960464477539063e-23*d*c},b.arrayBufferToBignumber=function(a){let b=a.byteLength,c="";for(let e=0;e<b;e++){var d;c+=(d=a[e])<16?"0"+d.toString(16):d.toString(16)}return new e(c,16)},b.buildMap=a=>{let b=new Map,c=Object.keys(a),d=c.length;for(let e=0;e<d;e++)b.set(c[e],a[c[e]]);return b},b.buildInt32=(a,b)=>a*h+b,b.buildInt64=(a,c,d,f)=>{let h=b.buildInt32(a,c),i=b.buildInt32(d,f);return h>2097151?new e(h).times(g).plus(i):h*g+i},b.writeHalf=function(a,b){let c=d.allocUnsafe(4);c.writeFloatBE(b,0);let e=c.readUInt32BE(0);if((8191&e)!=0)return!1;var f=e>>16&32768;let g=e>>23&255,h=8388607&e;if(g>=113&&g<=142)f+=(g-112<<10)+(h>>13);else{if(!(g>=103)||!(g<113)||h&(1<<126-g)-1)return!1;f+=h+8388608>>126-g}return a.writeUInt16BE(f,0),!0},b.keySorter=function(a,b){var c=a[0].byteLength,d=b[0].byteLength;return c>d?1:d>c?-1:a[0].compare(b[0])},b.isNegativeZero=a=>0===a&&1/a<0,b.nextPowerOf2=a=>{let b=0;if(a&&!(a&a-1))return a;for(;0!==a;)a>>=1,b+=1;return 1<<b}},4229:(a,b,c)=>{"use strict";c.d(b,{MM:()=>h,Z3:()=>j,s8:()=>i});var d=c(17243),e=c(77214),f=c(80616);let g=BigInt(1e6);class h{constructor(a){if(a<9e4){let b=BigInt(Date.now()+a)*g/BigInt(1e9);this._value=b*BigInt(1e9);return}let b=BigInt(Math.floor(Date.now()+a-6e4))*g/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=b}toCBOR(){return e.value.u64(this._value.toString(16),16)}toHash(){return(0,d.kk)(this._value)}}function i(a=f.o){return async b=>{let c=b.request.headers;b.request.headers=c,"call"===b.endpoint&&(b.body.nonce=a())}}function j(a){let b=[];return a.forEach((a,c)=>{b.push([c,a])}),b}},4620:(a,b,c)=>{"use strict";let d=c(81119),e=c(17894),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function g(a){if(a>0x7fffffff)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,h.prototype),b}function h(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return i(a,b,c)}function i(a,b,c){if("string"==typeof a){var d=a,e=b;if(("string"!=typeof e||""===e)&&(e="utf8"),!h.isEncoding(e))throw TypeError("Unknown encoding: "+e);let c=0|o(d,e),f=g(c),i=f.write(d,e);return i!==c&&(f=f.slice(0,i)),f}if(ArrayBuffer.isView(a)){var f=a;if(L(f,Uint8Array)){let a=new Uint8Array(f);return m(a.buffer,a.byteOffset,a.byteLength)}return l(f)}if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(L(a,ArrayBuffer)||a&&L(a.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(L(a,SharedArrayBuffer)||a&&L(a.buffer,SharedArrayBuffer)))return m(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let i=a.valueOf&&a.valueOf();if(null!=i&&i!==a)return h.from(i,b,c);let j=function(a){if(h.isBuffer(a)){let b=0|n(a.length),c=g(b);return 0===c.length||a.copy(c,0,0,b),c}return void 0!==a.length?"number"!=typeof a.length||function(a){return a!=a}(a.length)?g(0):l(a):"Buffer"===a.type&&Array.isArray(a.data)?l(a.data):void 0}(a);if(j)return j;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return h.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function j(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function k(a){return j(a),g(a<0?0:0|n(a))}function l(a){let b=a.length<0?0:0|n(a.length),c=g(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function m(a,b,c){let d;if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),h.prototype),d}function n(a){if(a>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|a}function o(a,b){if(h.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||L(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&&!0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return I(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return J(a).length;default:if(e)return d?-1:I(a).length;b=(""+b).toLowerCase(),e=!0}}function p(a,b,c){let e=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0||(c>>>=0)<=(b>>>=0)))return"";for(a||(a="utf8");;)switch(a){case"hex":return function(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let d=b;d<c;++d)e+=M[a[d]];return e}(this,b,c);case"utf8":case"utf-8":return t(this,b,c);case"ascii":return function(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}(this,b,c);case"latin1":case"binary":return function(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}(this,b,c);case"base64":var f,g,h;return f=this,g=b,h=c,0===g&&h===f.length?d.fromByteArray(f):d.fromByteArray(f.slice(g,h));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(a,b,c){let d=a.slice(b,c),e="";for(let a=0;a<d.length-1;a+=2)e+=String.fromCharCode(d[a]+256*d[a+1]);return e}(this,b,c);default:if(e)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),e=!0}}function q(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function r(a,b,c,d,e){var f;if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>0x7fffffff?c=0x7fffffff:c<-0x80000000&&(c=-0x80000000),(f=c*=1)!=f&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length)if(e)return -1;else c=a.length-1;else if(c<0)if(!e)return -1;else c=0;if("string"==typeof b&&(b=h.from(b,d)),h.isBuffer(b))return 0===b.length?-1:s(a,b,c,d,e);if("number"==typeof b){if(b&=255,"function"==typeof Uint8Array.prototype.indexOf)if(e)return Uint8Array.prototype.indexOf.call(a,b,c);else return Uint8Array.prototype.lastIndexOf.call(a,b,c);return s(a,[b],c,d,e)}throw TypeError("val must be string, number or Buffer")}function s(a,b,c,d,e){let f,g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;g=2,h/=2,i/=2,c/=2}function j(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}if(e){let d=-1;for(f=c;f<h;f++)if(j(a,f)===j(b,-1===d?0:f-d)){if(-1===d&&(d=f),f-d+1===i)return d*g}else -1!==d&&(f-=f-d),d=-1}else for(c+i>h&&(c=h-i),f=c;f>=0;f--){let c=!0;for(let d=0;d<i;d++)if(j(a,f+d)!==j(b,d)){c=!1;break}if(c)return f}return -1}function t(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let b=a[e],f=null,g=b>239?4:b>223?3:b>191?2:1;if(e+g<=c){let c,d,h,i;switch(g){case 1:b<128&&(f=b);break;case 2:(192&(c=a[e+1]))==128&&(i=(31&b)<<6|63&c)>127&&(f=i);break;case 3:c=a[e+1],d=a[e+2],(192&c)==128&&(192&d)==128&&(i=(15&b)<<12|(63&c)<<6|63&d)>2047&&(i<55296||i>57343)&&(f=i);break;case 4:c=a[e+1],d=a[e+2],h=a[e+3],(192&c)==128&&(192&d)==128&&(192&h)==128&&(i=(15&b)<<18|(63&c)<<12|(63&d)<<6|63&h)>65535&&i<1114112&&(f=i)}}null===f?(f=65533,g=1):f>65535&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|1023&f),d.push(f),e+=g}var f=d;let g=f.length;if(g<=4096)return String.fromCharCode.apply(String,f);let h="",i=0;for(;i<g;)h+=String.fromCharCode.apply(String,f.slice(i,i+=4096));return h}function u(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function v(a,b,c,d,e,f){if(!h.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function w(a,b,c,d,e){E(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function x(a,b,c,d,e){E(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function y(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function z(a,b,c,d,f){return b*=1,c>>>=0,f||y(a,b,c,4,34028234663852886e22,-34028234663852886e22),e.write(a,b,c,d,23,4),c+4}function A(a,b,c,d,f){return b*=1,c>>>=0,f||y(a,b,c,8,17976931348623157e292,-17976931348623157e292),e.write(a,b,c,d,52,8),c+8}b.hp=h,b.IS=50,h.TYPED_ARRAY_SUPPORT=function(){try{let a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(a){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(a,b,c){return i(a,b,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(a,b,c){return(j(a),a<=0)?g(a):void 0!==b?"string"==typeof c?g(a).fill(b,c):g(a).fill(b):g(a)},h.allocUnsafe=function(a){return k(a)},h.allocUnsafeSlow=function(a){return k(a)},h.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==h.prototype},h.compare=function(a,b){if(L(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),L(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(a)||!h.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:+(d<c)},h.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(a,b){let c;if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);if(void 0===b)for(c=0,b=0;c<a.length;++c)b+=a[c].length;let d=h.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let b=a[c];if(L(b,Uint8Array))e+b.length>d.length?(h.isBuffer(b)||(b=h.from(b)),b.copy(d,e)):Uint8Array.prototype.set.call(d,b,e);else if(h.isBuffer(b))b.copy(d,e);else throw TypeError('"list" argument must be an Array of Buffers');e+=b.length}return d},h.byteLength=o,h.prototype._isBuffer=!0,h.prototype.swap16=function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)q(this,b,b+1);return this},h.prototype.swap32=function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)q(this,b,b+3),q(this,b+1,b+2);return this},h.prototype.swap64=function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)q(this,b,b+7),q(this,b+1,b+6),q(this,b+2,b+5),q(this,b+3,b+4);return this},h.prototype.toString=function(){let a=this.length;return 0===a?"":0==arguments.length?t(this,0,a):p.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(a){if(!h.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===h.compare(this,a)},h.prototype.inspect=function(){let a="",c=b.IS;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},f&&(h.prototype[f]=h.prototype.inspect),h.prototype.compare=function(a,b,c,d,e){if(L(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),!h.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,g=c-b,i=Math.min(f,g),j=this.slice(d,e),k=a.slice(b,c);for(let a=0;a<i;++a)if(j[a]!==k[a]){f=j[a],g=k[a];break}return f<g?-1:+(g<f)},h.prototype.includes=function(a,b,c){return -1!==this.indexOf(a,b,c)},h.prototype.indexOf=function(a,b,c){return r(this,a,b,c,!0)},h.prototype.lastIndexOf=function(a,b,c){return r(this,a,b,c,!1)},h.prototype.write=function(a,b,c,d){var e,f,g,h,i,j,k,l;if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let m=this.length-b;if((void 0===c||c>m)&&(c=m),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let n=!1;for(;;)switch(d){case"hex":return function(a,b,c,d){let e;c=Number(c)||0;let f=a.length-c;d?(d=Number(d))>f&&(d=f):d=f;let g=b.length;for(d>g/2&&(d=g/2),e=0;e<d;++e){var h;let d=parseInt(b.substr(2*e,2),16);if((h=d)!=h)break;a[c+e]=d}return e}(this,a,b,c);case"utf8":case"utf-8":return e=b,f=c,K(I(a,this.length-e),this,e,f);case"ascii":case"latin1":case"binary":return g=b,h=c,K(function(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}(a),this,g,h);case"base64":return i=b,j=c,K(J(a),this,i,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k=b,l=c,K(function(a,b){let c,d,e=[];for(let f=0;f<a.length&&!((b-=2)<0);++f)d=(c=a.charCodeAt(f))>>8,e.push(c%256),e.push(d);return e}(a,this.length-k),this,k,l);default:if(n)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),n=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(a,b){let c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,h.prototype),d},h.prototype.readUintLE=h.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},h.prototype.readUintBE=h.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=this[a+--b],e=1;for(;b>0&&(e*=256);)d+=this[a+--b]*e;return d},h.prototype.readUint8=h.prototype.readUInt8=function(a,b){return a>>>=0,b||u(a,1,this.length),this[a]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(a,b){return a>>>=0,b||u(a,2,this.length),this[a]|this[a+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(a,b){return a>>>=0,b||u(a,2,this.length),this[a]<<8|this[a+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(a,b){return a>>>=0,b||u(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+0x1000000*this[a+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(a,b){return a>>>=0,b||u(a,4,this.length),0x1000000*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},h.prototype.readBigUInt64LE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&G(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+0x1000000*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+0x1000000*c;return BigInt(d)+(BigInt(e)<<BigInt(32))}),h.prototype.readBigUInt64BE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&G(a,this.length-8);let d=0x1000000*b+65536*this[++a]+256*this[++a]+this[++a],e=0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)}),h.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},h.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=b,e=1,f=this[a+--d];for(;d>0&&(e*=256);)f+=this[a+--d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},h.prototype.readInt8=function(a,b){return(a>>>=0,b||u(a,1,this.length),128&this[a])?-((255-this[a]+1)*1):this[a]},h.prototype.readInt16LE=function(a,b){a>>>=0,b||u(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?0xffff0000|c:c},h.prototype.readInt16BE=function(a,b){a>>>=0,b||u(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?0xffff0000|c:c},h.prototype.readInt32LE=function(a,b){return a>>>=0,b||u(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},h.prototype.readInt32BE=function(a,b){return a>>>=0,b||u(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},h.prototype.readBigInt64LE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&G(a,this.length-8),(BigInt(this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24))<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+0x1000000*this[++a])}),h.prototype.readBigInt64BE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&G(a,this.length-8),(BigInt((b<<24)+65536*this[++a]+256*this[++a]+this[++a])<<BigInt(32))+BigInt(0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c)}),h.prototype.readFloatLE=function(a,b){return a>>>=0,b||u(a,4,this.length),e.read(this,a,!0,23,4)},h.prototype.readFloatBE=function(a,b){return a>>>=0,b||u(a,4,this.length),e.read(this,a,!1,23,4)},h.prototype.readDoubleLE=function(a,b){return a>>>=0,b||u(a,8,this.length),e.read(this,a,!0,52,8)},h.prototype.readDoubleBE=function(a,b){return a>>>=0,b||u(a,8,this.length),e.read(this,a,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;v(this,a,b,c,d,0)}let e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;v(this,a,b,c,d,0)}let e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},h.prototype.writeUint8=h.prototype.writeUInt8=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,1,255,0),this[b]=255&a,b+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0xffffffff,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0xffffffff,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigUInt64LE=N(function(a,b=0){return w(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=N(function(a,b=0){return x(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);v(this,a,b,c,d-1,-d)}let e=0,f=1,g=0;for(this[b]=255&a;++e<c&&(f*=256);)a<0&&0===g&&0!==this[b+e-1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},h.prototype.writeIntBE=function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);v(this,a,b,c,d-1,-d)}let e=c-1,f=1,g=0;for(this[b+e]=255&a;--e>=0&&(f*=256);)a<0&&0===g&&0!==this[b+e+1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},h.prototype.writeInt8=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},h.prototype.writeInt16LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeInt16BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeInt32LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0x7fffffff,-0x80000000),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},h.prototype.writeInt32BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0x7fffffff,-0x80000000),a<0&&(a=0xffffffff+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigInt64LE=N(function(a,b=0){return w(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=N(function(a,b=0){return x(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(a,b,c){return z(this,a,b,!0,c)},h.prototype.writeFloatBE=function(a,b,c){return z(this,a,b,!1,c)},h.prototype.writeDoubleLE=function(a,b,c){return A(this,a,b,!0,c)},h.prototype.writeDoubleBE=function(a,b,c){return A(this,a,b,!1,c)},h.prototype.copy=function(a,b,c,d){if(!h.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},h.prototype.fill=function(a,b,c,d){let e;if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!h.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let b=a.charCodeAt(0);("utf8"===d&&b<128||"latin1"===d)&&(a=b)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(e=b;e<c;++e)this[e]=a;else{let f=h.isBuffer(a)?a:h.from(a,d),g=f.length;if(0===g)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(e=0;e<c-b;++e)this[e+b]=f[e%g]}return this};let B={};function C(a,b,c){B[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}function D(a){let b="",c=a.length,d=+("-"===a[0]);for(;c>=d+4;c-=3)b=`_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function E(a,b,c,d,e,f){if(a>c||a<b){let d,e="bigint"==typeof b?"n":"";throw d=f>3?0===b||b===BigInt(0)?`>= 0${e} and < 2${e} ** ${(f+1)*8}${e}`:`>= -(2${e} ** ${(f+1)*8-1}${e}) and < 2 ** ${(f+1)*8-1}${e}`:`>= ${b}${e} and <= ${c}${e}`,new B.ERR_OUT_OF_RANGE("value",d,a)}F(e,"offset"),(void 0===d[e]||void 0===d[e+f])&&G(e,d.length-(f+1))}function F(a,b){if("number"!=typeof a)throw new B.ERR_INVALID_ARG_TYPE(b,"number",a)}function G(a,b,c){if(Math.floor(a)!==a)throw F(a,c),new B.ERR_OUT_OF_RANGE(c||"offset","an integer",a);if(b<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(c||"offset",`>= ${+!!c} and <= ${b}`,a)}C("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),C("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received type ${typeof b}`},TypeError),C("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out of range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>0x100000000?e=D(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(e=D(e)),e+="n"),d+=` It must be ${b}. Received ${e}`},RangeError);let H=/[^+/0-9A-Za-z-_]/g;function I(a,b){let c;b=b||1/0;let d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function J(a){return d.toByteArray(function(a){if((a=(a=a.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function K(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length)&&!(e>=a.length);++e)b[e+c]=a[e];return e}function L(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}let M=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function N(a){return"undefined"==typeof BigInt?O:a}function O(){throw Error("BigInt not supported")}},4981:(a,b,c)=>{"use strict";c.d(b,{A4:()=>i,mC:()=>j});var d=c(65689),e=c(6928),f=c(83967),g=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};let h=new TextEncoder().encode("\nic-request");class i{getPrincipal(){return this._principal||(this._principal=d.p.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(a){let{body:b}=a,c=g(a,["body"]),d=(0,e.Gb)(b);return Object.assign(Object.assign({},c),{body:{content:b,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign((0,f.xW)(h,d))}})}}class j{getPrincipal(){return d.p.anonymous()}async transformRequest(a){return Object.assign(Object.assign({},a),{body:{content:a.body}})}}},6928:(a,b,c)=>{"use strict";c.d(b,{Gb:()=>j,tW:()=>h,uF:()=>k});var d=c(17243),e=c(16355),f=c(12362),g=c(83967);function h(a){return(0,g.Nn)(f.sc.create().update(new Uint8Array(a)).digest())}let i=a=>h(new TextEncoder().encode(a));function j(a){return k(a)}function k(a){let b=Object.entries(a).filter(([,a])=>void 0!==a).map(([a,b])=>[i(a),function a(b){if(b instanceof e.Tagged)return a(b.value);if("string"==typeof b)return i(b);if("number"==typeof b)return h((0,d.kk)(b));if(b instanceof ArrayBuffer||ArrayBuffer.isView(b))return h(b);if(Array.isArray(b)){let c=b.map(a);return h((0,g.xW)(...c))}else if(b&&"object"==typeof b&&b._isPrincipal)return h(b.toUint8Array());else if("object"==typeof b&&null!==b&&"function"==typeof b.toHash)return a(b.toHash());else if("object"==typeof b)return k(b);else if("bigint"==typeof b)return h((0,d.kk)(b));throw Object.assign(Error(`Attempt to hash a value of unsupported type: ${b}`),{value:b})}(b)]).sort(([a],[b])=>(0,g.UD)(a,b));return h((0,g.xW)(...b.map(a=>(0,g.xW)(...a))))}},7736:(a,b,c)=>{"use strict";c.d(b,{Yv:()=>d}),c(65689),c(46005),c(83967);class d extends Error{constructor(a){super(a),this.message=a,this.name="AgentError",this.__proto__=d.prototype,Object.setPrototypeOf(this,d.prototype)}}},9424:(a,b,c)=>{"use strict";c.d(b,{Ag:()=>r,mC:()=>x.mC,WQ:()=>y.WQ,le:()=>y.le,qB:()=>e.qB,A4:()=>x.A4,HA:()=>i.HA,em:()=>i.em,aD:()=>i.aD,Gb:()=>z.Gb,nj:()=>i.nj,Nn:()=>i.Nn,n9:()=>y.n9,C2:()=>y.C2});var d=c(4620),e=c(65962),f=c(7736),g=c(17243),h=c(91818),i=c(83967);function j(){var a;let b,c;return function(...a){return async(b,c,d)=>{for(let e of a)await e(b,c,d)}}((a=(b=!0,async()=>!!b&&(b=!1,!0)),async(b,c,d)=>{if(await a(b,c,d))return new Promise(a=>setTimeout(a,1e3))}),(c=1e3,()=>new Promise(a=>setTimeout(()=>{c*=1.2,a()},c))),function(a){let b=Date.now()+3e5;return async(c,d,e)=>{if(Date.now()>b)throw Error(`Request timed out after ${a} msec:
  Request ID: ${(0,i.nj)(d)}
  Request status: ${e}
`)}}(3e5))}async function k(a,b,c,d=j(),f,g){var l;let m,n=[new TextEncoder().encode("request_status"),c],o=null!=f?f:await (null==(l=a.createReadStateRequest)?void 0:l.call(a,{paths:[n]})),p=await a.readState(b,{paths:[n]},void 0,o);if(null==a.rootKey)throw Error("Agent root key not initialized before polling");let q=await h.us.create({certificate:p.certificate,rootKey:a.rootKey,canisterId:b,blsVerify:g}),r=(0,h.Xr)(q.lookup([...n,new TextEncoder().encode("status")]));switch(m=void 0===r?e.BY.Unknown:new TextDecoder().decode(r)){case e.BY.Replied:return{reply:(0,h.Xr)(q.lookup([...n,"reply"])),certificate:q};case e.BY.Received:case e.BY.Unknown:case e.BY.Processing:return await d(b,c,m),k(a,b,c,d,o,g);case e.BY.Rejected:{let a=new Uint8Array((0,h.Xr)(q.lookup([...n,"reject_code"])))[0],b=new TextDecoder().decode((0,h.Xr)(q.lookup([...n,"reject_message"])));throw Error(`Call was rejected:
  Request ID: ${(0,i.nj)(c)}
  Reject code: ${a}
  Reject text: ${b}
`)}case e.BY.Done:throw Error(`Call was marked as done but we never saw the reply:
  Request ID: ${(0,i.nj)(c)}
`)}throw Error("unreachable")}var l=c(65689);let m=({IDL:a})=>{let b=a.Variant({mainnet:a.Null,testnet:a.Null}),c=a.Text,d=a.Record({network:b,address:c,min_confirmations:a.Opt(a.Nat32)}),e=a.Nat64,f=a.Nat32,g=a.Record({start_height:f,end_height:a.Opt(f),network:b}),h=a.Vec(a.Nat8),i=a.Record({tip_height:f,block_headers:a.Vec(h)}),j=a.Record({network:b}),k=a.Nat64,l=a.Vec(k),m=a.Record({network:b,filter:a.Opt(a.Variant({page:a.Vec(a.Nat8),min_confirmations:a.Nat32})),address:c}),n=a.Vec(a.Nat8),o=a.Record({txid:a.Vec(a.Nat8),vout:a.Nat32}),p=a.Record({height:a.Nat32,value:e,outpoint:o}),q=a.Record({next_page:a.Opt(a.Vec(a.Nat8)),tip_height:f,tip_block_hash:n,utxos:a.Vec(p)}),r=a.Record({transaction:a.Vec(a.Nat8),network:b}),s=a.Principal,t=a.Record({canister_id:s,num_requested_changes:a.Opt(a.Nat64)}),u=a.Variant({from_user:a.Record({user_id:a.Principal}),from_canister:a.Record({canister_version:a.Opt(a.Nat64),canister_id:a.Principal})}),v=a.Vec(a.Nat8),w=a.Variant({creation:a.Record({controllers:a.Vec(a.Principal)}),code_deployment:a.Record({mode:a.Variant({reinstall:a.Null,upgrade:a.Null,install:a.Null}),module_hash:a.Vec(a.Nat8)}),load_snapshot:a.Record({canister_version:a.Nat64,taken_at_timestamp:a.Nat64,snapshot_id:v}),controllers_change:a.Record({controllers:a.Vec(a.Principal)}),code_uninstall:a.Null}),x=a.Record({timestamp_nanos:a.Nat64,canister_version:a.Nat64,origin:u,details:w}),y=a.Record({controllers:a.Vec(a.Principal),module_hash:a.Opt(a.Vec(a.Nat8)),recent_changes:a.Vec(x),total_num_changes:a.Nat64}),z=a.Record({canister_id:s}),A=a.Variant({controllers:a.Null,public:a.Null,allowed_viewers:a.Vec(a.Principal)}),B=a.Record({freezing_threshold:a.Nat,controllers:a.Vec(a.Principal),reserved_cycles_limit:a.Nat,log_visibility:A,wasm_memory_limit:a.Nat,memory_allocation:a.Nat,compute_allocation:a.Nat}),C=a.Record({status:a.Variant({stopped:a.Null,stopping:a.Null,running:a.Null}),memory_size:a.Nat,cycles:a.Nat,settings:B,query_stats:a.Record({response_payload_bytes_total:a.Nat,num_instructions_total:a.Nat,num_calls_total:a.Nat,request_payload_bytes_total:a.Nat}),idle_cycles_burned_per_day:a.Nat,module_hash:a.Opt(a.Vec(a.Nat8)),reserved_cycles:a.Nat}),D=a.Record({canister_id:s}),E=a.Record({freezing_threshold:a.Opt(a.Nat),controllers:a.Opt(a.Vec(a.Principal)),reserved_cycles_limit:a.Opt(a.Nat),log_visibility:a.Opt(A),wasm_memory_limit:a.Opt(a.Nat),memory_allocation:a.Opt(a.Nat),compute_allocation:a.Opt(a.Nat)}),F=a.Record({settings:a.Opt(E),sender_canister_version:a.Opt(a.Nat64)}),G=a.Record({canister_id:s}),H=a.Record({canister_id:s}),I=a.Record({canister_id:s,snapshot_id:v}),J=a.Record({canister_id:s}),K=a.Variant({secp256k1:a.Null}),L=a.Record({key_id:a.Record({name:a.Text,curve:K}),canister_id:a.Opt(s),derivation_path:a.Vec(a.Vec(a.Nat8))}),M=a.Record({public_key:a.Vec(a.Nat8),chain_code:a.Vec(a.Nat8)}),N=a.Record({canister_id:s}),O=a.Record({idx:a.Nat64,timestamp_nanos:a.Nat64,content:a.Vec(a.Nat8)}),P=a.Record({canister_log_records:a.Vec(O)}),Q=a.Record({value:a.Text,name:a.Text}),R=a.Record({status:a.Nat,body:a.Vec(a.Nat8),headers:a.Vec(Q)}),S=a.Record({url:a.Text,method:a.Variant({get:a.Null,head:a.Null,post:a.Null}),max_response_bytes:a.Opt(a.Nat64),body:a.Opt(a.Vec(a.Nat8)),transform:a.Opt(a.Record({function:a.Func([a.Record({context:a.Vec(a.Nat8),response:R})],[R],["query"]),context:a.Vec(a.Nat8)})),headers:a.Vec(Q)}),T=a.Variant({reinstall:a.Null,upgrade:a.Opt(a.Record({wasm_memory_persistence:a.Opt(a.Variant({keep:a.Null,replace:a.Null})),skip_pre_upgrade:a.Opt(a.Bool)})),install:a.Null}),U=a.Record({hash:a.Vec(a.Nat8)}),V=a.Record({arg:a.Vec(a.Nat8),wasm_module_hash:a.Vec(a.Nat8),mode:T,chunk_hashes_list:a.Vec(U),target_canister:s,store_canister:a.Opt(s),sender_canister_version:a.Opt(a.Nat64)}),W=a.Vec(a.Nat8),X=a.Record({arg:a.Vec(a.Nat8),wasm_module:W,mode:T,canister_id:s,sender_canister_version:a.Opt(a.Nat64)}),Y=a.Record({canister_id:s}),Z=a.Record({id:v,total_size:a.Nat64,taken_at_timestamp:a.Nat64}),$=a.Vec(Z),_=a.Record({canister_id:s,sender_canister_version:a.Opt(a.Nat64),snapshot_id:v}),aa=a.Record({start_at_timestamp_nanos:a.Nat64,subnet_id:a.Principal}),ab=a.Record({num_block_failures_total:a.Nat64,node_id:a.Principal,num_blocks_proposed_total:a.Nat64}),ac=a.Vec(a.Record({timestamp_nanos:a.Nat64,node_metrics:a.Vec(ab)})),ad=a.Record({settings:a.Opt(E),specified_id:a.Opt(s),amount:a.Opt(a.Nat),sender_canister_version:a.Opt(a.Nat64)}),ae=a.Record({canister_id:s}),af=a.Record({canister_id:s,amount:a.Nat}),ag=a.Vec(a.Nat8),ah=a.Variant({ed25519:a.Null,bip340secp256k1:a.Null}),ai=a.Record({key_id:a.Record({algorithm:ah,name:a.Text}),canister_id:a.Opt(s),derivation_path:a.Vec(a.Vec(a.Nat8))}),aj=a.Record({public_key:a.Vec(a.Nat8),chain_code:a.Vec(a.Nat8)}),ak=a.Record({key_id:a.Record({name:a.Text,curve:K}),derivation_path:a.Vec(a.Vec(a.Nat8)),message_hash:a.Vec(a.Nat8)}),al=a.Record({signature:a.Vec(a.Nat8)}),am=a.Variant({bip341:a.Record({merkle_root_hash:a.Vec(a.Nat8)})}),an=a.Record({aux:a.Opt(am),key_id:a.Record({algorithm:ah,name:a.Text}),derivation_path:a.Vec(a.Vec(a.Nat8)),message:a.Vec(a.Nat8)}),ao=a.Record({signature:a.Vec(a.Nat8)}),ap=a.Record({canister_id:s}),aq=a.Record({canister_id:s}),ar=a.Record({canister_id:s}),as=a.Vec(U),at=a.Record({subnet_id:a.Principal}),au=a.Record({replica_version:a.Text}),av=a.Record({replace_snapshot:a.Opt(v),canister_id:s}),aw=a.Record({canister_id:s,sender_canister_version:a.Opt(a.Nat64)}),ax=a.Record({canister_id:a.Principal,settings:E,sender_canister_version:a.Opt(a.Nat64)}),ay=a.Record({chunk:a.Vec(a.Nat8),canister_id:a.Principal});return a.Service({bitcoin_get_balance:a.Func([d],[e],[]),bitcoin_get_block_headers:a.Func([g],[i],[]),bitcoin_get_current_fee_percentiles:a.Func([j],[l],[]),bitcoin_get_utxos:a.Func([m],[q],[]),bitcoin_send_transaction:a.Func([r],[],[]),canister_info:a.Func([t],[y],[]),canister_status:a.Func([z],[C],[]),clear_chunk_store:a.Func([D],[],[]),create_canister:a.Func([F],[G],[]),delete_canister:a.Func([H],[],[]),delete_canister_snapshot:a.Func([I],[],[]),deposit_cycles:a.Func([J],[],[]),ecdsa_public_key:a.Func([L],[M],[]),fetch_canister_logs:a.Func([N],[P],["query"]),http_request:a.Func([S],[R],[]),install_chunked_code:a.Func([V],[],[]),install_code:a.Func([X],[],[]),list_canister_snapshots:a.Func([Y],[$],[]),load_canister_snapshot:a.Func([_],[],[]),node_metrics_history:a.Func([aa],[ac],[]),provisional_create_canister_with_cycles:a.Func([ad],[ae],[]),provisional_top_up_canister:a.Func([af],[],[]),raw_rand:a.Func([],[ag],[]),schnorr_public_key:a.Func([ai],[aj],[]),sign_with_ecdsa:a.Func([ak],[al],[]),sign_with_schnorr:a.Func([an],[ao],[]),start_canister:a.Func([ap],[],[]),stop_canister:a.Func([aq],[],[]),stored_chunks:a.Func([ar],[as],[]),subnet_info:a.Func([at],[au],[]),take_canister_snapshot:a.Func([av],[Z],[]),uninstall_code:a.Func([aw],[],[]),update_settings:a.Func([ax],[],[]),upload_chunk:a.Func([ay],[U],[])})};class n extends f.Yv{constructor(a,b,c,d){super(["Call failed:",`  Canister: ${a.toText()}`,`  Method: ${b} (${c})`,...Object.getOwnPropertyNames(d).map(a=>`  "${a}": ${JSON.stringify(d[a])}`)].join("\n")),this.canisterId=a,this.methodName=b,this.type=c,this.props=d}}class o extends n{constructor(a,b,c){var d;super(a,b,"query",{Status:c.status,Code:null!=(d=e.RK[c.reject_code])?d:`Unknown Code "${c.reject_code}"`,Message:c.reject_message}),this.result=c}}class p extends n{constructor(a,b,c,d,e,f,g){super(a,b,"update",Object.assign({"Request ID":(0,i.nj)(c)},d.body?Object.assign(Object.assign({},g?{"Error code":g}:{}),{"Reject code":String(e),"Reject message":f}):{"HTTP status code":d.status.toString(),"HTTP status text":d.statusText})),this.requestId=c,this.response=d,this.reject_code=e,this.reject_message=f,this.error_code=g}}let q=Symbol.for("ic-agent-metadata");class r{constructor(a){this[q]=Object.freeze(a)}static agentOf(a){return a[q].config.agent}static interfaceOf(a){return a[q].service}static canisterIdOf(a){return l.p.from(a[q].config.canisterId)}static async install(a,b){let c=void 0===a.mode?{install:null}:a.mode,d=a.arg?[...new Uint8Array(a.arg)]:[],e=[...new Uint8Array(a.module)],f="string"==typeof b.canisterId?l.p.fromText(b.canisterId):b.canisterId;await w(b).install_code({mode:c,arg:d,wasm_module:e,canister_id:f,sender_canister_version:[]})}static async createCanister(a,b){var c;let{canister_id:d}=await w(a||{}).provisional_create_canister_with_cycles({amount:[],settings:[{controllers:(c=b||{}).controllers?[c.controllers]:[],compute_allocation:c.compute_allocation?[c.compute_allocation]:[],freezing_threshold:c.freezing_threshold?[c.freezing_threshold]:[],memory_allocation:c.memory_allocation?[c.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}],specified_id:[],sender_canister_version:[]});return d}static async createAndInstallCanister(a,b,c){let d=await this.createCanister(c);return await this.install(Object.assign({},b),Object.assign(Object.assign({},c),{canisterId:d})),this.createActor(a,Object.assign(Object.assign({},c),{canisterId:d}))}static createActorClass(a,b){let c=a({IDL:g.Ih});class d extends r{constructor(a){if(!a.canisterId)throw new f.Yv(`Canister ID is required, but received ${typeof a.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);for(let[d,f]of(super({config:Object.assign(Object.assign(Object.assign({},t),a),{canisterId:"string"==typeof a.canisterId?l.p.fromText(a.canisterId):a.canisterId}),service:c}),c._fields))(null==b?void 0:b.httpDetails)&&f.annotations.push(u),(null==b?void 0:b.certificate)&&f.annotations.push(v),this[d]=function(a,b,c,d){let f;f=c.annotations.includes("query")||c.annotations.includes("composite_query")?async(d,...f)=>{var h,i;let j=(d=Object.assign(Object.assign({},d),null==(i=(h=a[q].config).queryTransform)?void 0:i.call(h,b,f,Object.assign(Object.assign({},a[q].config),d)))).agent||a[q].config.agent||(0,e.i8)(),k=l.p.from(d.canisterId||a[q].config.canisterId),m=g.Ih.encode(c.argTypes,f),n=await j.query(k,{methodName:b,arg:m,effectiveCanisterId:d.effectiveCanisterId}),p=Object.assign(Object.assign({},n.httpDetails),{requestDetails:n.requestDetails});switch(n.status){case"rejected":throw new o(k,b,n);case"replied":return c.annotations.includes(u)?{httpDetails:p,result:s(c.retTypes,n.reply.arg)}:s(c.retTypes,n.reply.arg)}}:async(f,...i)=>{var j,m;let n,o,r=(f=Object.assign(Object.assign({},f),null==(m=(j=a[q].config).callTransform)?void 0:m.call(j,b,i,Object.assign(Object.assign({},a[q].config),f)))).agent||a[q].config.agent||(0,e.i8)(),{canisterId:w,effectiveCanisterId:x,pollingStrategyFactory:y}=Object.assign(Object.assign(Object.assign({},t),a[q].config),f),z=l.p.from(w),A=void 0!==x?l.p.from(x):z,B=g.Ih.encode(c.argTypes,i),{requestId:C,response:D,requestDetails:E}=await r.call(z,{methodName:b,arg:B,effectiveCanisterId:A});if(D.body&&D.body.certificate){if(null==r.rootKey)throw Error("Agent is missing root key");let a=D.body.certificate;o=await h.us.create({certificate:(0,g.em)(a),rootKey:r.rootKey,canisterId:l.p.from(w),blsVerify:d});let c=[new TextEncoder().encode("request_status"),C];switch(new TextDecoder().decode((0,h.Xr)(o.lookup([...c,"status"])))){case"replied":n=(0,h.Xr)(o.lookup([...c,"reply"]));break;case"rejected":{let a=new Uint8Array((0,h.Xr)(o.lookup([...c,"reject_code"])))[0],d=new TextDecoder().decode((0,h.Xr)(o.lookup([...c,"reject_message"]))),e=(0,h.Xr)(o.lookup([...c,"error_code"]));throw new p(z,b,C,D,a,d,e?new TextDecoder().decode(e):void 0)}}}else if(D.body&&"reject_message"in D.body){let{reject_code:a,reject_message:c,error_code:d}=D.body;throw new p(z,b,C,D,a,c,d)}if(202===D.status){let a=y(),b=await k(r,A,C,a,d);o=b.certificate,n=b.reply}let F=c.annotations.includes(u),G=c.annotations.includes(v),H=Object.assign(Object.assign({},D),{requestDetails:E});if(void 0!==n)return F&&G?{httpDetails:H,certificate:o,result:s(c.retTypes,n)}:G?{certificate:o,result:s(c.retTypes,n)}:F?{httpDetails:H,result:s(c.retTypes,n)}:s(c.retTypes,n);if(0===c.retTypes.length)return F?{httpDetails:D,result:void 0}:void 0;throw Error(`Call was returned undefined, but type [${c.retTypes.join(",")}].`)};let i=(...a)=>f({},...a);return i.withOptions=a=>(...b)=>f(a,...b),i}(this,d,f,a.blsVerify)}}return d}static createActor(a,b){if(!b.canisterId)throw new f.Yv(`Canister ID is required, but received ${typeof b.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(a))(b)}static createActorWithHttpDetails(a,b){return new(this.createActorClass(a,{httpDetails:!0}))(b)}static createActorWithExtendedDetails(a,b,c={httpDetails:!0,certificate:!0}){return new(this.createActorClass(a,c))(b)}}function s(a,b){let c=g.Ih.decode(a,d.hp.from(b));switch(c.length){case 0:return;case 1:return c[0];default:return c}}let t={pollingStrategyFactory:j},u="http-details",v="certificate";function w(a){function b(b,c){if(a.effectiveCanisterId)return{effectiveCanisterId:l.p.from(a.effectiveCanisterId)};let d=c[0],e=l.p.fromHex("");return d&&"object"==typeof d&&d.target_canister&&"install_chunked_code"===b&&(e=l.p.from(d.target_canister)),d&&"object"==typeof d&&d.canister_id&&(e=l.p.from(d.canister_id)),{effectiveCanisterId:e}}return r.createActor(m,Object.assign(Object.assign(Object.assign({},a),{canisterId:l.p.fromHex("")}),{callTransform:b,queryTransform:b}))}c(4229),c(80616);var x=c(4981),y=c(89940);c(82639),c(91248),c(89706),c(93258);var z=c(6928);c(75095)},12362:(a,b,c)=>{"use strict";c.d(b,{ZT:()=>f,sc:()=>e});var d=c(13923);let e=d.sc,f=d.ZT},13270:(a,b,c)=>{"use strict";let d=c(66221).BigNumber;b.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},b.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},b.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},b.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},b.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},b.SHIFT32=0x100000000,b.SHIFT16=65536,b.MAX_SAFE_HIGH=2097151,b.NEG_ONE=new d(-1),b.TEN=new d(10),b.TWO=new d(2),b.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5}},13923:(a,b,c)=>{"use strict";c.d(b,{ZT:()=>I,sc:()=>H,Zf:()=>J});var d=c(90113);class e extends d.Vw{constructor(a,b,c,e){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=e,this.buffer=new Uint8Array(a),this.view=(0,d.O8)(this.buffer)}update(a){(0,d.CC)(this),a=(0,d.ZJ)(a),(0,d.DO)(a);let{view:b,buffer:c,blockLen:e}=this,f=a.length;for(let g=0;g<f;){let h=Math.min(e-this.pos,f-g);if(h===e){let b=(0,d.O8)(a);for(;e<=f-g;g+=e)this.process(b,g);continue}c.set(a.subarray(g,g+h),this.pos),this.pos+=h,g+=h,this.pos===e&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){(0,d.CC)(this),(0,d.Ht)(a,this),this.finished=!0;let{buffer:b,view:c,blockLen:e,isLE:f}=this,{pos:g}=this;b[g++]=128,(0,d.uH)(this.buffer.subarray(g)),this.padOffset>e-g&&(this.process(c,0),g=0);for(let a=g;a<e;a++)b[a]=0;!function(a,b,c,d){if("function"==typeof a.setBigUint64)return a.setBigUint64(b,c,d);let e=BigInt(32),f=BigInt(0xffffffff),g=Number(c>>e&f),h=Number(c&f),i=4*!!d,j=4*!d;a.setUint32(b+i,g,d),a.setUint32(b+j,h,d)}(c,e-8,BigInt(8*this.length),f),this.process(c,0);let h=(0,d.O8)(a),i=this.outputLen;if(i%4)throw Error("_sha2: outputLen should be aligned to 32bit");let j=i/4,k=this.get();if(j>k.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<j;a++)h.setUint32(4*a,k[a],f)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.destroyed=f,a.finished=e,a.length=d,a.pos=g,d%b&&a.buffer.set(c),a}clone(){return this._cloneInto()}}let f=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),g=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),h=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),i=BigInt(0x100000000-1),j=BigInt(32),k=(a,b,c)=>a>>>c,l=(a,b,c)=>a<<32-c|b>>>c,m=(a,b,c)=>a>>>c|b<<32-c,n=(a,b,c)=>a<<32-c|b>>>c,o=(a,b,c)=>a<<64-c|b>>>c-32,p=(a,b,c)=>a>>>c-32|b<<64-c;function q(a,b,c,d){let e=(b>>>0)+(d>>>0);return{h:a+c+(e/0x100000000|0)|0,l:0|e}}let r=(a,b,c)=>(a>>>0)+(b>>>0)+(c>>>0),s=(a,b,c,d)=>b+c+d+(a/0x100000000|0)|0,t=(a,b,c,d)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0),u=(a,b,c,d,e)=>b+c+d+e+(a/0x100000000|0)|0,v=(a,b,c,d,e)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0)+(e>>>0),w=(a,b,c,d,e,f)=>b+c+d+e+f+(a/0x100000000|0)|0,x=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),y=new Uint32Array(64);class z extends e{constructor(a=32){super(64,a,8,!1),this.A=0|f[0],this.B=0|f[1],this.C=0|f[2],this.D=0|f[3],this.E=0|f[4],this.F=0|f[5],this.G=0|f[6],this.H=0|f[7]}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)y[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=y[a-15],c=y[a-2],e=(0,d.Ow)(b,7)^(0,d.Ow)(b,18)^b>>>3,f=(0,d.Ow)(c,17)^(0,d.Ow)(c,19)^c>>>10;y[a]=f+y[a-7]+e+y[a-16]|0}let{A:c,B:e,C:f,D:g,E:h,F:i,G:j,H:k}=this;for(let a=0;a<64;a++){var l,m,n,o;let b=k+((0,d.Ow)(h,6)^(0,d.Ow)(h,11)^(0,d.Ow)(h,25))+((l=h)&i^~l&j)+x[a]+y[a]|0,p=((0,d.Ow)(c,2)^(0,d.Ow)(c,13)^(0,d.Ow)(c,22))+((m=c)&(n=e)^m&(o=f)^n&o)|0;k=j,j=i,i=h,h=g+b|0,g=f,f=e,e=c,c=b+p|0}c=c+this.A|0,e=e+this.B|0,f=f+this.C|0,g=g+this.D|0,h=h+this.E|0,i=i+this.F|0,j=j+this.G|0,k=k+this.H|0,this.set(c,e,f,g,h,i,j,k)}roundClean(){(0,d.uH)(y)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,d.uH)(this.buffer)}}class A extends z{constructor(){super(28),this.A=0|g[0],this.B=0|g[1],this.C=0|g[2],this.D=0|g[3],this.E=0|g[4],this.F=0|g[5],this.G=0|g[6],this.H=0|g[7]}}let B=function(a,b=!1){let c=a.length,d=new Uint32Array(c),e=new Uint32Array(c);for(let f=0;f<c;f++){let{h:c,l:g}=function(a,b=!1){return b?{h:Number(a&i),l:Number(a>>j&i)}:{h:0|Number(a>>j&i),l:0|Number(a&i)}}(a[f],b);[d[f],e[f]]=[c,g]}return[d,e]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(a=>BigInt(a))),C=B[0],D=B[1],E=new Uint32Array(80),F=new Uint32Array(80);class G extends e{constructor(a=64){super(128,a,16,!1),this.Ah=0|h[0],this.Al=0|h[1],this.Bh=0|h[2],this.Bl=0|h[3],this.Ch=0|h[4],this.Cl=0|h[5],this.Dh=0|h[6],this.Dl=0|h[7],this.Eh=0|h[8],this.El=0|h[9],this.Fh=0|h[10],this.Fl=0|h[11],this.Gh=0|h[12],this.Gl=0|h[13],this.Hh=0|h[14],this.Hl=0|h[15]}get(){let{Ah:a,Al:b,Bh:c,Bl:d,Ch:e,Cl:f,Dh:g,Dl:h,Eh:i,El:j,Fh:k,Fl:l,Gh:m,Gl:n,Hh:o,Hl:p}=this;return[a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p]}set(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.Ah=0|a,this.Al=0|b,this.Bh=0|c,this.Bl=0|d,this.Ch=0|e,this.Cl=0|f,this.Dh=0|g,this.Dl=0|h,this.Eh=0|i,this.El=0|j,this.Fh=0|k,this.Fl=0|l,this.Gh=0|m,this.Gl=0|n,this.Hh=0|o,this.Hl=0|p}process(a,b){for(let c=0;c<16;c++,b+=4)E[c]=a.getUint32(b),F[c]=a.getUint32(b+=4);for(let a=16;a<80;a++){let b=0|E[a-15],c=0|F[a-15],d=m(b,c,1)^m(b,c,8)^k(b,c,7),e=n(b,c,1)^n(b,c,8)^l(b,c,7),f=0|E[a-2],g=0|F[a-2],h=m(f,g,19)^o(f,g,61)^k(f,g,6),i=t(e,n(f,g,19)^p(f,g,61)^l(f,g,6),F[a-7],F[a-16]),j=u(i,d,h,E[a-7],E[a-16]);E[a]=0|j,F[a]=0|i}let{Ah:c,Al:d,Bh:e,Bl:f,Ch:g,Cl:h,Dh:i,Dl:j,Eh:x,El:y,Fh:z,Fl:A,Gh:B,Gl:G,Hh:H,Hl:I}=this;for(let a=0;a<80;a++){let b=m(x,y,14)^m(x,y,18)^o(x,y,41),k=n(x,y,14)^n(x,y,18)^p(x,y,41),l=x&z^~x&B,t=v(I,k,y&A^~y&G,D[a],F[a]),u=w(t,H,b,l,C[a],E[a]),J=0|t,K=m(c,d,28)^o(c,d,34)^o(c,d,39),L=n(c,d,28)^p(c,d,34)^p(c,d,39),M=c&e^c&g^e&g,N=d&f^d&h^f&h;H=0|B,I=0|G,B=0|z,G=0|A,z=0|x,A=0|y,({h:x,l:y}=q(0|i,0|j,0|u,0|J)),i=0|g,j=0|h,g=0|e,h=0|f,e=0|c,f=0|d;let O=r(J,L,N);c=s(O,u,K,M),d=0|O}({h:c,l:d}=q(0|this.Ah,0|this.Al,0|c,0|d)),({h:e,l:f}=q(0|this.Bh,0|this.Bl,0|e,0|f)),({h:g,l:h}=q(0|this.Ch,0|this.Cl,0|g,0|h)),({h:i,l:j}=q(0|this.Dh,0|this.Dl,0|i,0|j)),({h:x,l:y}=q(0|this.Eh,0|this.El,0|x,0|y)),({h:z,l:A}=q(0|this.Fh,0|this.Fl,0|z,0|A)),({h:B,l:G}=q(0|this.Gh,0|this.Gl,0|B,0|G)),({h:H,l:I}=q(0|this.Hh,0|this.Hl,0|H,0|I)),this.set(c,d,e,f,g,h,i,j,x,y,z,A,B,G,H,I)}roundClean(){(0,d.uH)(E,F)}destroy(){(0,d.uH)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let H=(0,d.qj)(()=>new z),I=(0,d.qj)(()=>new A),J=(0,d.qj)(()=>new G)},15507:(a,b)=>{"use strict";function c(a,...b){let d=new Uint8Array(a.byteLength+b.reduce((a,b)=>a+b.byteLength,0));d.set(new Uint8Array(a),0);let e=a.byteLength;for(let a of b)d.set(new Uint8Array(a),e),e+=a.byteLength;return d.buffer}function d(a,b,c){c=c.replace(/[^0-9a-fA-F]/g,"");let d=2**(b-24);return new Uint8Array([(a<<5)+b].concat((c=c.slice(-(2*d)).padStart(2*d,"0")).match(/../g).map(a=>parseInt(a,16)))).buffer}function e(a,b){return b<24?new Uint8Array([(a<<5)+b]).buffer:d(a,b<=255?24:b<=65535?25:b<=0xffffffff?26:27,b.toString(16))}function f(a){let b=[];for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);d<128?b.push(d):d<2048?b.push(192|d>>6,128|63&d):d<55296||d>=57344?b.push(224|d>>12,128|d>>6&63,128|63&d):(c++,d=(1023&d)<<10|1023&a.charCodeAt(c),b.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|63&d))}return c(new Uint8Array(e(3,a.length)),new Uint8Array(b))}function g(a){return new Uint8Array(a).buffer}function h(a){if(isNaN(a))throw RangeError("Invalid number.");return new Uint8Array([0+(a=Math.min(Math.max(0,a),23))]).buffer}function i(a,b){if(isNaN(a=parseInt(""+a,b)))throw RangeError("Invalid number.");return d(0,24,a=(a=Math.min(Math.max(0,a),255)).toString(16))}function j(a,b){if(isNaN(a=parseInt(""+a,b)))throw RangeError("Invalid number.");return d(0,25,a=(a=Math.min(Math.max(0,a),65535)).toString(16))}function k(a,b){if(isNaN(a=parseInt(""+a,b)))throw RangeError("Invalid number.");return d(0,26,a=(a=Math.min(Math.max(0,a),0xffffffff)).toString(16))}function l(a,b){if("string"==typeof a&&16==b){if(a.match(/[^0-9a-fA-F]/))throw RangeError("Invalid number.");return d(0,27,a)}if(isNaN(a=parseInt(""+a,b)))throw RangeError("Invalid number.");return d(0,27,a=(a=Math.min(Math.max(0,a),0x20000000000000)).toString(16))}function m(a){if(isNaN(a))throw RangeError("Invalid number.");return 0===a?h(0):new Uint8Array([32+(a=Math.min(Math.max(0,-a),24)-1)]).buffer}function n(a,b){if(isNaN(a=parseInt(""+a,b)))throw RangeError("Invalid number.");return d(1,24,a=(a=Math.min(Math.max(0,-a-1),255)).toString(16))}function o(a,b){if(isNaN(a=parseInt(""+a,b)))throw RangeError("Invalid number.");return d(1,25,a=(a=Math.min(Math.max(0,-a-1),65535)).toString(16))}function p(a,b){if(isNaN(a=parseInt(""+a,b)))throw RangeError("Invalid number.");return d(1,26,a=(a=Math.min(Math.max(0,-a-1),0xffffffff)).toString(16))}function q(a,b){if("string"==typeof a&&16==b){if((a=a.startsWith("-")?a.slice(1):"0").match(/[^0-9a-fA-F]/)||a.length>16)throw RangeError("Invalid number.");let b=!1,c=a.split("").reduceRight((a,c)=>{if(b)return c+a;let d=parseInt(c,16)-1;return d>=0?(b=!0,d.toString(16)+a):"f"+a},"");return b?d(1,27,c):l(0)}if(isNaN(a=parseInt(""+a,b)))throw RangeError("Invalid number.");return d(1,27,a=(a=Math.min(Math.max(0,-a-1),0x20000000000000)).toString(16))}function r(){return g(new Uint8Array([245]))}function s(){return g(new Uint8Array([244]))}Object.defineProperty(b,"__esModule",{value:!0}),b.tagged=function(a,b){if(0xd9d9f7==a)return c(new Uint8Array([217,217,247]),b);if(a<24)return c(new Uint8Array([192+a]),b);{let b=a<=255?24:a<=65535?25:a<=0xffffffff?26:27,c=2**(b-24);return new Uint8Array([192+b].concat(a.toString(16).slice(-(2*c)).padStart(2*c,"0").match(/../g).map(a=>parseInt(a,16)))).buffer}},b.raw=g,b.uSmall=h,b.u8=i,b.u16=j,b.u32=k,b.u64=l,b.iSmall=m,b.i8=n,b.i16=o,b.i32=p,b.i64=q,b.number=function(a){if(a>=0)if(a<24)return h(a);else if(a<=255)return i(a);else if(a<=65535)return j(a);else if(a<=0xffffffff)return k(a);else return l(a);if(a>=-24)return m(a);if(a>=-255)return n(a);if(a>=-65535)return o(a);if(a>=-0xffffffff)return p(a);else return q(a)},b.bytes=function(a){return c(e(2,a.byteLength),a)},b.string=function(a){return f(a)},b.array=function(a){return c(e(4,a.length),...a)},b.map=function(a,b=!1){a instanceof Map||(a=new Map(Object.entries(a)));let d=Array.from(a.entries());return b&&(d=d.sort(([a],[b])=>a.localeCompare(b))),c(e(5,a.size),...d.map(([a,b])=>c(f(a),b)))},b.singleFloat=function(a){let b=new Float32Array([a]);return c(new Uint8Array([250]),new Uint8Array(b.buffer))},b.doubleFloat=function(a){let b=new Float64Array([a]);return c(new Uint8Array([251]),new Uint8Array(b.buffer))},b.bool=function(a){return a?r():s()},b.true_=r,b.false_=s,b.null_=function(){return g(new Uint8Array([246]))},b.undefined_=function(){return g(new Uint8Array([247]))}},15608:(a,b,c)=>{"use strict";c.d(b,{ev:()=>x});var d=c(13923),e=c(90113),f=c(51151),g=c(86900),h=c(64014);let i=BigInt(0),j=BigInt(1),k=BigInt(2),l=BigInt(8);class m{constructor(a){this.ep=a}static fromBytes(a){throw Error("fromBytes must be implemented by subclass")}static fromHex(a){throw Error("fromHex must be implemented by subclass")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(a){return this.ep.toAffine(a)}toRawBytes(){return this.toBytes()}toHex(){return(0,e.My)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(a){return this.assertSame(a),this.init(this.ep.add(a.ep))}subtract(a){return this.assertSame(a),this.init(this.ep.subtract(a.ep))}multiply(a){return this.init(this.ep.multiply(a))}multiplyUnsafe(a){return this.init(this.ep.multiplyUnsafe(a))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(a,b){return this.init(this.ep.precompute(a,b))}}c(69920);let n=BigInt(0),o=BigInt(1),p=BigInt(2);BigInt(3);let q=BigInt(5),r=BigInt(8),s={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:r,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")},t=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function u(a,b){let c=s.p,d=(0,h.zi)(b*b*b,c),e=function(a){let b=BigInt(10),c=BigInt(20),d=BigInt(40),e=BigInt(80),f=s.p,g=a*a%f*a%f,i=(0,h.zH)(g,p,f)*g%f,j=(0,h.zH)(i,o,f)*a%f,k=(0,h.zH)(j,q,f)*j%f,l=(0,h.zH)(k,b,f)*k%f,m=(0,h.zH)(l,c,f)*l%f,n=(0,h.zH)(m,d,f)*m%f,r=(0,h.zH)(n,e,f)*n%f,t=(0,h.zH)(r,e,f)*n%f,u=(0,h.zH)(t,b,f)*k%f;return{pow_p_5_8:(0,h.zH)(u,p,f)*a%f,b2:g}}(a*(0,h.zi)(d*d*b,c)).pow_p_5_8,f=(0,h.zi)(a*d*e,c),g=(0,h.zi)(b*f*f,c),i=f,j=(0,h.zi)(f*t,c),k=g===a,l=g===(0,h.zi)(-a,c),m=g===(0,h.zi)(-a*t,c);return k&&(f=i),(l||m)&&(f=j),(0,h.dQ)(f,c)&&(f=(0,h.zi)(-f,c)),{isValid:k||l,value:f}}let v=(0,h.D0)(s.p,{isLE:!0}),w=(0,h.D0)(s.n,{isLE:!0}),x=function(a){let{CURVE:b,curveOpts:c,hash:d,eddsaOpts:m}=function(a){let b={a:a.a,d:a.d,p:a.Fp.ORDER,n:a.n,h:a.h,Gx:a.Gx,Gy:a.Gy},c={Fp:a.Fp,Fn:(0,h.D0)(b.n,a.nBitLength,!0),uvRatio:a.uvRatio},d={randomBytes:a.randomBytes,adjustScalarBytes:a.adjustScalarBytes,domain:a.domain,prehash:a.prehash,mapToCurve:a.mapToCurve};return{CURVE:b,curveOpts:c,hash:a.hash,eddsaOpts:d}}(a),n=function(a,b,c){if("function"!=typeof b)throw Error('"hash" function param is required');(0,g.DS)(c,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:d}=c,{BASE:f,Fp:h,Fn:k}=a,l=k.ORDER,m=c.randomBytes||e.po,n=c.adjustScalarBytes||(a=>a),o=c.domain||((a,b,c)=>{if((0,g.e8)("phflag",c),b.length||c)throw Error("Contexts/pre-hash are not supported");return a});function p(a){var b;return b=(0,g.lX)(a),k.create(b)}function q(a){let{head:c,prefix:d,scalar:e}=function(a){let c=h.BYTES;a=(0,g.qj)("private key",a,c);let d=(0,g.qj)("hashed private key",b(a),2*c),e=n(d.slice(0,c)),f=d.slice(c,2*c),i=p(e);return{head:e,prefix:f,scalar:i}}(a),i=f.multiply(e),j=i.toBytes();return{head:c,prefix:d,scalar:e,point:i,pointBytes:j}}function r(a){return q(a).pointBytes}function s(a=Uint8Array.of(),...c){return p(b(o((0,e.Id)(...c),(0,g.qj)("context",a),!!d)))}let t={zip215:!0};f.precompute(8);let u=h.BYTES,v={secret:u,public:u,signature:2*u,seed:u};function w(a=m(v.seed)){return a}let x={getExtendedPublicKey:q,randomSecretKey:w,isValidSecretKey:function(a){try{return!!k.fromBytes(a,!1)}catch(a){return!1}},isValidPublicKey:function(b,c){try{return!!a.fromBytes(b,c)}catch(a){return!1}},randomPrivateKey:w,toMontgomery(b){let{y:c}=a.fromBytes(b),d=32===u;if(!d&&57!==u)throw Error("only defined for 25519 and 448");let e=d?h.div(j+c,j-c):h.div(c-j,c+j);return h.toBytes(e)},toMontgomeryPriv:a=>((0,e.DO)(a,u),n(b(a.subarray(0,u))).subarray(0,u)),precompute:(b=8,c=a.BASE)=>c.precompute(b,!1)};return Object.freeze({keygen:function(a){let b=x.randomSecretKey(a);return{secretKey:b,publicKey:r(b)}},getPublicKey:r,sign:function(a,b,c={}){var j;a=(0,g.qj)("message",a),d&&(a=d(a));let{prefix:m,scalar:n,pointBytes:o}=q(b),p=s(c.context,m,a),r=f.multiply(p).toBytes(),t=(j=p+s(c.context,r,o,a)*n,k.create(j));(0,g.aK)("signature.s",t,i,l);let u=h.BYTES,v=(0,e.Id)(r,(0,g.z)(t,u));return(0,g.qj)("result",v,2*u)},verify:function(b,c,e,i=t){let j,k,l,{context:m,zip215:n}=i,o=h.BYTES;b=(0,g.qj)("signature",b,2*o),c=(0,g.qj)("message",c),e=(0,g.qj)("publicKey",e,o),void 0!==n&&(0,g.e8)("zip215",n),d&&(c=d(c));let p=(0,g.lX)(b.slice(o,2*o));try{j=a.fromHex(e,n),k=a.fromHex(b.slice(0,o),n),l=f.multiplyUnsafe(p)}catch(a){return!1}if(!n&&j.isSmallOrder())return!1;let q=s(m,k.toBytes(),j.toBytes(),c);return k.add(j.multiplyUnsafe(q)).subtract(l).clearCofactor().is0()},utils:x,Point:a,info:{type:"edwards",lengths:v}})}(function(a,b={}){let{Fp:c,Fn:d}=(0,f.UT)("edwards",a,b),{h:h,n:m}=a;(0,g.DS)(b,{},{uvRatio:"function"});let n=k<<BigInt(8*d.BYTES)-j,o=a=>c.create(a),p=b.uvRatio||((a,b)=>{try{return{isValid:!0,value:c.sqrt(c.div(a,b))}}catch(a){return{isValid:!1,value:i}}});if(!function(a,b,c,d){let e=a.sqr(c),f=a.sqr(d),g=a.add(a.mul(b.a,e),f),h=a.add(a.ONE,a.mul(b.d,a.mul(e,f)));return a.eql(g,h)}(c,a,a.Gx,a.Gy))throw Error("bad curve params: generator point");function q(a,b,c=!1){let d=c?j:i;return(0,g.aK)("coordinate "+a,b,d,n),b}function r(a){if(!(a instanceof u))throw Error("ExtendedPoint expected")}let s=(0,g.x)((a,b)=>{let{X:d,Y:e,Z:f}=a,g=a.is0();null==b&&(b=g?l:c.inv(f));let h=o(d*b),k=o(e*b),m=c.mul(f,b);if(g)return{x:i,y:j};if(m!==j)throw Error("invZ was invalid");return{x:h,y:k}}),t=(0,g.x)(b=>{let{a:c,d}=a;if(b.is0())throw Error("bad point: ZERO");let{X:e,Y:f,Z:g,T:h}=b,i=o(e*e),j=o(f*f),k=o(g*g),l=o(k*k),m=o(i*c);if(o(k*o(m+j))!==o(l+o(d*o(i*j))))throw Error("bad point: equation left != right (1)");if(o(e*f)!==o(g*h))throw Error("bad point: equation left != right (2)");return!0});class u{constructor(a,b,c,d){this.X=q("x",a),this.Y=q("y",b),this.Z=q("z",c,!0),this.T=q("t",d),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(a){return(0,f.Ak)(u,a)}static msm(a,b){return(0,f.Xf)(u,d,a,b)}_setWindowSize(a){this.precompute(a)}static fromAffine(a){if(a instanceof u)throw Error("extended point not allowed");let{x:b,y:c}=a||{};return q("x",b),q("y",c),new u(b,c,j,o(b*c))}precompute(a=8,b=!0){return v.createCache(this,a),b||this.multiply(k),this}assertValidity(){t(this)}equals(a){r(a);let{X:b,Y:c,Z:d}=this,{X:e,Y:f,Z:g}=a,h=o(b*g),i=o(e*d),j=o(c*g),k=o(f*d);return h===i&&j===k}is0(){return this.equals(u.ZERO)}negate(){return new u(o(-this.X),this.Y,this.Z,o(-this.T))}double(){let{a:b}=a,{X:c,Y:d,Z:e}=this,f=o(c*c),g=o(d*d),h=o(k*o(e*e)),i=o(b*f),j=c+d,l=o(o(j*j)-f-g),m=i+g,n=m-h,p=i-g,q=o(l*n),r=o(m*p),s=o(l*p);return new u(q,r,o(n*m),s)}add(b){r(b);let{a:c,d}=a,{X:e,Y:f,Z:g,T:h}=this,{X:i,Y:j,Z:k,T:l}=b,m=o(e*i),n=o(f*j),p=o(h*d*l),q=o(g*k),s=o((e+f)*(i+j)-m-n),t=q-p,v=q+p,w=o(n-c*m),x=o(s*t),y=o(v*w),z=o(s*w);return new u(x,y,o(t*v),z)}subtract(a){return this.add(a.negate())}multiply(a){(0,g.aK)("scalar",a,j,m);let{p:b,f:c}=v.cached(this,a,a=>(0,f.Ak)(u,a));return(0,f.Ak)(u,[b,c])[0]}multiplyUnsafe(a,b=u.ZERO){return((0,g.aK)("scalar",a,i,m),a===i)?u.ZERO:this.is0()||a===j?this:v.unsafe(this,a,a=>(0,f.Ak)(u,a),b)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return v.unsafe(this,m).is0()}toAffine(a){return s(this,a)}clearCofactor(){return h===j?this:this.multiplyUnsafe(h)}static fromBytes(a,b=!1){return(0,e.DO)(a),u.fromHex(a,b)}static fromHex(b,d=!1){let{d:e,a:f}=a,h=c.BYTES;b=(0,g.qj)("pointHex",b,h),(0,g.e8)("zip215",d);let k=b.slice(),l=b[h-1];k[h-1]=-129&l;let m=(0,g.lX)(k),q=d?n:c.ORDER;(0,g.aK)("pointHex.y",m,i,q);let r=o(m*m),{isValid:s,value:t}=p(o(r-j),o(e*r-f));if(!s)throw Error("Point.fromHex: invalid y coordinate");let v=(t&j)===j,w=(128&l)!=0;if(!d&&t===i&&w)throw Error("Point.fromHex: x=0 and x_0=1");return w!==v&&(t=o(-t)),u.fromAffine({x:t,y:m})}toBytes(){let{x:a,y:b}=this.toAffine(),d=(0,g.z)(b,c.BYTES);return d[d.length-1]|=a&j?128:0,d}toRawBytes(){return this.toBytes()}toHex(){return(0,e.My)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}u.BASE=new u(a.Gx,a.Gy,j,o(a.Gx*a.Gy)),u.ZERO=new u(i,j,j,i),u.Fp=c,u.Fn=d;let v=new f.hT(u,8*d.BYTES);return u}(b,c),d,m);return Object.assign({},n,{ExtendedPoint:n.Point,CURVE:a})}({...s,Fp:v,hash:d.Zf,adjustScalarBytes:function(a){return a[0]&=248,a[31]&=127,a[31]|=64,a},uvRatio:u}),y=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),z=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),A=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),B=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),C=a=>u(o,a),D=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),E=a=>x.CURVE.Fp.create((0,g.lX)(a)&D);function F(a){let{d:b}=x.CURVE,c=x.CURVE.Fp.ORDER,d=x.CURVE.Fp.create,e=d(t*a*a),f=d((e+o)*A),g=BigInt(-1),i=d((g-b*e)*d(e+b)),{isValid:j,value:k}=u(f,i),l=d(k*a);(0,h.dQ)(l,c)||(l=d(-l)),j||(k=l),j||(g=e);let m=d(g*(e-o)*B-i),n=k*k,p=d((k+k)*i),q=d(m*y),r=d(o-n),s=d(o+n);return new x.Point(d(p*s),d(r*q),d(q*s),d(p*r))}class G extends m{constructor(a){super(a)}static fromAffine(a){return new G(x.Point.fromAffine(a))}assertSame(a){if(!(a instanceof G))throw Error("RistrettoPoint expected")}init(a){return new G(a)}static hashToCurve(a){var b=(0,g.qj)("ristrettoHash",a,64);(0,e.DO)(b,64);let c=F(E(b.subarray(0,32))),d=F(E(b.subarray(32,64)));return new G(c.add(d))}static fromBytes(a){(0,e.DO)(a,32);let{a:b,d:c}=x.CURVE,d=v.ORDER,f=v.create,i=E(a);if(!(0,g.ex)((0,g.z)(i,32),a)||(0,h.dQ)(i,d))throw Error("invalid ristretto255 encoding 1");let j=f(i*i),k=f(o+b*j),l=f(o-b*j),m=f(k*k),p=f(l*l),q=f(b*c*m-p),{isValid:r,value:s}=C(f(q*p)),t=f(s*l),u=f(s*t*q),w=f((i+i)*t);(0,h.dQ)(w,d)&&(w=f(-w));let y=f(k*u),z=f(w*y);if(!r||(0,h.dQ)(z,d)||y===n)throw Error("invalid ristretto255 encoding 2");return new G(new x.Point(w,y,o,z))}static fromHex(a){return G.fromBytes((0,g.qj)("ristrettoHex",a,32))}static msm(a,b){return(0,f.Xf)(G,x.Point.Fn,a,b)}toBytes(){let a,{X:b,Y:c,Z:d,T:e}=this.ep,f=v.ORDER,i=v.create,j=i(i(d+c)*i(d-c)),k=i(b*c),l=i(k*k),{value:m}=C(i(j*l)),n=i(m*j),o=i(m*k),p=i(n*o*e);if((0,h.dQ)(e*p,f)){let d=i(c*t),e=i(b*t);b=d,c=e,a=i(n*z)}else a=o;(0,h.dQ)(b*p,f)&&(c=i(-c));let q=i((d-c)*a);return(0,h.dQ)(q,f)&&(q=i(-q)),(0,g.z)(q,32)}equals(a){this.assertSame(a);let{X:b,Y:c}=this.ep,{X:d,Y:e}=a.ep,f=v.create,g=f(b*e)===f(c*d),h=f(c*e)===f(b*d);return g||h}is0(){return this.equals(G.ZERO)}}G.BASE=new G(x.Point.BASE),G.ZERO=new G(x.Point.ZERO),G.Fp=v,G.Fn=w},16355:(a,b,c)=>{"use strict";b.Diagnose=c(26671),b.Decoder=c(47991),b.Encoder=c(54639),b.Simple=c(53545),b.Tagged=c(24787),b.decodeAll=b.Decoder.decodeAll,b.decodeFirst=b.Decoder.decodeFirst,b.diagnose=b.Diagnose.diagnose,b.encode=b.Encoder.encode,b.decode=b.Decoder.decode,b.leveldb={decode:b.Decoder.decodeAll,encode:b.Encoder.encode,buffer:!0,name:"cbor"}},17243:(a,b,c)=>{"use strict";c.d(b,{Ih:()=>d,Ki:()=>g,em:()=>i,Ui:()=>o,kk:()=>n});var d={};c.r(d),c.d(d,{Bool:()=>aa,BoolClass:()=>D,ConstructType:()=>A,Empty:()=>Z,EmptyClass:()=>B,FixedIntClass:()=>K,FixedNatClass:()=>L,Float32:()=>af,Float64:()=>ag,FloatClass:()=>J,Func:()=>aw,FuncClass:()=>U,Int:()=>ad,Int16:()=>ai,Int32:()=>aj,Int64:()=>ak,Int8:()=>ah,IntClass:()=>H,Nat:()=>ae,Nat16:()=>am,Nat32:()=>an,Nat64:()=>ao,Nat8:()=>al,NatClass:()=>I,Null:()=>ab,NullClass:()=>E,Opt:()=>as,OptClass:()=>N,PrimitiveType:()=>z,Principal:()=>ap,PrincipalClass:()=>T,Rec:()=>av,RecClass:()=>R,Record:()=>at,RecordClass:()=>O,Reserved:()=>$,ReservedClass:()=>F,Service:()=>ax,ServiceClass:()=>V,Text:()=>ac,TextClass:()=>G,Tuple:()=>aq,TupleClass:()=>P,Type:()=>y,Unknown:()=>_,UnknownClass:()=>C,Variant:()=>au,VariantClass:()=>Q,Vec:()=>ar,VecClass:()=>M,Visitor:()=>x,decode:()=>Y,encode:()=>X});var e=c(65689);function f(...a){let b=new Uint8Array(a.reduce((a,b)=>a+b.byteLength,0)),c=0;for(let d of a)b.set(new Uint8Array(d),c),c+=d.byteLength;return b}class g{constructor(a,b=(null==a?void 0:a.byteLength)||0){this._buffer=i(a||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,b)}save(){return this._view}restore(a){this._view=a}get buffer(){return i(this._view.slice())}get byteLength(){return this._view.byteLength}read(a){let b=this._view.subarray(0,a);return this._view=this._view.subarray(a),b.slice().buffer}readUint8(){let a=this._view[0];return this._view=this._view.subarray(1),a}write(a){let b=new Uint8Array(a),c=this._view.byteLength;this._view.byteOffset+this._view.byteLength+b.byteLength>=this._buffer.byteLength?this.alloc(b.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+b.byteLength),this._view.set(b,c)}get end(){return 0===this._view.byteLength}alloc(a){let b=new ArrayBuffer((this._buffer.byteLength+a)*1.2|0),c=new Uint8Array(b,0,this._view.byteLength+a);c.set(this._view),this._buffer=b,this._view=c}}function h(a){return new DataView(a.buffer,a.byteOffset,a.byteLength).buffer}function i(a){return a instanceof Uint8Array?h(a):a instanceof ArrayBuffer?a:Array.isArray(a)?h(new Uint8Array(a)):"buffer"in a?i(a.buffer):h(new Uint8Array(a))}function j(a){if(/^_\d+_$/.test(a)||/^_0x[0-9a-fA-F]+_$/.test(a)){let b=+a.slice(1,-1);if(Number.isSafeInteger(b)&&b>=0&&b<0x100000000)return b}let b=new TextEncoder().encode(a),c=0;for(let a of b)c=(223*c+a)%0x100000000;return c}function k(){throw Error("unexpected end of buffer")}function l(a,b){return a.byteLength<b&&k(),a.read(b)}function m(a){let b=a.readUint8();return void 0===b&&k(),b}function n(a){if("number"==typeof a&&(a=BigInt(a)),a<BigInt(0))throw Error("Cannot leb encode negative values.");let b=new g(new ArrayBuffer((a===BigInt(0)?0:Math.ceil(Math.log2(Number(a))))+1),0);for(;;){let c=Number(a&BigInt(127));if((a/=BigInt(128))===BigInt(0)){b.write(new Uint8Array([c]));break}b.write(new Uint8Array([128|c]))}return b.buffer}function o(a){let b,c=BigInt(1),d=BigInt(0);do d+=BigInt(127&(b=m(a))).valueOf()*c,c*=BigInt(128);while(b>=128);return d}function p(a){"number"==typeof a&&(a=BigInt(a));let b=a<BigInt(0);b&&(a=-a-BigInt(1));let c=new g(new ArrayBuffer((a===BigInt(0)?0:Math.ceil(Math.log2(Number(a))))+1),0);for(;;){let d=function(a){let c=a%BigInt(128);return b?Number(BigInt(128)-c-BigInt(1)):Number(c)}(a);if(a/=BigInt(128),b&&a===BigInt(0)&&(64&d)!=0||!b&&a===BigInt(0)&&(64&d)==0){c.write(new Uint8Array([d]));break}c.write(new Uint8Array([128|d]))}return c.buffer}function q(a){let b=new Uint8Array(a.buffer),c=0;for(;c<b.byteLength;c++)if(b[c]<128){if((64&b[c])==0)return o(a);break}let d=new Uint8Array(l(a,c+1)),e=BigInt(0);for(let a=d.byteLength-1;a>=0;a--)e=e*BigInt(128)+BigInt(128-(127&d[a])-1);return-e-BigInt(1)}function r(a,b){a=BigInt(a);let c=new g(new ArrayBuffer(Math.min(1,b)),0),d=0,e=BigInt(256),f=BigInt(0),h=Number(a%e);for(c.write(new Uint8Array([h]));++d<b;)a<0&&f===BigInt(0)&&0!==h&&(f=BigInt(1)),h=Number((a/e-f)%BigInt(256)),c.write(new Uint8Array([h])),e*=BigInt(256);return c.buffer}function s(a,b){let c=BigInt(m(a)),d=BigInt(1),e=0;for(;++e<b;)d*=BigInt(256),c+=d*BigInt(m(a));return c}function t(a){let b=BigInt(a);if(a<0)throw RangeError("Input must be non-negative");return BigInt(1)<<b}let u="DIDL";function v(a,b,c){return a.map((a,d)=>c(a,b[d]))}class w{constructor(){this._typs=[],this._idx=new Map}has(a){return this._idx.has(a.name)}add(a,b){let c=this._typs.length;this._idx.set(a.name,c),this._typs.push(b)}merge(a,b){let c=this._idx.get(a.name),d=this._idx.get(b);if(void 0===c)throw Error("Missing type index for "+a);if(void 0===d)throw Error("Missing type index for "+b);this._typs[c]=this._typs[d],this._typs.splice(d,1),this._idx.delete(b)}encode(){let a=n(this._typs.length),b=f(...this._typs);return f(a,b)}indexOf(a){if(!this._idx.has(a))throw Error("Missing type index for "+a);return p(this._idx.get(a)||0)}}class x{visitType(a,b){throw Error("Not implemented")}visitPrimitive(a,b){return this.visitType(a,b)}visitEmpty(a,b){return this.visitPrimitive(a,b)}visitBool(a,b){return this.visitPrimitive(a,b)}visitNull(a,b){return this.visitPrimitive(a,b)}visitReserved(a,b){return this.visitPrimitive(a,b)}visitText(a,b){return this.visitPrimitive(a,b)}visitNumber(a,b){return this.visitPrimitive(a,b)}visitInt(a,b){return this.visitNumber(a,b)}visitNat(a,b){return this.visitNumber(a,b)}visitFloat(a,b){return this.visitPrimitive(a,b)}visitFixedInt(a,b){return this.visitNumber(a,b)}visitFixedNat(a,b){return this.visitNumber(a,b)}visitPrincipal(a,b){return this.visitPrimitive(a,b)}visitConstruct(a,b){return this.visitType(a,b)}visitVec(a,b,c){return this.visitConstruct(a,c)}visitOpt(a,b,c){return this.visitConstruct(a,c)}visitRecord(a,b,c){return this.visitConstruct(a,c)}visitTuple(a,b,c){let d=b.map((a,b)=>[`_${b}_`,a]);return this.visitRecord(a,d,c)}visitVariant(a,b,c){return this.visitConstruct(a,c)}visitRec(a,b,c){return this.visitConstruct(b,c)}visitFunc(a,b){return this.visitConstruct(a,b)}visitService(a,b){return this.visitConstruct(a,b)}}class y{display(){return this.name}valueToString(a){return W(a)}buildTypeTable(a){a.has(this)||this._buildTypeTableImpl(a)}}class z extends y{checkType(a){if(this.name!==a.name)throw Error(`type mismatch: type on the wire ${a.name}, expect type ${this.name}`);return a}_buildTypeTableImpl(a){}}class A extends y{checkType(a){if(a instanceof R){let b=a.getType();if(void 0===b)throw Error("type mismatch with uninitialized type");return b}throw Error(`type mismatch: type on the wire ${a.name}, expect type ${this.name}`)}encodeType(a){return a.indexOf(this.name)}}class B extends z{accept(a,b){return a.visitEmpty(this,b)}covariant(a){throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(){throw Error("Empty cannot appear as a function argument")}valueToString(){throw Error("Empty cannot appear as a value")}encodeType(){return p(-17)}decodeValue(){throw Error("Empty cannot appear as an output")}get name(){return"empty"}}class C extends y{checkType(a){throw Error("Method not implemented for unknown.")}accept(a,b){throw a.visitType(this,b)}covariant(a){throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(){throw Error("Unknown cannot appear as a function argument")}valueToString(){throw Error("Unknown cannot appear as a value")}encodeType(){throw Error("Unknown cannot be serialized")}decodeValue(a,b){let c=b.decodeValue(a,b);return Object(c)!==c&&(c=Object(c)),Object.defineProperty(c,"type",{value:b instanceof R?()=>b.getType():()=>b,writable:!0,enumerable:!1,configurable:!0}),c}_buildTypeTableImpl(){throw Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class D extends z{accept(a,b){return a.visitBool(this,b)}covariant(a){if("boolean"==typeof a)return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){return new Uint8Array([+!!a])}encodeType(){return p(-2)}decodeValue(a,b){switch(this.checkType(b),m(a)){case 0:return!1;case 1:return!0;default:throw Error("Boolean value out of range")}}get name(){return"bool"}}class E extends z{accept(a,b){return a.visitNull(this,b)}covariant(a){if(null===a)return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return p(-1)}decodeValue(a,b){return this.checkType(b),null}get name(){return"null"}}class F extends z{accept(a,b){return a.visitReserved(this,b)}covariant(a){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return p(-16)}decodeValue(a,b){return b.name!==this.name&&b.decodeValue(a,b),null}get name(){return"reserved"}}class G extends z{accept(a,b){return a.visitText(this,b)}covariant(a){if("string"==typeof a)return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){let b=new TextEncoder().encode(a);return f(n(b.byteLength),b)}encodeType(){return p(-15)}decodeValue(a,b){this.checkType(b);let c=o(a),d=l(a,Number(c));return new TextDecoder("utf8",{fatal:!0}).decode(d)}get name(){return"text"}valueToString(a){return'"'+a+'"'}}class H extends z{accept(a,b){return a.visitInt(this,b)}covariant(a){if("bigint"==typeof a||Number.isInteger(a))return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){return p(a)}encodeType(){return p(-4)}decodeValue(a,b){return this.checkType(b),q(a)}get name(){return"int"}valueToString(a){return a.toString()}}class I extends z{accept(a,b){return a.visitNat(this,b)}covariant(a){if("bigint"==typeof a&&a>=BigInt(0)||Number.isInteger(a)&&a>=0)return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){return n(a)}encodeType(){return p(-3)}decodeValue(a,b){return this.checkType(b),o(a)}get name(){return"nat"}valueToString(a){return a.toString()}}class J extends z{constructor(a){if(super(),this._bits=a,32!==a&&64!==a)throw Error("not a valid float type")}accept(a,b){return a.visitFloat(this,b)}covariant(a){if("number"==typeof a||a instanceof Number)return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){let b=new ArrayBuffer(this._bits/8),c=new DataView(b);return 32===this._bits?c.setFloat32(0,a,!0):c.setFloat64(0,a,!0),b}encodeType(){return p(32===this._bits?-13:-14)}decodeValue(a,b){this.checkType(b);let c=new DataView(l(a,this._bits/8));return 32===this._bits?c.getFloat32(0,!0):c.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(a){return a.toString()}}class K extends z{constructor(a){super(),this._bits=a}accept(a,b){return a.visitFixedInt(this,b)}covariant(a){let b=t(this._bits-1)*BigInt(-1),c=t(this._bits-1)-BigInt(1),d=!1;if("bigint"==typeof a)d=a>=b&&a<=c;else if(Number.isInteger(a)){let e=BigInt(a);d=e>=b&&e<=c}else d=!1;if(d)return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){return r(a,this._bits/8)}encodeType(){return p(-9-(Math.log2(this._bits)-3))}decodeValue(a,b){this.checkType(b);let c=function(a,b){let c=s(a,b),d=BigInt(2)**(BigInt(8)*BigInt(b-1)+BigInt(7));return c>=d&&(c-=d*BigInt(2)),c}(a,this._bits/8);return this._bits<=32?Number(c):c}get name(){return`int${this._bits}`}valueToString(a){return a.toString()}}class L extends z{constructor(a){super(),this._bits=a}accept(a,b){return a.visitFixedNat(this,b)}covariant(a){let b=t(this._bits);if("bigint"==typeof a&&a>=BigInt(0)?a<b:!!Number.isInteger(a)&&a>=0&&BigInt(a)<b)return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){var b=this._bits/8;if(BigInt(a)<BigInt(0))throw Error("Cannot write negative values.");return r(a,b)}encodeType(){return p(-5-(Math.log2(this._bits)-3))}decodeValue(a,b){this.checkType(b);let c=s(a,this._bits/8);return this._bits<=32?Number(c):c}get name(){return`nat${this._bits}`}valueToString(a){return a.toString()}}class M extends A{constructor(a){super(),this._type=a,this._blobOptimization=!1,a instanceof L&&8===a._bits&&(this._blobOptimization=!0)}accept(a,b){return a.visitVec(this,this._type,b)}covariant(a){let b=this._type instanceof L||this._type instanceof K?this._type._bits:0;if(ArrayBuffer.isView(a)&&b==8*a.BYTES_PER_ELEMENT||Array.isArray(a)&&a.every((a,b)=>{try{return this._type.covariant(a)}catch(a){throw Error(`Invalid ${this.display()} argument: 

index ${b} -> ${a.message}`)}}))return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){let b=n(a.length);if(this._blobOptimization)return f(b,new Uint8Array(a));if(ArrayBuffer.isView(a))return f(b,new Uint8Array(a.buffer));let c=new g(new ArrayBuffer(b.byteLength+a.length),0);for(let d of(c.write(b),a)){let a=this._type.encodeValue(d);c.write(new Uint8Array(a))}return c.buffer}_buildTypeTableImpl(a){this._type.buildTypeTable(a);let b=p(-19),c=this._type.encodeType(a);a.add(this,f(b,c))}decodeValue(a,b){let c=this.checkType(b);if(!(c instanceof M))throw Error("Not a vector type");let d=Number(o(a));if(this._type instanceof L){if(8==this._type._bits)return new Uint8Array(a.read(d));if(16==this._type._bits)return new Uint16Array(a.read(2*d));if(32==this._type._bits)return new Uint32Array(a.read(4*d));if(64==this._type._bits)return new BigUint64Array(a.read(8*d))}if(this._type instanceof K){if(8==this._type._bits)return new Int8Array(a.read(d));if(16==this._type._bits)return new Int16Array(a.read(2*d));if(32==this._type._bits)return new Int32Array(a.read(4*d));if(64==this._type._bits)return new BigInt64Array(a.read(8*d))}let e=[];for(let b=0;b<d;b++)e.push(this._type.decodeValue(a,c._type));return e}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(a){return"vec {"+a.map(a=>this._type.valueToString(a)).join("; ")+"}"}}class N extends A{constructor(a){super(),this._type=a}accept(a,b){return a.visitOpt(this,this._type,b)}covariant(a){try{if(Array.isArray(a)&&(0===a.length||1===a.length&&this._type.covariant(a[0])))return!0}catch(b){throw Error(`Invalid ${this.display()} argument: ${W(a)} 

-> ${b.message}`)}throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){return 0===a.length?new Uint8Array([0]):f(new Uint8Array([1]),this._type.encodeValue(a[0]))}_buildTypeTableImpl(a){this._type.buildTypeTable(a);let b=p(-18),c=this._type.encodeType(a);a.add(this,f(b,c))}decodeValue(a,b){if(b instanceof E||b instanceof F)return[];let c=b;if(b instanceof R){let a=b.getType();if(void 0===a)throw Error("type mismatch with uninitialized type");c=a}if(c instanceof N)switch(m(a)){case 0:return[];case 1:{let b=a.save();try{return[this._type.decodeValue(a,c._type)]}catch(d){return a.restore(b),c._type.decodeValue(a,c._type),[]}}default:throw Error("Not an option value")}if(this._type instanceof E||this._type instanceof N||this._type instanceof F)return c.decodeValue(a,c),[];{let d=a.save();try{return[this._type.decodeValue(a,b)]}catch(e){return a.restore(d),c.decodeValue(a,b),[]}}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(a){return 0===a.length?"null":`opt ${this._type.valueToString(a[0])}`}}class O extends A{constructor(a={}){super(),this._fields=Object.entries(a).sort((a,b)=>j(a[0])-j(b[0]))}accept(a,b){return a.visitRecord(this,this._fields,b)}tryAsTuple(){let a=[];for(let b=0;b<this._fields.length;b++){let[c,d]=this._fields[b];if(c!==`_${b}_`)return null;a.push(d)}return a}covariant(a){if("object"==typeof a&&this._fields.every(([b,c])=>{if(!a.hasOwnProperty(b))throw Error(`Record is missing key "${b}".`);try{return c.covariant(a[b])}catch(a){throw Error(`Invalid ${this.display()} argument: 

field ${b} -> ${a.message}`)}}))return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){let b=this._fields.map(([b])=>a[b]);return f(...v(this._fields,b,([,a],b)=>a.encodeValue(b)))}_buildTypeTableImpl(a){this._fields.forEach(([b,c])=>c.buildTypeTable(a));let b=p(-20),c=n(this._fields.length),d=this._fields.map(([b,c])=>f(n(j(b)),c.encodeType(a)));a.add(this,f(b,c,f(...d)))}decodeValue(a,b){let c=this.checkType(b);if(!(c instanceof O))throw Error("Not a record type");let d={},e=0,f=0;for(;f<c._fields.length;){let[b,g]=c._fields[f];if(e>=this._fields.length){g.decodeValue(a,g),f++;continue}let[h,i]=this._fields[e],k=j(this._fields[e][0]),l=j(b);if(k===l)d[h]=i.decodeValue(a,g),e++,f++;else if(l>k)if(i instanceof N||i instanceof F)d[h]=[],e++;else throw Error("Cannot find required field "+h);else g.decodeValue(a,g),f++}for(let[a,b]of this._fields.slice(e))if(b instanceof N||b instanceof F)d[a]=[];else throw Error("Cannot find required field "+a);return d}get name(){let a=this._fields.map(([a,b])=>a+":"+b.name);return`record {${a.join("; ")}}`}display(){let a=this._fields.map(([a,b])=>a+":"+b.display());return`record {${a.join("; ")}}`}valueToString(a){let b=this._fields.map(([b])=>a[b]),c=v(this._fields,b,([a,b],c)=>a+"="+b.valueToString(c));return`record {${c.join("; ")}}`}}class P extends O{constructor(a){let b={};a.forEach((a,c)=>b["_"+c+"_"]=a),super(b),this._components=a}accept(a,b){return a.visitTuple(this,this._components,b)}covariant(a){if(Array.isArray(a)&&a.length>=this._fields.length&&this._components.every((b,c)=>{try{return b.covariant(a[c])}catch(a){throw Error(`Invalid ${this.display()} argument: 

index ${c} -> ${a.message}`)}}))return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){return f(...v(this._components,a,(a,b)=>a.encodeValue(b)))}decodeValue(a,b){let c=this.checkType(b);if(!(c instanceof P))throw Error("not a tuple type");if(c._components.length<this._components.length)throw Error("tuple mismatch");let d=[];for(let[b,e]of c._components.entries())b>=this._components.length?e.decodeValue(a,e):d.push(this._components[b].decodeValue(a,e));return d}display(){let a=this._components.map(a=>a.display());return`record {${a.join("; ")}}`}valueToString(a){let b=v(this._components,a,(a,b)=>a.valueToString(b));return`record {${b.join("; ")}}`}}class Q extends A{constructor(a={}){super(),this._fields=Object.entries(a).sort((a,b)=>j(a[0])-j(b[0]))}accept(a,b){return a.visitVariant(this,this._fields,b)}covariant(a){if("object"==typeof a&&1===Object.entries(a).length&&this._fields.every(([b,c])=>{try{return!a.hasOwnProperty(b)||c.covariant(a[b])}catch(a){throw Error(`Invalid ${this.display()} argument: 

variant ${b} -> ${a.message}`)}}))return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){for(let b=0;b<this._fields.length;b++){let[c,d]=this._fields[b];if(a.hasOwnProperty(c))return f(n(b),d.encodeValue(a[c]))}throw Error("Variant has no data: "+a)}_buildTypeTableImpl(a){this._fields.forEach(([,b])=>{b.buildTypeTable(a)});let b=p(-21),c=n(this._fields.length),d=this._fields.map(([b,c])=>f(n(j(b)),c.encodeType(a)));a.add(this,f(b,c,...d))}decodeValue(a,b){let c=this.checkType(b);if(!(c instanceof Q))throw Error("Not a variant type");let d=Number(o(a));if(d>=c._fields.length)throw Error("Invalid variant index: "+d);let[e,f]=c._fields[d];for(let[b,c]of this._fields)if(j(e)===j(b))return{[b]:c.decodeValue(a,f)};throw Error("Cannot find field hash "+e)}get name(){let a=this._fields.map(([a,b])=>a+":"+b.name);return`variant {${a.join("; ")}}`}display(){let a=this._fields.map(([a,b])=>a+("null"===b.name?"":`:${b.display()}`));return`variant {${a.join("; ")}}`}valueToString(a){for(let[b,c]of this._fields)if(a.hasOwnProperty(b)){let d=c.valueToString(a[b]);if("null"===d)return`variant {${b}}`;return`variant {${b}=${d}}`}throw Error("Variant has no data: "+a)}}class R extends A{constructor(){super(...arguments),this._id=R._counter++,this._type=void 0}accept(a,b){if(!this._type)throw Error("Recursive type uninitialized.");return a.visitRec(this,this._type,b)}fill(a){this._type=a}getType(){return this._type}covariant(a){if(this._type&&this._type.covariant(a))return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(a)}_buildTypeTableImpl(a){if(!this._type)throw Error("Recursive type uninitialized.");a.add(this,new Uint8Array([])),this._type.buildTypeTable(a),a.merge(this,this._type.name)}decodeValue(a,b){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(a,b)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(a){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(a)}}function S(a){if(1!==m(a))throw Error("Cannot decode principal");let b=Number(o(a));return e.p.fromUint8Array(new Uint8Array(l(a,b)))}R._counter=0;class T extends z{accept(a,b){return a.visitPrincipal(this,b)}covariant(a){if(a&&a._isPrincipal)return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){let b=a.toUint8Array(),c=n(b.byteLength);return f(new Uint8Array([1]),c,b)}encodeType(){return p(-24)}decodeValue(a,b){return this.checkType(b),S(a)}get name(){return"principal"}valueToString(a){return`${this.name} "${a.toText()}"`}}class U extends A{constructor(a,b,c=[]){super(),this.argTypes=a,this.retTypes=b,this.annotations=c}static argsToString(a,b){if(a.length!==b.length)throw Error("arity mismatch");return"("+a.map((a,c)=>a.valueToString(b[c])).join(", ")+")"}accept(a,b){return a.visitFunc(this,b)}covariant(a){if(Array.isArray(a)&&2===a.length&&a[0]&&a[0]._isPrincipal&&"string"==typeof a[1])return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue([a,b]){let c=a.toUint8Array(),d=n(c.byteLength),e=f(new Uint8Array([1]),d,c),g=new TextEncoder().encode(b),h=n(g.byteLength);return f(new Uint8Array([1]),e,h,g)}_buildTypeTableImpl(a){this.argTypes.forEach(b=>b.buildTypeTable(a)),this.retTypes.forEach(b=>b.buildTypeTable(a));let b=p(-22),c=n(this.argTypes.length),d=f(...this.argTypes.map(b=>b.encodeType(a))),e=n(this.retTypes.length),g=f(...this.retTypes.map(b=>b.encodeType(a))),h=n(this.annotations.length),i=f(...this.annotations.map(a=>this.encodeAnnotation(a)));a.add(this,f(b,c,d,e,g,h,i))}decodeValue(a){if(1!==m(a))throw Error("Cannot decode function reference");let b=S(a),c=Number(o(a)),d=l(a,c);return[b,new TextDecoder("utf8",{fatal:!0}).decode(d)]}get name(){let a=this.argTypes.map(a=>a.name).join(", "),b=this.retTypes.map(a=>a.name).join(", "),c=" "+this.annotations.join(" ");return`(${a}) -> (${b})${c}`}valueToString([a,b]){return`func "${a.toText()}".${b}`}display(){let a=this.argTypes.map(a=>a.display()).join(", "),b=this.retTypes.map(a=>a.display()).join(", "),c=" "+this.annotations.join(" ");return`(${a}) → (${b})${c}`}encodeAnnotation(a){if("query"===a)return new Uint8Array([1]);if("oneway"===a)return new Uint8Array([2]);if("composite_query"===a)return new Uint8Array([3]);throw Error("Illegal function annotation")}}class V extends A{constructor(a){super(),this._fields=Object.entries(a).sort((a,b)=>a[0]<b[0]?-1:+(a[0]>b[0]))}accept(a,b){return a.visitService(this,b)}covariant(a){if(a&&a._isPrincipal)return!0;throw Error(`Invalid ${this.display()} argument: ${W(a)}`)}encodeValue(a){let b=a.toUint8Array(),c=n(b.length);return f(new Uint8Array([1]),c,b)}_buildTypeTableImpl(a){this._fields.forEach(([b,c])=>c.buildTypeTable(a));let b=p(-23),c=n(this._fields.length),d=this._fields.map(([b,c])=>{let d=new TextEncoder().encode(b);return f(n(d.length),d,c.encodeType(a))});a.add(this,f(b,c,...d))}decodeValue(a){return S(a)}get name(){let a=this._fields.map(([a,b])=>a+":"+b.name);return`service {${a.join("; ")}}`}valueToString(a){return`service "${a.toText()}"`}}function W(a){let b=JSON.stringify(a,(a,b)=>"bigint"==typeof b?`BigInt(${b})`:b);return b&&b.length>400?b.substring(0,397)+"...":b}function X(a,b){if(b.length<a.length)throw Error("Wrong number of message arguments");let c=new w;a.forEach(a=>a.buildTypeTable(c));let d=new TextEncoder().encode(u),e=c.encode(),g=n(b.length),h=f(...a.map(a=>a.encodeType(c))),i=f(...v(a,b,(a,b)=>{try{a.covariant(b)}catch(a){throw Error(a.message+"\n\n")}return a.encodeValue(b)}));return f(d,e,g,h,i)}function Y(a,b){let c=new g(b);if(b.byteLength<u.length)throw Error("Message length smaller than magic number");let d=l(c,u.length),e=new TextDecoder().decode(d);if(e!==u)throw Error("Wrong magic number: "+JSON.stringify(e));let[f,h]=function(a){let b=[],c=Number(o(a));for(let d=0;d<c;d++){let c=Number(q(a));switch(c){case -18:case -19:{let d=Number(q(a));b.push([c,d]);break}case -20:case -21:{let d,e=[],f=Number(o(a));for(;f--;){let b=Number(o(a));if(b>=0x100000000)throw Error("field id out of 32-bit range");if("number"==typeof d&&d>=b)throw Error("field id collision or not sorted");d=b;let c=Number(q(a));e.push([b,c])}b.push([c,e]);break}case -22:{let d=[],e=Number(o(a));for(;e--;)d.push(Number(q(a)));let f=[],g=Number(o(a));for(;g--;)f.push(Number(q(a)));let h=[],i=Number(o(a));for(;i--;)switch(Number(o(a))){case 1:h.push("query");break;case 2:h.push("oneway");break;case 3:h.push("composite_query");break;default:throw Error("unknown annotation")}b.push([c,[d,f,h]]);break}case -23:{let d=Number(o(a)),e=[];for(;d--;){let b=Number(o(a)),c=new TextDecoder().decode(l(a,b)),d=q(a);e.push([c,d])}b.push([c,e]);break}default:throw Error("Illegal op_code: "+c)}}let d=[],e=Number(o(a));for(let b=0;b<e;b++)d.push(Number(q(a)));return[b,d]}(c);if(h.length<a.length)throw Error("Wrong number of return values");let i=f.map(a=>av());function j(a){if(a<-24)throw Error("future value not supported");if(a<0)switch(a){case -1:return ab;case -2:return aa;case -3:return ae;case -4:return ad;case -5:return al;case -6:return am;case -7:return an;case -8:return ao;case -9:return ah;case -10:return ai;case -11:return aj;case -12:return ak;case -13:return af;case -14:return ag;case -15:return ac;case -16:return $;case -17:return Z;case -24:return ap;default:throw Error("Illegal op_code: "+a)}if(a>=f.length)throw Error("type index out of range");return i[a]}function k(a){switch(a[0]){case -19:return ar(j(a[1]));case -18:return as(j(a[1]));case -20:{let b={};for(let[c,d]of a[1])b[`_${c}_`]=j(d);let c=at(b),d=c.tryAsTuple();if(Array.isArray(d))return aq(...d);return c}case -21:{let b={};for(let[c,d]of a[1])b[`_${c}_`]=j(d);return au(b)}case -22:{let[b,c,d]=a[1];return aw(b.map(a=>j(a)),c.map(a=>j(a)),d)}case -23:{let b={};for(let[c,d]of a[1]){let a=j(d);if(a instanceof R&&(a=a.getType()),!(a instanceof U))throw Error("Illegal service definition: services can only contain functions");b[c]=a}return ax(b)}default:throw Error("Illegal op_code: "+a[0])}}f.forEach((a,b)=>{if(-22===a[0]){let c=k(a);i[b].fill(c)}}),f.forEach((a,b)=>{if(-22!==a[0]){let c=k(a);i[b].fill(c)}});let m=h.map(a=>j(a)),n=a.map((a,b)=>a.decodeValue(c,m[b]));for(let b=a.length;b<m.length;b++)m[b].decodeValue(c,m[b]);if(c.byteLength>0)throw Error("decode: Left-over bytes");return n}let Z=new B,$=new F,_=new C,aa=new D,ab=new E,ac=new G,ad=new H,ae=new I,af=new J(32),ag=new J(64),ah=new K(8),ai=new K(16),aj=new K(32),ak=new K(64),al=new L(8),am=new L(16),an=new L(32),ao=new L(64),ap=new T;function aq(...a){return new P(a)}function ar(a){return new M(a)}function as(a){return new N(a)}function at(a){return new O(a)}function au(a){return new Q(a)}function av(){return new R}function aw(a,b,c=[]){return new U(a,b,c)}function ax(a){return new V(a)}class ay{constructor(a,b){this.idl=a,this.ui=b,this.label=null,this.value=void 0;let c=document.createElement("span");c.className="status",this.status=c,b.input&&(b.input.addEventListener("blur",()=>{""!==b.input.value&&this.parse()}),b.input.addEventListener("input",()=>{c.style.display="none",b.input.classList.remove("reject")}))}isRejected(){return void 0===this.value}parse(a={}){if(this.ui.form){let b=this.ui.form.parse(a);return this.value=b,b}if(this.ui.input){let b=this.ui.input;try{let c=this.ui.parse(this.idl,a,b.value);if(!this.idl.covariant(c))throw Error(`${b.value} is not of type ${this.idl.display()}`);return this.status.style.display="none",this.value=c,c}catch(a){b.classList.add("reject"),this.status.style.display="block",this.status.innerHTML="InputError: "+a.message,this.value=void 0;return}}return null}render(a){let b=document.createElement("span");if(this.label){let a=document.createElement("label");a.innerText=this.label,b.appendChild(a)}this.ui.input&&(b.appendChild(this.ui.input),b.appendChild(this.status)),this.ui.form&&this.ui.form.render(b),a.appendChild(b)}}class az{constructor(a){this.ui=a,this.form=[]}renderForm(a){this.ui.container?(this.form.forEach(a=>a.render(this.ui.container)),a.appendChild(this.ui.container)):this.form.forEach(b=>b.render(a))}render(a){if(this.ui.open&&this.ui.event){a.appendChild(this.ui.open);let b=this;b.ui.open.addEventListener(b.ui.event,()=>{if(b.ui.container)b.ui.container.innerHTML="";else{let a=b.ui.open.nextElementSibling;a&&a.parentNode.removeChild(a)}b.generateForm(),b.renderForm(a)})}else this.generateForm(),this.renderForm(a)}}class aA extends az{constructor(a,b){super(b),this.fields=a,this.ui=b}generateForm(){this.form=this.fields.map(([a,b])=>{let c=this.ui.render(b);return this.ui.labelMap&&this.ui.labelMap.hasOwnProperty(a)?c.label=this.ui.labelMap[a]+" ":c.label=a+" ",c})}parse(a){let b={};if(this.fields.forEach(([c,d],e)=>{let f=this.form[e].parse(a);b[c]=f}),!this.form.some(a=>a.isRejected()))return b}}class aB extends az{constructor(a,b){super(b),this.components=a,this.ui=b}generateForm(){this.form=this.components.map(a=>this.ui.render(a))}parse(a){let b=[];if(this.components.forEach((c,d)=>{let e=this.form[d].parse(a);b.push(e)}),!this.form.some(a=>a.isRejected()))return b}}class aC extends az{constructor(a,b){super(b),this.fields=a,this.ui=b}generateForm(){let a=this.ui.open.selectedIndex,[b,c]=this.fields[a],d=this.ui.render(c);this.form=[d]}parse(a){let b=this.ui.open,c=b.options[b.selectedIndex].value,d=this.form[0].parse(a);if(void 0===d)return;let e={};return e[c]=d,e}}class aD extends az{constructor(a,b){super(b),this.ty=a,this.ui=b}generateForm(){if(this.ui.open.checked){let a=this.ui.render(this.ty);this.form=[a]}else this.form=[]}parse(a){if(0===this.form.length)return[];{let b=this.form[0].parse(a);if(void 0===b)return;return[b]}}}class aE extends az{constructor(a,b){super(b),this.ty=a,this.ui=b}generateForm(){let a=+this.ui.open.value;this.form=[];for(let b=0;b<a;b++){let a=this.ui.render(this.ty);this.form.push(a)}}parse(a){let b=this.form.map(b=>b.parse(a));if(!this.form.some(a=>a.isRejected()))return b}}let aF={parse:function(a,b,c){return b.random&&""===c?a.accept(new aK,c):a.accept(new aJ,c)}},aG={render:aL},aH=(a,b)=>new ay(a,Object.assign(Object.assign({},aF),b));class aI extends x{visitType(a,b){let c=document.createElement("input");return c.classList.add("argument"),c.placeholder=a.display(),aH(a,{input:c})}visitNull(a,b){return aH(a,{})}visitRecord(a,b,c){let d,e={};if(b.length>1){let a=document.createElement("div");a.classList.add("popup-form"),e={container:a}}return aH(a,{form:(d=e,new aA(b,Object.assign(Object.assign({},aG),d)))})}visitTuple(a,b,c){let d,e={};if(b.length>1){let a=document.createElement("div");a.classList.add("popup-form"),e={container:a}}return aH(a,{form:(d=e,new aB(b,Object.assign(Object.assign({},aG),d)))})}visitVariant(a,b,c){let d,e=document.createElement("select");for(let[a,c]of b){let b=new Option(a);e.add(b)}return e.selectedIndex=-1,e.classList.add("open"),aH(a,{form:(d={open:e,event:"change"},new aC(b,Object.assign(Object.assign({},aG),d)))})}visitOpt(a,b,c){let d,e=document.createElement("input");return e.type="checkbox",e.classList.add("open"),aH(a,{form:(d={open:e,event:"change"},new aD(b,Object.assign(Object.assign({},aG),d)))})}visitVec(a,b,c){let d,e=document.createElement("input");e.type="number",e.min="0",e.max="100",e.style.width="8rem",e.placeholder="len",e.classList.add("open");let f=document.createElement("div");return f.classList.add("popup-form"),aH(a,{form:(d={open:e,event:"change",container:f},new aE(b,Object.assign(Object.assign({},aG),d)))})}visitRec(a,b,c){return aL(b)}}class aJ extends x{visitNull(a,b){return null}visitBool(a,b){if("true"===b)return!0;if("false"===b)return!1;throw Error(`Cannot parse ${b} as boolean`)}visitText(a,b){return b}visitFloat(a,b){return parseFloat(b)}visitFixedInt(a,b){return a._bits<=32?parseInt(b,10):BigInt(b)}visitFixedNat(a,b){return a._bits<=32?parseInt(b,10):BigInt(b)}visitNumber(a,b){return BigInt(b)}visitPrincipal(a,b){return e.p.fromText(b)}visitService(a,b){return e.p.fromText(b)}visitFunc(a,b){let c=b.split(".",2);return[e.p.fromText(c[0]),c[1]]}}class aK extends x{visitNull(a,b){return null}visitBool(a,b){return .5>Math.random()}visitText(a,b){return Math.random().toString(36).substring(6)}visitFloat(a,b){return Math.random()}visitInt(a,b){return BigInt(this.generateNumber(!0))}visitNat(a,b){return BigInt(this.generateNumber(!1))}visitFixedInt(a,b){let c=this.generateNumber(!0);return a._bits<=32?c:BigInt(b)}visitFixedNat(a,b){let c=this.generateNumber(!1);return a._bits<=32?c:BigInt(b)}generateNumber(a){let b=Math.floor(100*Math.random());return a&&.5>Math.random()?-b:b}}function aL(a){return a.accept(new aI,null)}},17894:(a,b)=>{b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=5960464477539062e-23*(23===e),n=d?0:f-1,o=d?1:-1,p=+(b<0||0===b&&1/b<0);for(isNaN(b=Math.abs(b))||b===1/0?(h=+!!isNaN(b),g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),g+l>=1?b+=m/i:b+=m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},24771:(a,b,c)=>{"use strict";let{URLWithLegacySupport:d,format:e,URLSearchParams:f,defaultBase:g}=c(80275);a.exports={URL:d,URLSearchParams:f,format:e,relative:c(48068),defaultBase:g}},24787:a=>{"use strict";class b{constructor(a,b,c){if(this.tag=a,this.value=b,this.err=c,"number"!=typeof this.tag)throw Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(a){return a._pushTag(this.tag),a.pushAny(this.value)}convert(a){var c;if("function"!=typeof(c=null!=a?a[this.tag]:void 0)&&"function"!=typeof(c=b["_tag"+this.tag]))return this;try{return c.call(b,this.value)}catch(a){return this.err=a,this}}}a.exports=b},26671:(a,b,c)=>{"use strict";let{Buffer:d}=c(79428),e=c(47991),f=c(1070);class g extends e{createTag(a,b){return`${a}(${b})`}createInt(a){return super.createInt(a).toString()}createInt32(a,b){return super.createInt32(a,b).toString()}createInt64(a,b,c,d){return super.createInt64(a,b,c,d).toString()}createInt32Neg(a,b){return super.createInt32Neg(a,b).toString()}createInt64Neg(a,b,c,d){return super.createInt64Neg(a,b,c,d).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(a){let b=super.createFloat(a);return f.isNegativeZero(a)?"-0_1":`${b}_1`}createFloatSingle(a,b,c,d){let e=super.createFloatSingle(a,b,c,d);return`${e}_2`}createFloatDouble(a,b,c,d,e,f,g,h){let i=super.createFloatDouble(a,b,c,d,e,f,g,h);return`${i}_3`}createByteString(a,b){let c=a.join(", ");return -1===b?`(_ ${c})`:`h'${c}`}createByteStringFromHeap(a,b){let c=d.from(super.createByteStringFromHeap(a,b)).toString("hex");return`h'${c}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(a){return`simple(${a})`}createArray(a,b){let c=super.createArray(a,b);return -1===b?`[_ ${c.join(", ")}]`:`[${c.join(", ")}]`}createMap(a,b){let c=super.createMap(a),d=Array.from(c.keys()).reduce(h(c),"");return -1===b?`{_ ${d}}`:`{${d}}`}createObject(a,b){let c=super.createObject(a),d=Object.keys(c).reduce(h(c),"");return -1===b?`{_ ${d}}`:`{${d}}`}createUtf8String(a,b){let c=a.join(", ");return -1===b?`(_ ${c})`:`"${c}"`}createUtf8StringFromHeap(a,b){let c=d.from(super.createUtf8StringFromHeap(a,b)).toString("utf8");return`"${c}"`}static diagnose(a,b){return"string"==typeof a&&(a=d.from(a,b||"hex")),new g().decodeFirst(a)}}function h(a){return(b,c)=>b?`${b}, ${c}: ${a[c]}`:`${c}: ${a[c]}`}a.exports=g},30474:(a,b,c)=>{"use strict";c.d(b,{default:()=>e.a});var d=c(31261),e=c.n(d)},31261:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{default:function(){return i},getImageProps:function(){return h}});let d=c(14985),e=c(44953),f=c(46533),g=d._(c(1933));function h(a){let{props:b}=(0,e.getImgProps)(a,{defaultLoader:g.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let i=f.Image},46005:(a,b,c)=>{"use strict";var d;c.d(b,{R:()=>d}),function(a){a[a.SysFatal=1]="SysFatal",a[a.SysTransient=2]="SysTransient",a[a.DestinationInvalid=3]="DestinationInvalid",a[a.CanisterReject=4]="CanisterReject",a[a.CanisterError=5]="CanisterError"}(d||(d={}))},47991:(a,b,c)=>{"use strict";let{Buffer:d}=c(79428),e=c(17894),f=c(66221).BigNumber,g=c(76018),h=c(1070),i=c(13270),j=c(53545),k=c(24787),{URL:l}=c(24771);class m{constructor(a){!(a=a||{}).size||a.size<65536?a.size=65536:a.size=h.nextPowerOf2(a.size),this._heap=new ArrayBuffer(a.size),this._heap8=new Uint8Array(this._heap),this._buffer=d.from(this._heap),this._reset(),this._knownTags=Object.assign({0:a=>new Date(a),1:a=>new Date(1e3*a),2:a=>h.arrayBufferToBignumber(a),3:a=>i.NEG_ONE.minus(h.arrayBufferToBignumber(a)),4:a=>i.TEN.pow(a[0]).times(a[1]),5:a=>i.TWO.pow(a[0]).times(a[1]),32:a=>new l(a),35:a=>new RegExp(a)},a.tags),this.parser=g(global,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var a=this._parents.pop();if(a.length>0)throw Error(`Missing ${a.length} elements`);switch(a.type){case i.PARENT.TAG:this._push(this.createTag(a.ref[0],a.ref[1]));break;case i.PARENT.BYTE_STRING:this._push(this.createByteString(a.ref,a.length));break;case i.PARENT.UTF8_STRING:this._push(this.createUtf8String(a.ref,a.length));break;case i.PARENT.MAP:if(a.values%2>0)throw Error("Odd number of elements in the map");this._push(this.createMap(a.ref,a.length));break;case i.PARENT.OBJECT:if(a.values%2>0)throw Error("Odd number of elements in the map");this._push(this.createObject(a.ref,a.length));break;case i.PARENT.ARRAY:this._push(this.createArray(a.ref,a.length))}this._currentParent&&this._currentParent.type===i.PARENT.TAG&&this._dec()}_dec(){let a=this._currentParent;a.length<0||(a.length--,0===a.length&&this._closeParent())}_push(a,b){let c=this._currentParent;switch(c.values++,c.type){case i.PARENT.ARRAY:case i.PARENT.BYTE_STRING:case i.PARENT.UTF8_STRING:c.length>-1?this._ref[this._ref.length-c.length]=a:this._ref.push(a),this._dec();break;case i.PARENT.OBJECT:null!=c.tmpKey?(this._ref[c.tmpKey]=a,c.tmpKey=null,this._dec()):(c.tmpKey=a,"string"!=typeof c.tmpKey&&(c.type=i.PARENT.MAP,c.ref=h.buildMap(c.ref)));break;case i.PARENT.MAP:null!=c.tmpKey?(this._ref.set(c.tmpKey,a),c.tmpKey=null,this._dec()):c.tmpKey=a;break;case i.PARENT.TAG:this._ref.push(a),b||this._dec();break;default:throw Error("Unknown parent type")}}_createParent(a,b,c){this._parents[this._depth]={type:b,length:c,ref:a,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:i.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(a,b){let c=this._knownTags[a];return c?c(b):new k(a,b)}createMap(a,b){return a}createObject(a,b){return a}createArray(a,b){return a}createByteString(a,b){return d.concat(a)}createByteStringFromHeap(a,b){return a===b?d.alloc(0):d.from(this._heap.slice(a,b))}createInt(a){return a}createInt32(a,b){return h.buildInt32(a,b)}createInt64(a,b,c,d){return h.buildInt64(a,b,c,d)}createFloat(a){return a}createFloatSingle(a,b,c,d){return e.read([a,b,c,d],0,!1,23,4)}createFloatDouble(a,b,c,d,f,g,h,i){return e.read([a,b,c,d,f,g,h,i],0,!1,52,8)}createInt32Neg(a,b){return -1-h.buildInt32(a,b)}createInt64Neg(a,b,c,d){let e=h.buildInt32(a,b),g=h.buildInt32(c,d);return e>i.MAX_SAFE_HIGH?i.NEG_ONE.minus(new f(e).times(i.SHIFT32).plus(g)):-1-(e*i.SHIFT32+g)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(a,b){return a.join("")}createUtf8StringFromHeap(a,b){return a===b?"":this._buffer.toString("utf8",a,b)}createSimpleUnassigned(a){return new j(a)}pushInt(a){this._push(this.createInt(a))}pushInt32(a,b){this._push(this.createInt32(a,b))}pushInt64(a,b,c,d){this._push(this.createInt64(a,b,c,d))}pushFloat(a){this._push(this.createFloat(a))}pushFloatSingle(a,b,c,d){this._push(this.createFloatSingle(a,b,c,d))}pushFloatDouble(a,b,c,d,e,f,g,h){this._push(this.createFloatDouble(a,b,c,d,e,f,g,h))}pushInt32Neg(a,b){this._push(this.createInt32Neg(a,b))}pushInt64Neg(a,b,c,d){this._push(this.createInt64Neg(a,b,c,d))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],i.PARENT.ARRAY,-1)}pushArrayStartFixed(a){this._createArrayStartFixed(a)}pushArrayStartFixed32(a,b){let c=h.buildInt32(a,b);this._createArrayStartFixed(c)}pushArrayStartFixed64(a,b,c,d){let e=h.buildInt64(a,b,c,d);this._createArrayStartFixed(e)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(a){this._createObjectStartFixed(a)}pushObjectStartFixed32(a,b){let c=h.buildInt32(a,b);this._createObjectStartFixed(c)}pushObjectStartFixed64(a,b,c,d){let e=h.buildInt64(a,b,c,d);this._createObjectStartFixed(e)}pushByteStringStart(){this._parents[this._depth]={type:i.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(a,b){this._push(this.createByteStringFromHeap(a,b))}pushUtf8StringStart(){this._parents[this._depth]={type:i.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(a,b){this._push(this.createUtf8StringFromHeap(a,b))}pushSimpleUnassigned(a){this._push(this.createSimpleUnassigned(a))}pushTagStart(a){this._parents[this._depth]={type:i.PARENT.TAG,length:1,ref:[a]}}pushTagStart4(a,b){this.pushTagStart(h.buildInt32(a,b))}pushTagStart8(a,b,c,d){this.pushTagStart(h.buildInt64(a,b,c,d))}pushTagUnassigned(a){this._push(this.createTag(a))}pushBreak(){if(this._currentParent.length>-1)throw Error("Unexpected break");this._closeParent()}_createObjectStartFixed(a){if(0===a)return void this._push(this.createObject({}));this._createParent({},i.PARENT.OBJECT,a)}_createArrayStartFixed(a){if(0===a)return void this._push(this.createArray([]));this._createParent(Array(a),i.PARENT.ARRAY,a)}_decode(a){if(0===a.byteLength)throw Error("Input too short");this._reset(),this._heap8.set(a);let b=this.parser.parse(a.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw Error("Undeterminated nesting")}if(b>0)throw Error("Failed to parse");if(0===this._res.length)throw Error("No valid result")}decodeFirst(a){return this._decode(a),this._res[0]}decodeAll(a){return this._decode(a),this._res}static decode(a,b){return"string"==typeof a&&(a=d.from(a,b||"hex")),new m({size:a.length}).decodeFirst(a)}static decodeAll(a,b){return"string"==typeof a&&(a=d.from(a,b||"hex")),new m({size:a.length}).decodeAll(a)}}m.decodeFirst=m.decode,a.exports=m},48068:(a,b,c)=>{"use strict";let{URLWithLegacySupport:d,format:e}=c(80275);a.exports=(a,b={},c={},f)=>{let g,h=b.protocol?b.protocol.replace(":",""):"http";h=(c[h]||f||h)+":";try{g=new d(a)}catch(a){g={}}return new d(a,e(Object.assign({},b,{protocol:h||g.protocol,host:b.host||g.host}))).toString()}},51151:(a,b,c)=>{"use strict";c.d(b,{Ak:()=>i,UT:()=>u,Xf:()=>s,fH:()=>r,hT:()=>q,u0:()=>h});var d=c(86900),e=c(64014);let f=BigInt(0),g=BigInt(1);function h(a,b){let c=b.negate();return a?c:b}function i(a,b){let c=(0,e.pS)(a.Fp,b.map(a=>a.Z));return b.map((b,d)=>a.fromAffine(b.toAffine(c[d])))}function j(a,b){if(!Number.isSafeInteger(a)||a<=0||a>b)throw Error("invalid window size, expected [1.."+b+"], got W="+a)}function k(a,b){j(a,b);let c=Math.ceil(b/a)+1,e=2**(a-1),f=2**a;return{windows:c,windowSize:e,mask:(0,d.OG)(a),maxNumber:f,shiftBy:BigInt(a)}}function l(a,b,c){let{windowSize:d,mask:e,maxNumber:f,shiftBy:h}=c,i=Number(a&e),j=a>>h;i>d&&(i-=f,j+=g);let k=b*d,l=k+Math.abs(i)-1,m=0===i;return{nextN:j,offset:l,isZero:m,isNeg:i<0,isNegF:b%2!=0,offsetF:k}}let m=new WeakMap,n=new WeakMap;function o(a){return n.get(a)||1}function p(a){if(a!==f)throw Error("invalid wNAF")}class q{constructor(a,b){this.BASE=a.BASE,this.ZERO=a.ZERO,this.Fn=a.Fn,this.bits=b}_unsafeLadder(a,b,c=this.ZERO){let d=a;for(;b>f;)b&g&&(c=c.add(d)),d=d.double(),b>>=g;return c}precomputeWindow(a,b){let{windows:c,windowSize:d}=k(b,this.bits),e=[],f=a,g=f;for(let a=0;a<c;a++){g=f,e.push(g);for(let a=1;a<d;a++)g=g.add(f),e.push(g);f=g.double()}return e}wNAF(a,b,c){if(!this.Fn.isValid(c))throw Error("invalid scalar");let d=this.ZERO,e=this.BASE,f=k(a,this.bits);for(let a=0;a<f.windows;a++){let{nextN:g,offset:i,isZero:j,isNeg:k,isNegF:m,offsetF:n}=l(c,a,f);c=g,j?e=e.add(h(m,b[n])):d=d.add(h(k,b[i]))}return p(c),{p:d,f:e}}wNAFUnsafe(a,b,c,d=this.ZERO){let e=k(a,this.bits);for(let a=0;a<e.windows&&c!==f;a++){let{nextN:f,offset:g,isZero:h,isNeg:i}=l(c,a,e);if(c=f,!h){let a=b[g];d=d.add(i?a.negate():a)}}return p(c),d}getPrecomputes(a,b,c){let d=m.get(b);return d||(d=this.precomputeWindow(b,a),1!==a&&("function"==typeof c&&(d=c(d)),m.set(b,d))),d}cached(a,b,c){let d=o(a);return this.wNAF(d,this.getPrecomputes(d,a,c),b)}unsafe(a,b,c,d){let e=o(a);return 1===e?this._unsafeLadder(a,b,d):this.wNAFUnsafe(e,this.getPrecomputes(e,a,c),b,d)}createCache(a,b){j(b,this.bits),n.set(a,b),m.delete(a)}hasCache(a){return 1!==o(a)}}function r(a,b,c,d){let e=b,h=a.ZERO,i=a.ZERO;for(;c>f||d>f;)c&g&&(h=h.add(e)),d&g&&(i=i.add(e)),e=e.double(),c>>=g,d>>=g;return{p1:h,p2:i}}function s(a,b,c,e){if(!Array.isArray(c))throw Error("array expected");c.forEach((b,c)=>{if(!(b instanceof a))throw Error("invalid point at index "+c)});if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((a,c)=>{if(!b.isValid(a))throw Error("invalid scalar at index "+c)});let f=c.length,g=e.length;if(f!==g)throw Error("arrays of points and scalars must have equal length");let h=a.ZERO,i=(0,d.dJ)(BigInt(f)),j=1;i>12?j=i-3:i>4?j=i-2:i>0&&(j=2);let k=(0,d.OG)(j),l=Array(Number(k)+1).fill(h),m=Math.floor((b.BITS-1)/j)*j,n=h;for(let a=m;a>=0;a-=j){l.fill(h);for(let b=0;b<g;b++){let d=Number(e[b]>>BigInt(a)&k);l[d]=l[d].add(c[b])}let b=h;for(let a=l.length-1,c=h;a>0;a--)c=c.add(l[a]),b=b.add(c);if(n=n.add(b),0!==a)for(let a=0;a<j;a++)n=n.double()}return n}function t(a,b){if(!b)return(0,e.D0)(a);if(b.ORDER!==a)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,e.jr)(b),b}function u(a,b,c={}){if(!b||"object"!=typeof b)throw Error(`expected valid ${a} CURVE object`);for(let a of["p","n","h"]){let c=b[a];if(!("bigint"==typeof c&&c>f))throw Error(`CURVE.${a} must be positive bigint`)}let d=t(b.p,c.Fp),e=t(b.n,c.Fn);for(let c of["Gx","Gy","a","weierstrass"===a?"b":"d"])if(!d.isValid(b[c]))throw Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:d,Fn:e}}},52148:function(a,b,c){"use strict";var d=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b};Object.defineProperty(b,"__esModule",{value:!0});let e=d(c(15507)),f=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class g{constructor(a,b=!1){this._serializer=a,this._stable=b,this.name="jsonDefault",this.priority=-100}match(a){return -1!=["undefined","boolean","number","string","object"].indexOf(typeof a)}encode(a){switch(typeof a){case"undefined":return e.undefined_();case"boolean":return e.bool(a);case"number":if(Math.floor(a)===a)return e.number(a);return e.doubleFloat(a);case"string":return e.string(a);case"object":if(null===a)return e.null_();if(Array.isArray(a))return e.array(a.map(a=>this._serializer.serializeValue(a)));if(f.find(b=>a instanceof b))return e.bytes(a.buffer);else if(-1!==Object.getOwnPropertyNames(a).indexOf("toJSON"))return this.encode(a.toJSON());else if(a instanceof Map){let b=new Map;for(let[c,d]of a.entries())b.set(c,this._serializer.serializeValue(d));return e.map(b,this._stable)}else{let b=new Map;for(let[c,d]of Object.entries(a))b.set(c,this._serializer.serializeValue(d));return e.map(b,this._stable)}default:throw Error("Invalid value.")}}}b.JsonDefaultCborEncoder=g;class h{constructor(){this.name="cborEncoder",this.priority=-90}match(a){return"object"==typeof a&&"function"==typeof a.toCBOR}encode(a){return a.toCBOR()}}b.ToCborEncoder=h;class i{constructor(){this._encoders=new Set}static withDefaultEncoders(a=!1){let b=new this;return b.addEncoder(new g(b,a)),b.addEncoder(new h),b}removeEncoder(a){for(let b of this._encoders.values())b.name==a&&this._encoders.delete(b)}addEncoder(a){this._encoders.add(a)}getEncoderFor(a){let b=null;for(let c of this._encoders)(!b||c.priority>b.priority)&&c.match(a)&&(b=c);if(null===b)throw Error("Could not find an encoder for value.");return b}serializeValue(a){return this.getEncoderFor(a).encode(a)}serialize(a){return this.serializeValue(a)}}b.CborSerializer=i;class j extends i{serialize(a){return e.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(a))]))}}b.SelfDescribeCborSerializer=j},53545:(a,b,c)=>{"use strict";let d=c(13270),e=d.MT,f=d.SIMPLE,g=d.SYMS;class h{constructor(a){if("number"!=typeof a)throw Error("Invalid Simple type: "+typeof a);if(a<0||a>255||(0|a)!==a)throw Error("value must be a small positive integer: "+a);this.value=a}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(a){return a._pushInt(this.value,e.SIMPLE_FLOAT)}static isSimple(a){return a instanceof h}static decode(a,b){switch(null==b&&(b=!0),a){case f.FALSE:return!1;case f.TRUE:return!0;case f.NULL:if(b)return null;return g.NULL;case f.UNDEFINED:if(b)return;return g.UNDEFINED;case -1:if(!b)throw Error("Invalid BREAK");return g.BREAK;default:return new h(a)}}}a.exports=h},54639:(a,b,c)=>{"use strict";let{Buffer:d}=c(79428),{URL:e}=c(24771),f=c(66221).BigNumber,g=c(1070),h=c(13270),i=h.MT,j=h.NUMBYTES,k=h.SHIFT32,l=h.SYMS,m=h.TAG,n=h.MT.SIMPLE_FLOAT<<5|h.NUMBYTES.TWO,o=h.MT.SIMPLE_FLOAT<<5|h.NUMBYTES.FOUR,p=h.MT.SIMPLE_FLOAT<<5|h.NUMBYTES.EIGHT,q=h.MT.SIMPLE_FLOAT<<5|h.SIMPLE.TRUE,r=h.MT.SIMPLE_FLOAT<<5|h.SIMPLE.FALSE,s=h.MT.SIMPLE_FLOAT<<5|h.SIMPLE.UNDEFINED,t=h.MT.SIMPLE_FLOAT<<5|h.SIMPLE.NULL,u=new f("0x20000000000000"),v=d.from("f97e00","hex"),w=d.from("f9fc00","hex"),x=d.from("f97c00","hex");class y{constructor(a){a=a||{},this.streaming="function"==typeof a.stream,this.onData=a.stream,this.semanticTypes=[[e,this._pushUrl],[f,this._pushBigNumber]];let b=a.genTypes||[],c=b.length;for(let a=0;a<c;a++)this.addSemanticType(b[a][0],b[a][1]);this._reset()}addSemanticType(a,b){let c=this.semanticTypes.length;for(let d=0;d<c;d++)if(this.semanticTypes[d][0]===a){let a=this.semanticTypes[d][1];return this.semanticTypes[d][1]=b,a}return this.semanticTypes.push([a,b]),null}push(a){return!a||(this.result[this.offset]=a,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=a.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(a,b,c){return this.result[this.offset]=a,this.resultMethod[this.offset]=b,this.resultLength[this.offset]=c,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(a){return this.pushWrite(a,1,1)}_pushUInt16BE(a){return this.pushWrite(a,2,2)}_pushUInt32BE(a){return this.pushWrite(a,3,4)}_pushDoubleBE(a){return this.pushWrite(a,4,8)}_pushNaN(){return this.push(v)}_pushInfinity(a){return this.push(a<0?w:x)}_pushFloat(a){let b=d.allocUnsafe(2);if(g.writeHalf(b,a)&&g.parseHalf(b)===a)return this._pushUInt8(n)&&this.push(b);let c=d.allocUnsafe(4);return(c.writeFloatBE(a,0),c.readFloatBE(0)===a)?this._pushUInt8(o)&&this.push(c):this._pushUInt8(p)&&this._pushDoubleBE(a)}_pushInt(a,b,c){let d=b<<5;return a<24?this._pushUInt8(d|a):a<=255?this._pushUInt8(d|j.ONE)&&this._pushUInt8(a):a<=65535?this._pushUInt8(d|j.TWO)&&this._pushUInt16BE(a):a<=0xffffffff?this._pushUInt8(d|j.FOUR)&&this._pushUInt32BE(a):a<=Number.MAX_SAFE_INTEGER?this._pushUInt8(d|j.EIGHT)&&this._pushUInt32BE(Math.floor(a/k))&&this._pushUInt32BE(a%k):b===i.NEG_INT?this._pushFloat(c):this._pushFloat(a)}_pushIntNum(a){return a<0?this._pushInt(-a-1,i.NEG_INT,a):this._pushInt(a,i.POS_INT)}_pushNumber(a){switch(!1){case a==a:return this._pushNaN(a);case isFinite(a):return this._pushInfinity(a);case a%1!=0:return this._pushIntNum(a);default:return this._pushFloat(a)}}_pushString(a){let b=d.byteLength(a,"utf8");return this._pushInt(b,i.UTF8_STRING)&&this.pushWrite(a,5,b)}_pushBoolean(a){return this._pushUInt8(a?q:r)}_pushUndefined(a){return this._pushUInt8(s)}_pushArray(a,b){let c=b.length;if(!a._pushInt(c,i.ARRAY))return!1;for(let d=0;d<c;d++)if(!a.pushAny(b[d]))return!1;return!0}_pushTag(a){return this._pushInt(a,i.TAG)}_pushDate(a,b){return a._pushTag(m.DATE_EPOCH)&&a.pushAny(Math.round(b/1e3))}_pushBuffer(a,b){return a._pushInt(b.length,i.BYTE_STRING)&&a.push(b)}_pushNoFilter(a,b){return a._pushBuffer(a,b.slice())}_pushRegexp(a,b){return a._pushTag(m.REGEXP)&&a.pushAny(b.source)}_pushSet(a,b){if(!a._pushInt(b.size,i.ARRAY))return!1;for(let c of b)if(!a.pushAny(c))return!1;return!0}_pushUrl(a,b){return a._pushTag(m.URI)&&a.pushAny(b.format())}_pushBigint(a){let b=m.POS_BIGINT;a.isNegative()&&(a=a.negated().minus(1),b=m.NEG_BIGINT);let c=a.toString(16);c.length%2&&(c="0"+c);let e=d.from(c,"hex");return this._pushTag(b)&&this._pushBuffer(this,e)}_pushBigNumber(a,b){if(b.isNaN())return a._pushNaN();if(!b.isFinite())return a._pushInfinity(b.isNegative()?-1/0:1/0);if(b.isInteger())return a._pushBigint(b);if(!(a._pushTag(m.DECIMAL_FRAC)&&a._pushInt(2,i.ARRAY)))return!1;let c=b.decimalPlaces(),d=b.multipliedBy(new f(10).pow(c));return!!a._pushIntNum(-c)&&(d.abs().isLessThan(u)?a._pushIntNum(d.toNumber()):a._pushBigint(d))}_pushMap(a,b){return!!a._pushInt(b.size,i.MAP)&&this._pushRawMap(b.size,Array.from(b))}_pushObject(a){if(!a)return this._pushUInt8(t);for(var b=this.semanticTypes.length,c=0;c<b;c++)if(a instanceof this.semanticTypes[c][0])return this.semanticTypes[c][1].call(a,this,a);var d=a.encodeCBOR;if("function"==typeof d)return d.call(a,this);var e=Object.keys(a),f=e.length;return!!this._pushInt(f,i.MAP)&&this._pushRawMap(f,e.map(b=>[b,a[b]]))}_pushRawMap(a,b){b=b.map(function(a){return a[0]=y.encode(a[0]),a}).sort(g.keySorter);for(var c=0;c<a;c++)if(!this.push(b[c][0])||!this.pushAny(b[c][1]))return!1;return!0}write(a){return this.pushAny(a)}pushAny(a){switch(({}).toString.call(a).slice(8,-1)){case"Number":return this._pushNumber(a);case"String":return this._pushString(a);case"Boolean":return this._pushBoolean(a);case"Object":return this._pushObject(a);case"Array":return this._pushArray(this,a);case"Uint8Array":return this._pushBuffer(this,d.isBuffer(a)?a:d.from(a));case"Null":return this._pushUInt8(t);case"Undefined":return this._pushUndefined(a);case"Map":return this._pushMap(this,a);case"Set":return this._pushSet(this,a);case"URL":return this._pushUrl(this,a);case"BigNumber":return this._pushBigNumber(this,a);case"Date":return this._pushDate(this,a);case"RegExp":return this._pushRegexp(this,a);case"Symbol":switch(a){case l.NULL:return this._pushObject(null);case l.UNDEFINED:return this._pushUndefined(void 0);default:throw Error("Unknown symbol: "+a.toString())}default:throw Error("Unknown type: "+typeof a+", "+(a?a.toString():""))}}finalize(){if(0===this.offset)return null;for(var a=this.result,b=this.resultLength,c=this.resultMethod,e=this.offset,f=0,g=0;g<e;g++)f+=b[g];var h=d.allocUnsafe(f),i=0,j=0;for(g=0;g<e;g++){switch(j=b[g],c[g]){case 0:a[g].copy(h,i);break;case 1:h.writeUInt8(a[g],i,!0);break;case 2:h.writeUInt16BE(a[g],i,!0);break;case 3:h.writeUInt32BE(a[g],i,!0);break;case 4:h.writeDoubleBE(a[g],i,!0);break;case 5:h.write(a[g],i,j,"utf8");break;default:throw Error("unkown method")}i+=j}return this._reset(),h}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(a){let b=new y;if(!b.pushAny(a))throw Error("Failed to encode input");return b.finalize()}}a.exports=y},62005:(a,b,c)=>{"use strict";let d,e;c.d(b,{UJ:()=>ar});var f,g,h,i,j,k,l,m,n=c(9424),o=c(15608),p=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},q=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};function r(a){return null!==a&&"object"==typeof a}class s{constructor(a){if(f.set(this,void 0),g.set(this,void 0),a.byteLength!==s.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");p(this,f,(0,n.em)(a),"f"),p(this,g,s.derEncode(a),"f")}static from(a){if("string"==typeof a){let b=(0,n.aD)(a);return this.fromRaw(b)}if(r(a)){if(r(a)&&Object.hasOwnProperty.call(a,"__derEncodedPublicKey__"))return this.fromDer(a);if(ArrayBuffer.isView(a))return this.fromRaw((0,n.em)(a.buffer));if(a instanceof ArrayBuffer)return this.fromRaw(a);else if("rawKey"in a)return this.fromRaw(a.rawKey);else if("derKey"in a)return this.fromDer(a.derKey);else if("toDer"in a)return this.fromDer(a.toDer())}throw Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(a){return new s(a)}static fromDer(a){return new s(this.derDecode(a))}static derEncode(a){let b=(0,n.C2)(a,n.le).buffer;return b.__derEncodedPublicKey__=void 0,b}static derDecode(a){let b=(0,n.n9)(a,n.le);if(b.length!==this.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");return(0,n.em)(b)}get rawKey(){return q(this,f,"f")}get derKey(){return q(this,g,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}f=new WeakMap,g=new WeakMap,s.RAW_KEY_LENGTH=32;class t extends n.A4{constructor(a,b){super(),h.set(this,void 0),i.set(this,void 0),p(this,h,s.from(a),"f"),p(this,i,new Uint8Array(b),"f")}static generate(a){if(a&&32!==a.length)throw Error("Ed25519 Seed needs to be 32 bytes long.");a||(a=o.ev.utils.randomPrivateKey()),(0,n.HA)(a,new Uint8Array(Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");let b=new Uint8Array(32);for(let c=0;c<32;c++)b[c]=new Uint8Array(a)[c];let c=o.ev.getPublicKey(b);return t.fromKeyPair(c,b)}static fromParsedJson(a){let[b,c]=a;return new t(s.fromDer((0,n.aD)(b)),(0,n.aD)(c))}static fromJSON(a){let b=JSON.parse(a);if(Array.isArray(b))if("string"==typeof b[0]&&"string"==typeof b[1])return this.fromParsedJson([b[0],b[1]]);else throw Error("Deserialization error: JSON must have at least 2 items.");throw Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(a)}`)}static fromKeyPair(a,b){return new t(s.fromRaw(a),b)}static fromSecretKey(a){let b=o.ev.getPublicKey(new Uint8Array(a));return t.fromKeyPair(b,a)}toJSON(){return[(0,n.nj)(q(this,h,"f").toDer()),(0,n.nj)(q(this,i,"f"))]}getKeyPair(){return{secretKey:q(this,i,"f"),publicKey:q(this,h,"f")}}getPublicKey(){return q(this,h,"f")}async sign(a){let b=new Uint8Array(a),c=(0,n.Nn)(o.ev.sign(b,q(this,i,"f").slice(0,32)));return Object.defineProperty(c,"__signature__",{enumerable:!1,value:void 0}),c}static verify(a,b,c){let[d,e,f]=[a,b,c].map(a=>("string"==typeof a&&(a=(0,n.aD)(a)),a instanceof Uint8Array&&(a=(0,n.em)(a.buffer)),new Uint8Array(a)));return o.ev.verify(d,e,f)}}h=new WeakMap,i=new WeakMap;class u extends Error{constructor(a){super(a),this.message=a,Object.setPrototypeOf(this,u.prototype)}}function v(a){if("undefined"!=typeof global&&global.crypto&&global.crypto.subtle)return global.crypto.subtle;if(a)return a;if("undefined"!=typeof crypto&&crypto.subtle)return crypto.subtle;throw new u("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}class w extends n.A4{constructor(a,b,c){super(),this._keyPair=a,this._derKey=b,this._subtleCrypto=c}static async generate(a){let{extractable:b=!1,keyUsages:c=["sign","verify"],subtleCrypto:d}=null!=a?a:{},e=v(d),f=await e.generateKey({name:"ECDSA",namedCurve:"P-256"},b,c),g=await e.exportKey("spki",f.publicKey);return new this(f,g,e)}static async fromKeyPair(a,b){let c=v(b),d=await c.exportKey("spki",a.publicKey);return new w(a,d,c)}getKeyPair(){return this._keyPair}getPublicKey(){let a=this._derKey,b=Object.create(this._keyPair.publicKey);return b.toDer=function(){return a},b}async sign(a){return await this._subtleCrypto.sign({name:"ECDSA",hash:{name:"SHA-256"}},this._keyPair.privateKey,a)}}var x=c(65689),y=c(77214),z=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},A=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};class B{constructor(a){j.set(this,void 0),z(this,j,a,"f")}get rawKey(){return A(this,j,"f").rawKey}get derKey(){return A(this,j,"f").derKey}toDer(){return A(this,j,"f").toDer()}getPublicKey(){return A(this,j,"f")}getPrincipal(){if(!A(this,j,"f").rawKey)throw Error("Cannot get principal from a public key without a raw key.");return x.p.fromUint8Array(new Uint8Array(A(this,j,"f").rawKey))}transformRequest(){return Promise.reject("Not implemented. You are attempting to use a partial identity to sign calls, but this identity only has access to the public key.To sign calls, use a DelegationIdentity instead.")}}j=new WeakMap;var C=c(17243),D=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},E=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)},F=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};let G=new TextEncoder().encode("\x1aic-request-auth-delegation"),H=new TextEncoder().encode("\nic-request");function I(a){if("string"!=typeof a||a.length<64)throw Error("Invalid public key.");return(0,n.aD)(a)}class J{constructor(a,b,c){this.pubkey=a,this.expiration=b,this.targets=c}toCBOR(){return y.value.map(Object.assign({pubkey:y.value.bytes(this.pubkey),expiration:y.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:y.value.array(this.targets.map(a=>y.value.bytes((0,C.em)(a.toUint8Array()))))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:(0,n.nj)(this.pubkey)},this.targets&&{targets:this.targets.map(a=>a.toHex())})}}async function K(a,b,c,d){let e=new J(b.toDer(),BigInt(+c)*BigInt(1e6),d),f=new Uint8Array([...G,...new Uint8Array((0,n.Gb)(Object.assign({},e)))]);return{delegation:e,signature:await a.sign((0,C.em)(f))}}class L{constructor(a,b){this.delegations=a,this.publicKey=b}static async create(a,b,c=new Date(Date.now()+9e5),d={}){var e,f;let g=await K(a,b,c,d.targets);return new L([...(null==(e=d.previous)?void 0:e.delegations)||[],g],(null==(f=d.previous)?void 0:f.publicKey)||a.getPublicKey().toDer())}static fromJSON(a){let{publicKey:b,delegations:c}="string"==typeof a?JSON.parse(a):a;if(!Array.isArray(c))throw Error("Invalid delegations.");return new this(c.map(a=>{let{delegation:b,signature:c}=a,{pubkey:d,expiration:e,targets:f}=b;if(void 0!==f&&!Array.isArray(f))throw Error("Invalid targets.");return{delegation:new J(I(d),BigInt("0x"+e),f&&f.map(a=>{if("string"!=typeof a)throw Error("Invalid target.");return x.p.fromHex(a)})),signature:I(c)}}),I(b))}static fromDelegations(a,b){return new this(a,b)}toJSON(){return{delegations:this.delegations.map(a=>{let{delegation:b,signature:c}=a,{targets:d}=b;return{delegation:Object.assign({expiration:b.expiration.toString(16),pubkey:(0,n.nj)(b.pubkey)},d&&{targets:d.map(a=>a.toHex())}),signature:(0,n.nj)(c)}}),publicKey:(0,n.nj)(this.publicKey)}}}class M extends n.A4{constructor(a,b){super(),this._inner=a,this._delegation=b}static fromDelegation(a,b){return new this(a,b)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(a){return this._inner.sign(a)}async transformRequest(a){let{body:b}=a,c=F(a,["body"]),d=await (0,n.Gb)(b);return Object.assign(Object.assign({},c),{body:{content:b,sender_sig:await this.sign((0,C.em)(new Uint8Array([...H,...new Uint8Array(d)]))),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}class N extends B{constructor(a,b){super(a),k.set(this,void 0),D(this,k,b,"f")}get delegation(){return E(this,k,"f")}static fromDelegation(a,b){return new N(a,b)}}k=new WeakMap,c(16355);c(90113);!function(a){a[a.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"}(l||(l={})),n.A4;let O=["mousedown","mousemove","keydown","touchstart","wheel"];class P{constructor(a={}){var b;this.callbacks=[],this.idleTimeout=6e5,this.timeoutID=void 0;let{onIdle:c,idleTimeout:d=6e5}=a||{};this.callbacks=c?[c]:[],this.idleTimeout=d;let e=this._resetTimer.bind(this);window.addEventListener("load",e,!0),O.forEach(function(a){document.addEventListener(a,e,!0)});let f=(a,b)=>{let c;return(...d)=>{let e=this;clearTimeout(c),c=window.setTimeout(function(){c=void 0,a.apply(e,d)},b)}};if(null==a?void 0:a.captureScroll){let c=f(e,null!=(b=null==a?void 0:a.scrollDebounce)?b:100);window.addEventListener("scroll",c,!0)}e()}static create(a={}){return new this(a)}registerCallback(a){this.callbacks.push(a)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);let a=this._resetTimer.bind(this);O.forEach(function(b){document.removeEventListener(b,a,!0)}),this.callbacks.forEach(a=>a())}_resetTimer(){let a=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(a,this.idleTimeout)}}let Q=new WeakMap,R=new WeakMap,S=new WeakMap,T=new WeakMap,U=new WeakMap,V={get(a,b,c){if(a instanceof IDBTransaction){if("done"===b)return R.get(a);if("objectStoreNames"===b)return a.objectStoreNames||S.get(a);if("store"===b)return c.objectStoreNames[1]?void 0:c.objectStore(c.objectStoreNames[0])}return W(a[b])},set:(a,b,c)=>(a[b]=c,!0),has:(a,b)=>a instanceof IDBTransaction&&("done"===b||"store"===b)||b in a};function W(a){if(a instanceof IDBRequest){let b=new Promise((b,c)=>{let d=()=>{a.removeEventListener("success",e),a.removeEventListener("error",f)},e=()=>{b(W(a.result)),d()},f=()=>{c(a.error),d()};a.addEventListener("success",e),a.addEventListener("error",f)});return b.then(b=>{b instanceof IDBCursor&&Q.set(b,a)}).catch(()=>{}),U.set(b,a),b}if(T.has(a))return T.get(a);let b=function(a){if("function"==typeof a)return a!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(e||(e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(a)?function(...b){return a.apply(X(this),b),W(Q.get(this))}:function(...b){return W(a.apply(X(this),b))}:function(b,...c){let d=a.call(X(this),b,...c);return S.set(d,b.sort?b.sort():[b]),W(d)};return a instanceof IDBTransaction&&function(a){if(R.has(a))return;let b=new Promise((b,c)=>{let d=()=>{a.removeEventListener("complete",e),a.removeEventListener("error",f),a.removeEventListener("abort",f)},e=()=>{b(),d()},f=()=>{c(a.error||new DOMException("AbortError","AbortError")),d()};a.addEventListener("complete",e),a.addEventListener("error",f),a.addEventListener("abort",f)});R.set(a,b)}(a),(d||(d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(b=>a instanceof b)?new Proxy(a,V):a}(a);return b!==a&&(T.set(a,b),U.set(b,a)),b}let X=a=>U.get(a),Y=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],$=new Map;function _(a,b){if(!(a instanceof IDBDatabase&&!(b in a)&&"string"==typeof b))return;if($.get(b))return $.get(b);let c=b.replace(/FromIndex$/,""),d=b!==c,e=Z.includes(c);if(!(c in(d?IDBIndex:IDBObjectStore).prototype)||!(e||Y.includes(c)))return;let f=async function(a,...b){let f=this.transaction(a,e?"readwrite":"readonly"),g=f.store;return d&&(g=g.index(b.shift())),(await Promise.all([g[c](...b),e&&f.done]))[0]};return $.set(b,f),f}V=(a=>({...a,get:(b,c,d)=>_(b,c)||a.get(b,c,d),has:(b,c)=>!!_(b,c)||a.has(b,c)}))(V);let aa="auth-client-db",ab="ic-keyval",ac=async(a=aa,b=ab,c)=>(am&&(null==localStorage?void 0:localStorage.getItem(ak))&&(localStorage.removeItem(ak),localStorage.removeItem(aj)),await function(a,b,{blocked:c,upgrade:d,blocking:e,terminated:f}={}){let g=indexedDB.open(a,b),h=W(g);return d&&g.addEventListener("upgradeneeded",a=>{d(W(g.result),a.oldVersion,a.newVersion,W(g.transaction),a)}),c&&g.addEventListener("blocked",a=>c(a.oldVersion,a.newVersion,a)),h.then(a=>{f&&a.addEventListener("close",()=>f()),e&&a.addEventListener("versionchange",a=>e(a.oldVersion,a.newVersion,a))}).catch(()=>{}),h}(a,c,{upgrade:a=>{a.objectStoreNames.contains(b)&&a.clear(b),a.createObjectStore(b)}}));async function ad(a,b,c){return await a.get(b,c)}async function ae(a,b,c,d){return await a.put(b,d,c)}async function af(a,b,c){return await a.delete(b,c)}class ag{constructor(a,b){this._db=a,this._storeName=b}static async create(a){let{dbName:b=aa,storeName:c=ab,version:d=al}=null!=a?a:{};return new ag(await ac(b,c,d),c)}async set(a,b){return await ae(this._db,this._storeName,a,b)}async get(a){var b;return null!=(b=await ad(this._db,this._storeName,a))?b:null}async remove(a){return await af(this._db,this._storeName,a)}}var ah=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},ai=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};let aj="identity",ak="delegation",al=1,am="undefined"!=typeof window;class an{constructor(a="ic-",b){this.prefix=a,this._localStorage=b}get(a){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+a))}set(a,b){return this._getLocalStorage().setItem(this.prefix+a,b),Promise.resolve()}remove(a){return this._getLocalStorage().removeItem(this.prefix+a),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;let a="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?void 0:self.localStorage:global.localStorage:window.localStorage;if(!a)throw Error("Could not find local storage.");return a}}class ao{constructor(a){m.set(this,void 0),ah(this,m,null!=a?a:{},"f")}get _db(){return new Promise(a=>{if(this.initializedDb)return void a(this.initializedDb);ag.create(ai(this,m,"f")).then(b=>{this.initializedDb=b,a(b)})})}async get(a){let b=await this._db;return await b.get(a)}async set(a,b){let c=await this._db;await c.set(a,b)}async remove(a){let b=await this._db;await b.remove(a)}}m=new WeakMap;let ap="ECDSA",aq="Ed25519";class ar{constructor(a,b,c,d,e,f,g,h){this._identity=a,this._key=b,this._chain=c,this._storage=d,this.idleManager=e,this._createOptions=f,this._idpWindow=g,this._eventHandler=h,this._registerDefaultIdleCallback()}static async create(a={}){var b,c,d;let e,f=null!=(b=a.storage)?b:new ao,g=null!=(c=a.keyType)?c:ap,h=null;if(a.identity)h=a.identity;else{let a=await f.get(aj);if(!a&&am)try{let b=new an,c=await b.get(ak),d=await b.get(aj);c&&d&&g===ap&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await f.set(ak,c),await f.set(aj,d),a=c,await b.remove(ak),await b.remove(aj))}catch(a){console.error("error while attempting to recover localstorage: "+a)}if(a)try{"object"==typeof a?h=g===aq&&"string"==typeof a?await t.fromJSON(a):await w.fromKeyPair(a):"string"==typeof a&&(h=t.fromJSON(a))}catch(a){}}let i=new n.mC,j=null;if(h)try{let b=await f.get(ak);if("object"==typeof b&&null!==b)throw Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");a.identity?i=a.identity:b&&(j=L.fromJSON(b),function(a,b){for(let{delegation:b}of a.delegations)if(+new Date(Number(b.expiration/BigInt(1e6)))<=+Date.now())return!1;let c=[],d=void 0;for(let b of(d&&(Array.isArray(d)?c.push(...d.map(a=>"string"==typeof a?x.p.fromText(a):a)):c.push("string"==typeof d?x.p.fromText(d):d)),c)){let c=b.toText();for(let{delegation:b}of a.delegations){if(void 0===b.targets)continue;let a=!0;for(let d of b.targets)if(d.toText()===c){a=!1;break}if(a)return!1}}return!0}(j)?i="toDer"in h?N.fromDelegation(h,j):M.fromDelegation(h,j):(await as(f),h=null))}catch(a){console.error(a),await as(f),h=null}return(null==(d=a.idleOptions)?void 0:d.disableIdle)?e=void 0:(j||a.identity)&&(e=P.create(a.idleOptions)),h||(g===aq?(h=await t.generate(),await f.set(aj,JSON.stringify(h.toJSON()))):(a.storage&&g===ap&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${aq}' as the key type, as it can serialize to a string`),h=await w.generate(),await f.set(aj,h.getKeyPair()))),new this(i,h,j,f,e,a)}_registerDefaultIdleCallback(){var a,b;let c=null==(a=this._createOptions)?void 0:a.idleOptions;(null==c?void 0:c.onIdle)||(null==c?void 0:c.disableDefaultIdleCallback)||null==(b=this.idleManager)||b.registerCallback(()=>{this.logout(),location.reload()})}async _handleSuccess(a,b){var c,d;let e=a.delegations.map(a=>({delegation:new J(a.delegation.pubkey,a.delegation.expiration,a.delegation.targets),signature:a.signature.buffer})),f=L.fromDelegations(e,a.userPublicKey.buffer),g=this._key;if(!g)return;this._chain=f,"toDer"in g?this._identity=N.fromDelegation(g,this._chain):this._identity=M.fromDelegation(g,this._chain),null==(c=this._idpWindow)||c.close();let h=null==(d=this._createOptions)?void 0:d.idleOptions;this.idleManager||(null==h?void 0:h.disableIdle)||(this.idleManager=P.create(h),this._registerDefaultIdleCallback()),this._removeEventListener(),delete this._idpWindow,this._chain&&await this._storage.set(ak,JSON.stringify(this._chain.toJSON())),null==b||b(a)}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&null!==this._chain}async login(a){var b,c,d,e;let f=BigInt(8)*BigInt(36e11),g=new URL((null==(b=null==a?void 0:a.identityProvider)?void 0:b.toString())||"https://identity.internetcomputer.org");g.hash="#authorize",null==(c=this._idpWindow)||c.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(g,Object.assign({maxTimeToLive:null!=(d=null==a?void 0:a.maxTimeToLive)?d:f},a)),window.addEventListener("message",this._eventHandler),this._idpWindow=null!=(e=window.open(g.toString(),"idpWindow",null==a?void 0:a.windowOpenerFeatures))?e:void 0;let h=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure("UserInterrupt",null==a?void 0:a.onError):setTimeout(h,500))};h()}_getEventHandler(a,b){return async c=>{var d,e,f;if(c.origin!==a.origin)return;let g=c.data;switch(g.kind){case"authorize-ready":{let c=Object.assign({kind:"authorize-client",sessionPublicKey:new Uint8Array(null==(d=this._key)?void 0:d.getPublicKey().toDer()),maxTimeToLive:null==b?void 0:b.maxTimeToLive,allowPinAuthentication:null==b?void 0:b.allowPinAuthentication,derivationOrigin:null==(e=null==b?void 0:b.derivationOrigin)?void 0:e.toString()},null==b?void 0:b.customValues);null==(f=this._idpWindow)||f.postMessage(c,a.origin);break}case"authorize-client-success":try{await this._handleSuccess(g,null==b?void 0:b.onSuccess)}catch(a){this._handleFailure(a.message,null==b?void 0:b.onError)}break;case"authorize-client-failure":this._handleFailure(g.text,null==b?void 0:b.onError)}}}_handleFailure(a,b){var c;null==(c=this._idpWindow)||c.close(),null==b||b(a),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(a={}){if(await as(this._storage),this._identity=new n.mC,this._chain=null,a.returnTo)try{window.history.pushState({},"",a.returnTo)}catch(b){window.location.href=a.returnTo}}}async function as(a){await a.remove(aj),await a.remove(ak),await a.remove("iv")}},64014:(a,b,c)=>{"use strict";c.d(b,{D0:()=>C,Tp:()=>E,dQ:()=>w,f4:()=>z,jr:()=>y,pS:()=>A,qy:()=>F,tB:()=>B,zH:()=>q,zi:()=>p});var d=c(86900),e=c(90113);let f=BigInt(0),g=BigInt(1),h=BigInt(2),i=BigInt(3),j=BigInt(4),k=BigInt(5),l=BigInt(7),m=BigInt(8),n=BigInt(9),o=BigInt(16);function p(a,b){let c=a%b;return c>=f?c:b+c}function q(a,b,c){let d=a;for(;b-- >f;)d*=d,d%=c;return d}function r(a,b){if(a===f)throw Error("invert: expected non-zero number");if(b<=f)throw Error("invert: expected positive modulus, got "+b);let c=p(a,b),d=b,e=f,h=g,i=g,j=f;for(;c!==f;){let a=d/c,b=d%c,f=e-i*a,g=h-j*a;d=c,c=b,e=i,h=j,i=f,j=g}if(d!==g)throw Error("invert: does not exist");return p(e,b)}function s(a,b,c){if(!a.eql(a.sqr(b),c))throw Error("Cannot find square root")}function t(a,b){let c=(a.ORDER+g)/j,d=a.pow(b,c);return s(a,d,b),d}function u(a,b){let c=(a.ORDER-k)/m,d=a.mul(b,h),e=a.pow(d,c),f=a.mul(b,e),g=a.mul(a.mul(f,h),e),i=a.mul(f,a.sub(g,a.ONE));return s(a,i,b),i}function v(a){if(a<i)throw Error("sqrt is not defined for small field");let b=a-g,c=0;for(;b%h===f;)b/=h,c++;let d=h,e=C(a);for(;1===B(e,d);)if(d++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===c)return t;let j=e.pow(d,b),k=(b+g)/h;return function(a,d){if(a.is0(d))return d;if(1!==B(a,d))throw Error("Cannot find square root");let e=c,f=a.mul(a.ONE,j),h=a.pow(d,b),i=a.pow(d,k);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let b=1,c=a.sqr(h);for(;!a.eql(c,a.ONE);)if(b++,c=a.sqr(c),b===e)throw Error("Cannot find square root");let d=g<<BigInt(e-b-1),j=a.pow(f,d);e=b,f=a.sqr(j),h=a.mul(h,f),i=a.mul(i,j)}return i}}let w=(a,b)=>(p(a,b)&g)===g,x=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(a){let b=x.reduce((a,b)=>(a[b]="function",a),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"});return(0,d.DS)(a,b),a}function z(a,b,c){if(c<f)throw Error("invalid exponent, negatives unsupported");if(c===f)return a.ONE;if(c===g)return b;let d=a.ONE,e=b;for(;c>f;)c&g&&(d=a.mul(d,e)),e=a.sqr(e),c>>=g;return d}function A(a,b,c=!1){let d=Array(b.length).fill(c?a.ZERO:void 0),e=b.reduce((b,c,e)=>a.is0(c)?b:(d[e]=b,a.mul(b,c)),a.ONE),f=a.inv(e);return b.reduceRight((b,c,e)=>a.is0(c)?b:(d[e]=a.mul(b,d[e]),a.mul(b,c)),f),d}function B(a,b){let c=(a.ORDER-g)/h,d=a.pow(b,c),e=a.eql(d,a.ONE),f=a.eql(d,a.ZERO),i=a.eql(d,a.neg(a.ONE));if(!e&&!f&&!i)throw Error("invalid Legendre symbol result");return e?1:f?0:-1}function C(a,b,c=!1,h={}){let q,w,x,y;if(a<=f)throw Error("invalid field: expected ORDER > 0, got "+a);let B=!1;if("object"==typeof b&&null!=b){if(h.sqrt||c)throw Error("cannot specify opts in two arguments");b.BITS&&(w=b.BITS),b.sqrt&&(x=b.sqrt),"boolean"==typeof b.isLE&&(c=b.isLE),"boolean"==typeof b.modOnDecode&&(B=b.modOnDecode),y=b.allowedLengths}else"number"==typeof b&&(w=b),h.sqrt&&(x=h.sqrt);let{nBitLength:D,nByteLength:E}=function(a,b){void 0!==b&&(0,e.Fe)(b);let c=void 0!==b?b:a.toString(2).length,d=Math.ceil(c/8);return{nBitLength:c,nByteLength:d}}(a,w);if(E>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let F=Object.freeze({ORDER:a,isLE:c,BITS:D,BYTES:E,MASK:(0,d.OG)(D),ZERO:f,ONE:g,allowedLengths:y,create:b=>p(b,a),isValid:b=>{if("bigint"!=typeof b)throw Error("invalid field element: expected bigint, got "+typeof b);return f<=b&&b<a},is0:a=>a===f,isValidNot0:a=>!F.is0(a)&&F.isValid(a),isOdd:a=>(a&g)===g,neg:b=>p(-b,a),eql:(a,b)=>a===b,sqr:b=>p(b*b,a),add:(b,c)=>p(b+c,a),sub:(b,c)=>p(b-c,a),mul:(b,c)=>p(b*c,a),pow:(a,b)=>z(F,a,b),div:(b,c)=>p(b*r(c,a),a),sqrN:a=>a*a,addN:(a,b)=>a+b,subN:(a,b)=>a-b,mulN:(a,b)=>a*b,inv:b=>r(b,a),sqrt:x||(b=>(q||(q=a%j===i?t:a%m===k?u:a%o===n?function(a){let b=C(a),c=v(a),d=c(b,b.neg(b.ONE)),e=c(b,d),f=c(b,b.neg(d)),g=(a+l)/o;return(a,b)=>{let c=a.pow(b,g),h=a.mul(c,d),i=a.mul(c,e),j=a.mul(c,f),k=a.eql(a.sqr(h),b),l=a.eql(a.sqr(i),b);c=a.cmov(c,h,k),h=a.cmov(j,i,l);let m=a.eql(a.sqr(h),b),n=a.cmov(c,h,m);return s(a,n,b),n}}(a):v(a)),q(F,b))),toBytes:a=>c?(0,d.z)(a,E):(0,d.lq)(a,E),fromBytes:(b,e=!0)=>{if(y){if(!y.includes(b.length)||b.length>E)throw Error("Field.fromBytes: expected "+y+" bytes, got "+b.length);let a=new Uint8Array(E);a.set(b,c?0:a.length-b.length),b=a}if(b.length!==E)throw Error("Field.fromBytes: expected "+E+" bytes, got "+b.length);let f=c?(0,d.lX)(b):(0,d.Ph)(b);if(B&&(f=p(f,a)),!e&&!F.isValid(f))throw Error("invalid field element: outside of range 0..ORDER");return f},invertBatch:a=>A(F,a),cmov:(a,b,c)=>c?b:a});return Object.freeze(F)}function D(a){if("bigint"!=typeof a)throw Error("field order must be bigint");return Math.ceil(a.toString(2).length/8)}function E(a){let b=D(a);return b+Math.ceil(b/2)}function F(a,b,c=!1){let e=a.length,f=D(b),h=E(b);if(e<16||e<h||e>1024)throw Error("expected "+h+"-1024 bytes of input, got "+e);let i=p(c?(0,d.lX)(a):(0,d.Ph)(a),b-g)+g;return c?(0,d.z)(i,f):(0,d.lq)(i,f)}},65689:(a,b,c)=>{"use strict";c.d(b,{p:()=>i});let d="abcdefghijklmnopqrstuvwxyz234567",e=Object.create(null);for(let a=0;a<d.length;a++)e[d[a]]=a;e["0"]=e.o,e["1"]=e.i;let f=new Uint32Array([0,0x77073096,0xee0e612c,0x990951ba,0x76dc419,0x706af48f,0xe963a535,0x9e6495a3,0xedb8832,0x79dcb8a4,0xe0d5e91e,0x97d2d988,0x9b64c2b,0x7eb17cbd,0xe7b82d07,0x90bf1d91,0x1db71064,0x6ab020f2,0xf3b97148,0x84be41de,0x1adad47d,0x6ddde4eb,0xf4d4b551,0x83d385c7,0x136c9856,0x646ba8c0,0xfd62f97a,0x8a65c9ec,0x14015c4f,0x63066cd9,0xfa0f3d63,0x8d080df5,0x3b6e20c8,0x4c69105e,0xd56041e4,0xa2677172,0x3c03e4d1,0x4b04d447,0xd20d85fd,0xa50ab56b,0x35b5a8fa,0x42b2986c,0xdbbbc9d6,0xacbcf940,0x32d86ce3,0x45df5c75,0xdcd60dcf,0xabd13d59,0x26d930ac,0x51de003a,0xc8d75180,0xbfd06116,0x21b4f4b5,0x56b3c423,0xcfba9599,0xb8bda50f,0x2802b89e,0x5f058808,0xc60cd9b2,0xb10be924,0x2f6f7c87,0x58684c11,0xc1611dab,0xb6662d3d,0x76dc4190,0x1db7106,0x98d220bc,0xefd5102a,0x71b18589,0x6b6b51f,0x9fbfe4a5,0xe8b8d433,0x7807c9a2,0xf00f934,0x9609a88e,0xe10e9818,0x7f6a0dbb,0x86d3d2d,0x91646c97,0xe6635c01,0x6b6b51f4,0x1c6c6162,0x856530d8,0xf262004e,0x6c0695ed,0x1b01a57b,0x8208f4c1,0xf50fc457,0x65b0d9c6,0x12b7e950,0x8bbeb8ea,0xfcb9887c,0x62dd1ddf,0x15da2d49,0x8cd37cf3,0xfbd44c65,0x4db26158,0x3ab551ce,0xa3bc0074,0xd4bb30e2,0x4adfa541,0x3dd895d7,0xa4d1c46d,0xd3d6f4fb,0x4369e96a,0x346ed9fc,0xad678846,0xda60b8d0,0x44042d73,0x33031de5,0xaa0a4c5f,0xdd0d7cc9,0x5005713c,0x270241aa,0xbe0b1010,0xc90c2086,0x5768b525,0x206f85b3,0xb966d409,0xce61e49f,0x5edef90e,0x29d9c998,0xb0d09822,0xc7d7a8b4,0x59b33d17,0x2eb40d81,0xb7bd5c3b,0xc0ba6cad,0xedb88320,0x9abfb3b6,0x3b6e20c,0x74b1d29a,0xead54739,0x9dd277af,0x4db2615,0x73dc1683,0xe3630b12,0x94643b84,0xd6d6a3e,0x7a6a5aa8,0xe40ecf0b,0x9309ff9d,0xa00ae27,0x7d079eb1,0xf00f9344,0x8708a3d2,0x1e01f268,0x6906c2fe,0xf762575d,0x806567cb,0x196c3671,0x6e6b06e7,0xfed41b76,0x89d32be0,0x10da7a5a,0x67dd4acc,0xf9b9df6f,0x8ebeeff9,0x17b7be43,0x60b08ed5,0xd6d6a3e8,0xa1d1937e,0x38d8c2c4,0x4fdff252,0xd1bb67f1,0xa6bc5767,0x3fb506dd,0x48b2364b,0xd80d2bda,0xaf0a1b4c,0x36034af6,0x41047a60,0xdf60efc3,0xa867df55,0x316e8eef,0x4669be79,0xcb61b38c,0xbc66831a,0x256fd2a0,0x5268e236,0xcc0c7795,0xbb0b4703,0x220216b9,0x5505262f,0xc5ba3bbe,0xb2bd0b28,0x2bb45a92,0x5cb36a04,0xc2d7ffa7,0xb5d0cf31,0x2cd99e8b,0x5bdeae1d,0x9b64c2b0,0xec63f226,0x756aa39c,0x26d930a,0x9c0906a9,0xeb0e363f,0x72076785,0x5005713,0x95bf4a82,0xe2b87a14,0x7bb12bae,0xcb61b38,0x92d28e9b,0xe5d5be0d,0x7cdcefb7,0xbdbdf21,0x86d3d2d4,0xf1d4e242,0x68ddb3f8,0x1fda836e,0x81be16cd,0xf6b9265b,0x6fb077e1,0x18b74777,0x88085ae6,0xff0f6a70,0x66063bca,0x11010b5c,0x8f659eff,0xf862ae69,0x616bffd3,0x166ccf45,0xa00ae278,0xd70dd2ee,0x4e048354,0x3903b3c2,0xa7672661,0xd06016f7,0x4969474d,0x3e6e77db,0xaed16a4a,0xd9d65adc,0x40df0b66,936918e3,0xa9bcae53,0xdebb9ec5,0x47b2cf7f,0x30b5ffe9,0xbdbdf21c,0xcabac28a,0x53b39330,0x24b4a3a6,0xbad03605,0xcdd70693,0x54de5729,0x23d967bf,0xb3667a2e,0xc4614ab8,0x5d681b02,0x2a6f2b94,0xb40bbe37,0xc30c8ea1,0x5a05df1b,0x2d02ef8d]);var g=c(12362);let h="__principal__";class i{constructor(a){this._arr=a,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([4]))}static managementCanister(){return this.fromText("aaaaa-aa")}static selfAuthenticating(a){let b=g.ZT.create().update(new Uint8Array(a)).digest();return new this(new Uint8Array([...b,2]))}static from(a){if("string"==typeof a)return i.fromText(a);if(Object.getPrototypeOf(a)===Uint8Array.prototype)return new i(a);if("object"==typeof a&&null!==a&&!0===a._isPrincipal)return new i(a._arr);throw Error(`Impossible to convert ${JSON.stringify(a)} to Principal.`)}static fromHex(a){var b;return new this(new Uint8Array((null!=(b=a.match(/.{1,2}/g))?b:[]).map(a=>parseInt(a,16))))}static fromText(a){let b=a;if(a.includes(h)){let c=JSON.parse(a);h in c&&(b=c[h])}let c=function(a){let b=0,c=0,d=new Uint8Array(4*a.length/3|0),f=0;for(let g of a)!function(a){let g=e[a.toLowerCase()];if(void 0===g)throw Error(`Invalid character: ${JSON.stringify(a)}`);g<<=3,c|=g>>>b,(b+=5)>=8&&(d[f++]=c,b-=8,c=b>0?g<<5-b&255:0)}(g);return d.slice(0,f)}(b.toLowerCase().replace(/-/g,"")),d=new this(c=c.slice(4,c.length));if(d.toText()!==b)throw Error(`Principal "${d.toText()}" does not have a valid checksum (original value "${b}" may not be a valid Principal ID).`);return d}static fromUint8Array(a){return new this(a)}isAnonymous(){return 1===this._arr.byteLength&&4===this._arr[0]}toUint8Array(){return this._arr}toHex(){return this._arr.reduce((a,b)=>a+b.toString(16).padStart(2,"0"),"").toUpperCase()}toText(){let a=new ArrayBuffer(4);new DataView(a).setUint32(0,function(a){let b=new Uint8Array(a),c=-1;for(let a=0;a<b.length;a++)c=f[(b[a]^c)&255]^c>>>8;return(-1^c)>>>0}(this._arr));let b=new Uint8Array(a),c=Uint8Array.from(this._arr),e=(function(a){let b=0,c=0,e="";for(let g=0;g<a.length;){var f;g+=(f=a[g],(b<0?c|=f>>-b:c=f<<b&248,b>3)?(b-=8,1):(b<4&&(e+=d[c>>3],b+=5),0))}return e+(b<0?d[c>>3]:"")})(new Uint8Array([...b,...c])).match(/.{1,5}/g);if(!e)throw Error();return e.join("-")}toString(){return this.toText()}toJSON(){return{[h]:this.toText()}}compareTo(a){for(let b=0;b<Math.min(this._arr.length,a._arr.length);b++)if(this._arr[b]<a._arr[b])return"lt";else if(this._arr[b]>a._arr[b])return"gt";return this._arr.length<a._arr.length?"lt":this._arr.length>a._arr.length?"gt":"eq"}ltEq(a){let b=this.compareTo(a);return"lt"==b||"eq"==b}gtEq(a){let b=this.compareTo(a);return"gt"==b||"eq"==b}}},65962:(a,b,c)=>{"use strict";c.d(b,{qB:()=>f.qB,GZ:()=>f.GZ,RK:()=>e.R,BY:()=>f.BY,i8:()=>g});var d,e=c(46005),f=c(91248);function g(){let a="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!a)throw Error("No Agent could be found.");return a}c(81195),c(65689),function(a){a.Error="err",a.GetPrincipal="gp",a.GetPrincipalResponse="gpr",a.Query="q",a.QueryResponse="qr",a.Call="c",a.CallResponse="cr",a.ReadState="rs",a.ReadStateResponse="rsr",a.Status="s",a.StatusResponse="sr"}(d||(d={}))},66221:function(a,b,c){var d;!function(e){"use strict";var f,g=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,h=Math.ceil,i=Math.floor,j="[BigNumber Error] ",k=j+"Number primitive has more than 15 significant digits: ",l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function m(a){var b=0|a;return a>0||a===b?b:b-1}function n(a){for(var b,c,d=1,e=a.length,f=a[0]+"";d<e;){for(c=14-(b=a[d++]+"").length;c--;b="0"+b);f+=b}for(e=f.length;48===f.charCodeAt(--e););return f.slice(0,e+1||1)}function o(a,b){var c,d,e=a.c,f=b.c,g=a.s,h=b.s,i=a.e,j=b.e;if(!g||!h)return null;if(c=e&&!e[0],d=f&&!f[0],c||d)return c?d?0:-h:g;if(g!=h)return g;if(c=g<0,d=i==j,!e||!f)return d?0:!e^c?1:-1;if(!d)return i>j^c?1:-1;for(g=0,h=(i=e.length)<(j=f.length)?i:j;g<h;g++)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1}function p(a,b,c,d){if(a<b||a>c||a!==i(a))throw Error(j+(d||"Argument")+("number"==typeof a?a<b||a>c?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function q(a){var b=a.c.length-1;return m(a.e/14)==b&&a.c[b]%2!=0}function r(a,b){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(b<0?"e":"e+")+b}function s(a,b,c){var d,e;if(b<0){for(e=c+".";++b;e+=c);a=e+a}else if(d=a.length,++b>d){for(e=c,b-=d;--b;e+=c);a+=e}else b<d&&(a=a.slice(0,b)+"."+a.slice(b));return a}(f=function a(b){var c,d,e,f,t,u,v,w,x,y=M.prototype={constructor:M,toString:null,valueOf:null},z=new M(1),A=20,B=4,C=-7,D=21,E=-1e7,F=1e7,G=!1,H=1,I=0,J={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",L=!0;function M(a,b){var c,d,e,f,h,j,l,m,n=this;if(!(n instanceof M))return new M(a,b);if(null==b){if(a&&!0===a._isBigNumber){n.s=a.s,!a.c||a.e>F?n.c=n.e=null:a.e<E?n.c=[n.e=0]:(n.e=a.e,n.c=a.c.slice());return}if((j="number"==typeof a)&&0*a==0){if(n.s=1/a<0?(a=-a,-1):1,a===~~a){for(f=0,h=a;h>=10;h/=10,f++);f>F?n.c=n.e=null:(n.e=f,n.c=[a]);return}m=String(a)}else{if(!g.test(m=String(a)))return x(n,m,j);n.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(f=m.indexOf("."))>-1&&(m=m.replace(".","")),(h=m.search(/e/i))>0?(f<0&&(f=h),f+=+m.slice(h+1),m=m.substring(0,h)):f<0&&(f=m.length)}else{if(p(b,2,K.length,"Base"),10==b&&L)return Q(n=new M(a),A+n.e+1,B);if(m=String(a),j="number"==typeof a){if(0*a!=0)return x(n,m,j,b);if(n.s=1/a<0?(m=m.slice(1),-1):1,M.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(k+a)}else n.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(c=K.slice(0,b),f=h=0,l=m.length;h<l;h++)if(0>c.indexOf(d=m.charAt(h))){if("."==d){if(h>f){f=l;continue}}else if(!e&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){e=!0,h=-1,f=0;continue}return x(n,String(a),j,b)}j=!1,(f=(m=w(m,b,10,n.s)).indexOf("."))>-1?m=m.replace(".",""):f=m.length}for(h=0;48===m.charCodeAt(h);h++);for(l=m.length;48===m.charCodeAt(--l););if(m=m.slice(h,++l)){if(l-=h,j&&M.DEBUG&&l>15&&(a>0x1fffffffffffff||a!==i(a)))throw Error(k+n.s*a);if((f=f-h-1)>F)n.c=n.e=null;else if(f<E)n.c=[n.e=0];else{if(n.e=f,n.c=[],h=(f+1)%14,f<0&&(h+=14),h<l){for(h&&n.c.push(+m.slice(0,h)),l-=14;h<l;)n.c.push(+m.slice(h,h+=14));h=14-(m=m.slice(h)).length}else h-=l;for(;h--;m+="0");n.c.push(+m)}}else n.c=[n.e=0]}function N(a,b,c,d){var e,f,g,h,i;if(null==c?c=B:p(c,0,8),!a.c)return a.toString();if(e=a.c[0],g=a.e,null==b)i=n(a.c),i=1==d||2==d&&(g<=C||g>=D)?r(i,g):s(i,g,"0");else if(f=(a=Q(new M(a),b,c)).e,h=(i=n(a.c)).length,1==d||2==d&&(b<=f||f<=C)){for(;h<b;i+="0",h++);i=r(i,f)}else if(b-=g+(2===d&&f>g),i=s(i,f,"0"),f+1>h){if(--b>0)for(i+=".";b--;i+="0");}else if((b+=f-h)>0)for(f+1==h&&(i+=".");b--;i+="0");return a.s<0&&e?"-"+i:i}function O(a,b){for(var c,d,e=1,f=new M(a[0]);e<a.length;e++)(d=new M(a[e])).s&&(c=o(f,d))!==b&&(0!==c||f.s!==b)||(f=d);return f}function P(a,b,c){for(var d=1,e=b.length;!b[--e];b.pop());for(e=b[0];e>=10;e/=10,d++);return(c=d+14*c-1)>F?a.c=a.e=null:c<E?a.c=[a.e=0]:(a.e=c,a.c=b),a}function Q(a,b,c,d){var e,f,g,j,k,m,n,o=a.c;if(o){a:{for(e=1,j=o[0];j>=10;j/=10,e++);if((f=b-e)<0)f+=14,g=b,n=i((k=o[m=0])/l[e-g-1]%10);else if((m=h((f+1)/14))>=o.length)if(d){for(;o.length<=m;o.push(0));k=n=0,e=1,f%=14,g=f-14+1}else break a;else{for(e=1,k=j=o[m];j>=10;j/=10,e++);f%=14,n=(g=f-14+e)<0?0:i(k/l[e-g-1]%10)}if(d=d||b<0||null!=o[m+1]||(g<0?k:k%l[e-g-1]),d=c<4?(n||d)&&(0==c||c==(a.s<0?3:2)):n>5||5==n&&(4==c||d||6==c&&(f>0?g>0?k/l[e-g]:0:o[m-1])%10&1||c==(a.s<0?8:7)),b<1||!o[0])return o.length=0,d?(b-=a.e+1,o[0]=l[(14-b%14)%14],a.e=-b||0):o[0]=a.e=0,a;if(0==f?(o.length=m,j=1,m--):(o.length=m+1,j=l[14-f],o[m]=g>0?i(k/l[e-g]%l[g])*j:0),d)for(;;)if(0==m){for(f=1,g=o[0];g>=10;g/=10,f++);for(g=o[0]+=j,j=1;g>=10;g/=10,j++);f!=j&&(a.e++,1e14==o[0]&&(o[0]=1));break}else{if(o[m]+=j,1e14!=o[m])break;o[m--]=0,j=1}for(f=o.length;0===o[--f];o.pop());}a.e>F?a.c=a.e=null:a.e<E&&(a.c=[a.e=0])}return a}function R(a){var b,c=a.e;return null===c?a.toString():(b=n(a.c),b=c<=C||c>=D?r(b,c):s(b,c,"0"),a.s<0?"-"+b:b)}return M.clone=a,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(a){var b,c;if(null!=a)if("object"==typeof a){if(a.hasOwnProperty(b="DECIMAL_PLACES")&&(p(c=a[b],0,1e9,b),A=c),a.hasOwnProperty(b="ROUNDING_MODE")&&(p(c=a[b],0,8,b),B=c),a.hasOwnProperty(b="EXPONENTIAL_AT")&&((c=a[b])&&c.pop?(p(c[0],-1e9,0,b),p(c[1],0,1e9,b),C=c[0],D=c[1]):(p(c,-1e9,1e9,b),C=-(D=c<0?-c:c))),a.hasOwnProperty(b="RANGE"))if((c=a[b])&&c.pop)p(c[0],-1e9,-1,b),p(c[1],1,1e9,b),E=c[0],F=c[1];else if(p(c,-1e9,1e9,b),c)E=-(F=c<0?-c:c);else throw Error(j+b+" cannot be zero: "+c);if(a.hasOwnProperty(b="CRYPTO"))if(!!(c=a[b])===c)if(c)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))G=c;else throw G=!c,Error(j+"crypto unavailable");else G=c;else throw Error(j+b+" not true or false: "+c);if(a.hasOwnProperty(b="MODULO_MODE")&&(p(c=a[b],0,9,b),H=c),a.hasOwnProperty(b="POW_PRECISION")&&(p(c=a[b],0,1e9,b),I=c),a.hasOwnProperty(b="FORMAT"))if("object"==typeof(c=a[b]))J=c;else throw Error(j+b+" not an object: "+c);if(a.hasOwnProperty(b="ALPHABET")){if("string"!=typeof(c=a[b])||/^.?$|[+\-.\s]|(.).*\1/.test(c))throw Error(j+b+" invalid: "+c);L="0123456789"==c.slice(0,10),K=c}}else throw Error(j+"Object expected: "+a);return{DECIMAL_PLACES:A,ROUNDING_MODE:B,EXPONENTIAL_AT:[C,D],RANGE:[E,F],CRYPTO:G,MODULO_MODE:H,POW_PRECISION:I,FORMAT:J,ALPHABET:K}},M.isBigNumber=function(a){if(!a||!0!==a._isBigNumber)return!1;if(!M.DEBUG)return!0;var b,c,d=a.c,e=a.e,f=a.s;a:if("[object Array]"==({}).toString.call(d)){if((1===f||-1===f)&&e>=-1e9&&e<=1e9&&e===i(e)){if(0===d[0]){if(0===e&&1===d.length)return!0;break a}if((b=(e+1)%14)<1&&(b+=14),String(d[0]).length==b){for(b=0;b<d.length;b++)if((c=d[b])<0||c>=1e14||c!==i(c))break a;if(0!==c)return!0}}}else if(null===d&&null===e&&(null===f||1===f||-1===f))return!0;throw Error(j+"Invalid BigNumber: "+a)},M.maximum=M.max=function(){return O(arguments,-1)},M.minimum=M.min=function(){return O(arguments,1)},c=0x20000000000000*Math.random()&2097151?function(){return i(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},M.random=function(a){var b,d,e,f,g,k=0,m=[],n=new M(z);if(null==a?a=A:p(a,0,1e9),f=h(a/14),G)if(crypto.getRandomValues){for(b=crypto.getRandomValues(new Uint32Array(f*=2));k<f;)(g=131072*b[k]+(b[k+1]>>>11))>=9e15?(d=crypto.getRandomValues(new Uint32Array(2)),b[k]=d[0],b[k+1]=d[1]):(m.push(g%1e14),k+=2);k=f/2}else if(crypto.randomBytes){for(b=crypto.randomBytes(f*=7);k<f;)(g=(31&b[k])*0x1000000000000+0x10000000000*b[k+1]+0x100000000*b[k+2]+0x1000000*b[k+3]+(b[k+4]<<16)+(b[k+5]<<8)+b[k+6])>=9e15?crypto.randomBytes(7).copy(b,k):(m.push(g%1e14),k+=7);k=f/7}else throw G=!1,Error(j+"crypto unavailable");if(!G)for(;k<f;)(g=c())<9e15&&(m[k++]=g%1e14);for(f=m[--k],a%=14,f&&a&&(g=l[14-a],m[k]=i(f/g)*g);0===m[k];m.pop(),k--);if(k<0)m=[e=0];else{for(e=-1;0===m[0];m.splice(0,1),e-=14);for(k=1,g=m[0];g>=10;g/=10,k++);k<14&&(e-=14-k)}return n.e=e,n.c=m,n},M.sum=function(){for(var a=1,b=arguments,c=new M(b[0]);a<b.length;)c=c.plus(b[a++]);return c},w=function(){var a="0123456789";function b(a,b,c,d){for(var e,f,g=[0],h=0,i=a.length;h<i;){for(f=g.length;f--;g[f]*=b);for(g[0]+=d.indexOf(a.charAt(h++)),e=0;e<g.length;e++)g[e]>c-1&&(null==g[e+1]&&(g[e+1]=0),g[e+1]+=g[e]/c|0,g[e]%=c)}return g.reverse()}return function(c,d,e,f,g){var h,i,j,k,l,m,o,p,q=c.indexOf("."),r=A,t=B;for(q>=0&&(k=I,I=0,c=c.replace(".",""),m=(p=new M(d)).pow(c.length-q),I=k,p.c=b(s(n(m.c),m.e,"0"),10,e,a),p.e=p.c.length),j=k=(o=b(c,d,e,g?(h=K,a):(h=a,K))).length;0==o[--k];o.pop());if(!o[0])return h.charAt(0);if(q<0?--j:(m.c=o,m.e=j,m.s=f,o=(m=v(m,p,r,t,e)).c,l=m.r,j=m.e),q=o[i=j+r+1],k=e/2,l=l||i<0||null!=o[i+1],l=t<4?(null!=q||l)&&(0==t||t==(m.s<0?3:2)):q>k||q==k&&(4==t||l||6==t&&1&o[i-1]||t==(m.s<0?8:7)),i<1||!o[0])c=l?s(h.charAt(1),-r,h.charAt(0)):h.charAt(0);else{if(o.length=i,l)for(--e;++o[--i]>e;)o[i]=0,i||(++j,o=[1].concat(o));for(k=o.length;!o[--k];);for(q=0,c="";q<=k;c+=h.charAt(o[q++]));c=s(c,j,h.charAt(0))}return c}}(),v=function(){function a(a,b,c){var d,e,f,g,h=0,i=a.length,j=b%1e7,k=b/1e7|0;for(a=a.slice();i--;)d=k*(f=a[i]%1e7)+(g=a[i]/1e7|0)*j,h=((e=j*f+d%1e7*1e7+h)/c|0)+(d/1e7|0)+k*g,a[i]=e%c;return h&&(a=[h].concat(a)),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c,d){for(var e=0;c--;)a[c]-=e,e=+(a[c]<b[c]),a[c]=e*d+a[c]-b[c];for(;!a[0]&&a.length>1;a.splice(0,1));}return function(d,e,f,g,h){var j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=d.s==e.s?1:-1,C=d.c,D=e.c;if(!C||!C[0]||!D||!D[0])return new M(!d.s||!e.s||(C?D&&C[0]==D[0]:!D)?NaN:C&&0==C[0]||!D?0*B:B/0);for(s=(r=new M(B)).c=[],B=f+(k=d.e-e.e)+1,h||(h=1e14,k=m(d.e/14)-m(e.e/14),B=B/14|0),l=0;D[l]==(C[l]||0);l++);if(D[l]>(C[l]||0)&&k--,B<0)s.push(1),n=!0;else{for(x=C.length,z=D.length,l=0,B+=2,(o=i(h/(D[0]+1)))>1&&(D=a(D,o,h),C=a(C,o,h),z=D.length,x=C.length),w=z,u=(t=C.slice(0,z)).length;u<z;t[u++]=0);A=[0].concat(A=D.slice()),y=D[0],D[1]>=h/2&&y++;do{if(o=0,(j=b(D,t,z,u))<0){if(v=t[0],z!=u&&(v=v*h+(t[1]||0)),(o=i(v/y))>1)for(o>=h&&(o=h-1),q=(p=a(D,o,h)).length,u=t.length;1==b(p,t,q,u);)o--,c(p,z<q?A:D,q,h),q=p.length,j=1;else 0==o&&(j=o=1),q=(p=D.slice()).length;if(q<u&&(p=[0].concat(p)),c(t,p,u,h),u=t.length,-1==j)for(;1>b(D,t,z,u);)o++,c(t,z<u?A:D,u,h),u=t.length}else 0===j&&(o++,t=[0]);s[l++]=o,t[0]?t[u++]=C[w]||0:(t=[C[w]],u=1)}while((w++<x||null!=t[0])&&B--);n=null!=t[0],s[0]||s.splice(0,1)}if(1e14==h){for(l=1,B=s[0];B>=10;B/=10,l++);Q(r,f+(r.e=l+14*k-1)+1,g,n)}else r.e=k,r.r=+n;return r}}(),d=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,f=/^\.([^.]+)$/,t=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,x=function(a,b,c,g){var h,i=c?b:b.replace(u,"");if(t.test(i))a.s=isNaN(i)?null:i<0?-1:1;else{if(!c&&(i=i.replace(d,function(a,b,c){return h="x"==(c=c.toLowerCase())?16:"b"==c?2:8,g&&g!=h?a:b}),g&&(h=g,i=i.replace(e,"$1").replace(f,"0.$1")),b!=i))return new M(i,h);if(M.DEBUG)throw Error(j+"Not a"+(g?" base "+g:"")+" number: "+b);a.s=null}a.c=a.e=null},y.absoluteValue=y.abs=function(){var a=new M(this);return a.s<0&&(a.s=1),a},y.comparedTo=function(a,b){return o(this,new M(a,b))},y.decimalPlaces=y.dp=function(a,b){var c,d,e;if(null!=a)return p(a,0,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a+this.e+1,b);if(!(c=this.c))return null;if(d=((e=c.length-1)-m(this.e/14))*14,e=c[e])for(;e%10==0;e/=10,d--);return d<0&&(d=0),d},y.dividedBy=y.div=function(a,b){return v(this,new M(a,b),A,B)},y.dividedToIntegerBy=y.idiv=function(a,b){return v(this,new M(a,b),0,1)},y.exponentiatedBy=y.pow=function(a,b){var c,d,e,f,g,k,l,m,n,o=this;if((a=new M(a)).c&&!a.isInteger())throw Error(j+"Exponent not an integer: "+R(a));if(null!=b&&(b=new M(b)),k=a.e>14,!o.c||!o.c[0]||1==o.c[0]&&!o.e&&1==o.c.length||!a.c||!a.c[0])return n=new M(Math.pow(+R(o),k?a.s*(2-q(a)):+R(a))),b?n.mod(b):n;if(l=a.s<0,b){if(b.c?!b.c[0]:!b.s)return new M(NaN);(d=!l&&o.isInteger()&&b.isInteger())&&(o=o.mod(b))}else{if(a.e>9&&(o.e>0||o.e<-1||(0==o.e?o.c[0]>1||k&&o.c[1]>=24e7:o.c[0]<8e13||k&&o.c[0]<=9999975e7)))return f=o.s<0&&q(a)?-0:0,o.e>-1&&(f=1/f),new M(l?1/f:f);I&&(f=h(I/14+2))}for(k?(c=new M(.5),l&&(a.s=1),m=q(a)):m=(e=Math.abs(+R(a)))%2,n=new M(z);;){if(m){if(!(n=n.times(o)).c)break;f?n.c.length>f&&(n.c.length=f):d&&(n=n.mod(b))}if(e){if(0===(e=i(e/2)))break;m=e%2}else if(Q(a=a.times(c),a.e+1,1),a.e>14)m=q(a);else{if(0==(e=+R(a)))break;m=e%2}o=o.times(o),f?o.c&&o.c.length>f&&(o.c.length=f):d&&(o=o.mod(b))}return d?n:(l&&(n=z.div(n)),b?n.mod(b):f?Q(n,I,B,g):n)},y.integerValue=function(a){var b=new M(this);return null==a?a=B:p(a,0,8),Q(b,b.e+1,a)},y.isEqualTo=y.eq=function(a,b){return 0===o(this,new M(a,b))},y.isFinite=function(){return!!this.c},y.isGreaterThan=y.gt=function(a,b){return o(this,new M(a,b))>0},y.isGreaterThanOrEqualTo=y.gte=function(a,b){return 1===(b=o(this,new M(a,b)))||0===b},y.isInteger=function(){return!!this.c&&m(this.e/14)>this.c.length-2},y.isLessThan=y.lt=function(a,b){return 0>o(this,new M(a,b))},y.isLessThanOrEqualTo=y.lte=function(a,b){return -1===(b=o(this,new M(a,b)))||0===b},y.isNaN=function(){return!this.s},y.isNegative=function(){return this.s<0},y.isPositive=function(){return this.s>0},y.isZero=function(){return!!this.c&&0==this.c[0]},y.minus=function(a,b){var c,d,e,f,g=this.s;if(b=(a=new M(a,b)).s,!g||!b)return new M(NaN);if(g!=b)return a.s=-b,this.plus(a);var h=this.e/14,i=a.e/14,j=this.c,k=a.c;if(!h||!i){if(!j||!k)return j?(a.s=-b,a):new M(k?this:NaN);if(!j[0]||!k[0])return k[0]?(a.s=-b,a):new M(j[0]?this:3==B?-0:0)}if(h=m(h),i=m(i),j=j.slice(),g=h-i){for((f=g<0)?(g=-g,e=j):(i=h,e=k),e.reverse(),b=g;b--;e.push(0));e.reverse()}else for(d=(f=(g=j.length)<(b=k.length))?g:b,g=b=0;b<d;b++)if(j[b]!=k[b]){f=j[b]<k[b];break}if(f&&(e=j,j=k,k=e,a.s=-a.s),(b=(d=k.length)-(c=j.length))>0)for(;b--;j[c++]=0);for(b=1e14-1;d>g;){if(j[--d]<k[d]){for(c=d;c&&!j[--c];j[c]=b);--j[c],j[d]+=1e14}j[d]-=k[d]}for(;0==j[0];j.splice(0,1),--i);return j[0]?P(a,j,i):(a.s=3==B?-1:1,a.c=[a.e=0],a)},y.modulo=y.mod=function(a,b){var c,d;return(a=new M(a,b),this.c&&a.s&&(!a.c||a.c[0]))?a.c&&(!this.c||this.c[0])?(9==H?(d=a.s,a.s=1,c=v(this,a,0,3),a.s=d,c.s*=d):c=v(this,a,0,H),(a=this.minus(c.times(a))).c[0]||1!=H||(a.s=this.s),a):new M(this):new M(NaN)},y.multipliedBy=y.times=function(a,b){var c,d,e,f,g,h,i,j,k,l,n,o,p,q=this.c,r=(a=new M(a,b)).c;if(!q||!r||!q[0]||!r[0])return this.s&&a.s&&(!q||q[0]||r)&&(!r||r[0]||q)?(a.s*=this.s,q&&r?(a.c=[0],a.e=0):a.c=a.e=null):a.c=a.e=a.s=null,a;for(d=m(this.e/14)+m(a.e/14),a.s*=this.s,(i=q.length)<(l=r.length)&&(p=q,q=r,r=p,e=i,i=l,l=e),e=i+l,p=[];e--;p.push(0));for(e=l;--e>=0;){for(c=0,n=r[e]%1e7,o=r[e]/1e7|0,f=e+(g=i);f>e;)h=o*(j=q[--g]%1e7)+(k=q[g]/1e7|0)*n,c=((j=n*j+h%1e7*1e7+p[f]+c)/1e14|0)+(h/1e7|0)+o*k,p[f--]=j%1e14;p[f]=c}return c?++d:p.splice(0,1),P(a,p,d)},y.negated=function(){var a=new M(this);return a.s=-a.s||null,a},y.plus=function(a,b){var c,d=this.s;if(b=(a=new M(a,b)).s,!d||!b)return new M(NaN);if(d!=b)return a.s=-b,this.minus(a);var e=this.e/14,f=a.e/14,g=this.c,h=a.c;if(!e||!f){if(!g||!h)return new M(d/0);if(!g[0]||!h[0])return h[0]?a:new M(g[0]?this:0*d)}if(e=m(e),f=m(f),g=g.slice(),d=e-f){for(d>0?(f=e,c=h):(d=-d,c=g),c.reverse();d--;c.push(0));c.reverse()}for((d=g.length)-(b=h.length)<0&&(c=h,h=g,g=c,b=d),d=0;b;)d=(g[--b]=g[b]+h[b]+d)/1e14|0,g[b]=1e14===g[b]?0:g[b]%1e14;return d&&(g=[d].concat(g),++f),P(a,g,f)},y.precision=y.sd=function(a,b){var c,d,e;if(null!=a&&!!a!==a)return p(a,1,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a,b);if(!(c=this.c))return null;if(d=14*(e=c.length-1)+1,e=c[e]){for(;e%10==0;e/=10,d--);for(e=c[0];e>=10;e/=10,d++);}return a&&this.e+1>d&&(d=this.e+1),d},y.shiftedBy=function(a){return p(a,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+a)},y.squareRoot=y.sqrt=function(){var a,b,c,d,e,f=this.c,g=this.s,h=this.e,i=A+4,j=new M("0.5");if(1!==g||!f||!f[0])return new M(!g||g<0&&(!f||f[0])?NaN:f?this:1/0);if(0==(g=Math.sqrt(+R(this)))||g==1/0?(((b=n(f)).length+h)%2==0&&(b+="0"),g=Math.sqrt(+b),h=m((h+1)/2)-(h<0||h%2),c=new M(b=g==1/0?"5e"+h:(b=g.toExponential()).slice(0,b.indexOf("e")+1)+h)):c=new M(g+""),c.c[0]){for((g=(h=c.e)+i)<3&&(g=0);;)if(e=c,c=j.times(e.plus(v(this,e,i,1))),n(e.c).slice(0,g)===(b=n(c.c)).slice(0,g)){if(c.e<h&&--g,"9999"!=(b=b.slice(g-3,g+1))&&(d||"4999"!=b)){+b&&(+b.slice(1)||"5"!=b.charAt(0))||(Q(c,c.e+A+2,1),a=!c.times(c).eq(this));break}if(!d&&(Q(e,e.e+A+2,0),e.times(e).eq(this))){c=e;break}i+=4,g+=4,d=1}}return Q(c,c.e+A+1,B,a)},y.toExponential=function(a,b){return null!=a&&(p(a,0,1e9),a++),N(this,a,b,1)},y.toFixed=function(a,b){return null!=a&&(p(a,0,1e9),a=a+this.e+1),N(this,a,b)},y.toFormat=function(a,b,c){var d;if(null==c)null!=a&&b&&"object"==typeof b?(c=b,b=null):a&&"object"==typeof a?(c=a,a=b=null):c=J;else if("object"!=typeof c)throw Error(j+"Argument not an object: "+c);if(d=this.toFixed(a,b),this.c){var e,f=d.split("."),g=+c.groupSize,h=+c.secondaryGroupSize,i=c.groupSeparator||"",k=f[0],l=f[1],m=this.s<0,n=m?k.slice(1):k,o=n.length;if(h&&(e=g,g=h,h=e,o-=e),g>0&&o>0){for(e=o%g||g,k=n.substr(0,e);e<o;e+=g)k+=i+n.substr(e,g);h>0&&(k+=i+n.slice(e)),m&&(k="-"+k)}d=l?k+(c.decimalSeparator||"")+((h=+c.fractionGroupSize)?l.replace(RegExp("\\d{"+h+"}\\B","g"),"$&"+(c.fractionGroupSeparator||"")):l):k}return(c.prefix||"")+d+(c.suffix||"")},y.toFraction=function(a){var b,c,d,e,f,g,h,i,k,m,o,p,q=this.c;if(null!=a&&(!(h=new M(a)).isInteger()&&(h.c||1!==h.s)||h.lt(z)))throw Error(j+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+R(h));if(!q)return new M(this);for(b=new M(z),k=c=new M(z),d=i=new M(z),p=n(q),f=b.e=p.length-this.e-1,b.c[0]=l[(g=f%14)<0?14+g:g],a=!a||h.comparedTo(b)>0?f>0?b:k:h,g=F,F=1/0,h=new M(p),i.c[0]=0;m=v(h,b,0,1),1!=(e=c.plus(m.times(d))).comparedTo(a);)c=d,d=e,k=i.plus(m.times(e=k)),i=e,b=h.minus(m.times(e=b)),h=e;return e=v(a.minus(c),d,0,1),i=i.plus(e.times(k)),c=c.plus(e.times(d)),i.s=k.s=this.s,f*=2,o=1>v(k,d,f,B).minus(this).abs().comparedTo(v(i,c,f,B).minus(this).abs())?[k,d]:[i,c],F=g,o},y.toNumber=function(){return+R(this)},y.toPrecision=function(a,b){return null!=a&&p(a,1,1e9),N(this,a,b,2)},y.toString=function(a){var b,c=this,d=c.s,e=c.e;return null===e?d?(b="Infinity",d<0&&(b="-"+b)):b="NaN":(null==a?b=e<=C||e>=D?r(n(c.c),e):s(n(c.c),e,"0"):10===a&&L?b=s(n((c=Q(new M(c),A+e+1,B)).c),c.e,"0"):(p(a,2,K.length,"Base"),b=w(s(n(c.c),e,"0"),10,a,d,!0)),d<0&&c.c[0]&&(b="-"+b)),b},y.valueOf=y.toJSON=function(){return R(this)},y._isBigNumber=!0,null!=b&&M.set(b),M}()).default=f.BigNumber=f,void 0===(d=(function(){return f}).call(b,c,b,a))||(a.exports=d)}(0)},69920:(a,b,c)=>{"use strict";c.d(b,{FL:()=>m,Tq:()=>k,qX:()=>n,qj:()=>o});var d=c(86900),e=c(90113),f=c(64014);let g=d.Ph;function h(a,b){if(i(a),i(b),a<0||a>=1<<8*b)throw Error("invalid I2OSP input: "+a);let c=Array.from({length:b}).fill(0);for(let d=b-1;d>=0;d--)c[d]=255&a,a>>>=8;return new Uint8Array(c)}function i(a){if(!Number.isSafeInteger(a))throw Error("number expected")}function j(a){if(!(0,e.aY)(a)&&"string"!=typeof a)throw Error("DST must be Uint8Array or string");return"string"==typeof a?(0,e.AI)(a):a}function k(a,b,c,d){(0,e.DO)(a),i(c),(b=j(b)).length>255&&(b=d((0,e.Id)((0,e.AI)("H2C-OVERSIZE-DST-"),b)));let{outputLen:f,blockLen:g}=d,k=Math.ceil(c/f);if(c>65535||k>255)throw Error("expand_message_xmd: invalid lenInBytes");let l=(0,e.Id)(b,h(b.length,1)),m=h(0,g),n=h(c,2),o=Array(k),p=d((0,e.Id)(m,a,n,h(0,1),l));o[0]=d((0,e.Id)(p,h(1,1),l));for(let a=1;a<=k;a++){let b=[function(a,b){let c=new Uint8Array(a.length);for(let d=0;d<a.length;d++)c[d]=a[d]^b[d];return c}(p,o[a-1]),h(a+1,1),l];o[a]=d((0,e.Id)(...b))}return(0,e.Id)(...o).slice(0,c)}function l(a,b,c){let l;(0,d.DS)(c,{p:"bigint",m:"number",k:"number",hash:"function"});let{p:m,k:n,m:o,hash:p,expand:q,DST:r}=c;if(!(0,d.jN)(c.hash))throw Error("expected valid hash");(0,e.DO)(a),i(b);let s=Math.ceil((m.toString(2).length+n)/8),t=b*o*s;if("xmd"===q)l=k(a,r,t,p);else if("xof"===q)l=function(a,b,c,d,f){if((0,e.DO)(a),i(c),(b=j(b)).length>255){let a=Math.ceil(2*d/8);b=f.create({dkLen:a}).update((0,e.AI)("H2C-OVERSIZE-DST-")).update(b).digest()}if(c>65535||b.length>255)throw Error("expand_message_xof: invalid lenInBytes");return f.create({dkLen:c}).update(a).update(h(c,2)).update(b).update(h(b.length,1)).digest()}(a,r,t,n,p);else if("_internal_pass"===q)l=a;else throw Error('expand must be "xmd" or "xof"');let u=Array(b);for(let a=0;a<b;a++){let b=Array(o);for(let c=0;c<o;c++){let d=s*(c+a*o),e=l.subarray(d,d+s);b[c]=(0,f.zi)(g(e),m)}u[a]=b}return u}function m(a,b){let c=b.map(a=>Array.from(a).reverse());return(b,d)=>{let[e,g,h,i]=c.map(c=>c.reduce((c,d)=>a.add(a.mul(c,b),d))),[j,k]=(0,f.pS)(a,[g,i],!0);return b=a.mul(e,j),d=a.mul(d,a.mul(h,k)),{x:b,y:d}}}let n=(0,e.AI)("HashToScalar-");function o(a,b,c){if("function"!=typeof b)throw Error("mapToCurve() must be defined");function d(c){return a.fromAffine(b(c))}function e(b){let c=b.clearCofactor();return c.equals(a.ZERO)?a.ZERO:(c.assertValidity(),c)}return{defaults:c,hashToCurve(a,b){let f=l(a,2,Object.assign({},c,b)),g=d(f[0]),h=d(f[1]);return e(g.add(h))},encodeToCurve(a,b){let f=c.encodeDST?{DST:c.encodeDST}:{};return e(d(l(a,1,Object.assign({},c,f,b))[0]))},mapToCurve(a){if(!Array.isArray(a))throw Error("expected array of bigints");for(let b of a)if("bigint"!=typeof b)throw Error("expected array of bigints");return e(d(a))},hashToScalar:(b,d)=>l(b,1,Object.assign({},c,{p:a.Fn.ORDER,m:1,DST:n},d))[0][0]}}},75095:(a,b,c)=>{"use strict";c.d(b,{D4:()=>o,lF:()=>l});var d,e=c(16355),f=c(77214),g=c(83967);class h{get name(){return"Principal"}get priority(){return 0}match(a){return a&&!0===a._isPrincipal}encode(a){return f.value.bytes(a.toUint8Array())}}class i{get name(){return"Buffer"}get priority(){return 1}match(a){return a instanceof ArrayBuffer||ArrayBuffer.isView(a)}encode(a){return f.value.bytes(new Uint8Array(a))}}class j{get name(){return"BigInt"}get priority(){return 1}match(a){return"bigint"==typeof a}encode(a){return a>BigInt(0)?f.value.tagged(2,f.value.bytes((0,g.aD)(a.toString(16)))):f.value.tagged(3,f.value.bytes((0,g.aD)((BigInt("-1")*a).toString(16))))}}let k=f.SelfDescribeCborSerializer.withDefaultEncoders(!0);function l(a){return k.serialize(a)}function m(a){let b=a.byteLength,c=BigInt(0);for(let d=0;d<b;d++)c=c*BigInt(256)+BigInt(a[d]);return c}k.addEncoder(new h),k.addEncoder(new i),k.addEncoder(new j),function(a){a[a.Uint64LittleEndian=71]="Uint64LittleEndian",a[a.Semantic=55799]="Semantic"}(d||(d={}));class n extends e.Decoder{createByteString(a){return(0,g.xW)(...a)}createByteStringFromHeap(a,b){return a===b?new ArrayBuffer(0):new Uint8Array(this._heap.slice(a,b))}}function o(a){let b=new Uint8Array(a),c=new n({size:b.byteLength,tags:{2:a=>m(a),3:a=>-m(a),[d.Semantic]:a=>a}});try{return c.decodeFirst(b)}catch(a){throw Error(`Failed to decode CBOR: ${a}, input: ${(0,g.nj)(b)}`)}}},76018:a=>{a.exports=function(a,b,c){"use asm";var d=new a.Uint8Array(c);var e=b.pushInt;var f=b.pushInt32;var g=b.pushInt32Neg;var h=b.pushInt64;var i=b.pushInt64Neg;var j=b.pushFloat;var k=b.pushFloatSingle;var l=b.pushFloatDouble;var m=b.pushTrue;var n=b.pushFalse;var o=b.pushUndefined;var p=b.pushNull;var q=b.pushInfinity;var r=b.pushInfinityNeg;var s=b.pushNaN;var t=b.pushNaNNeg;var u=b.pushArrayStart;var v=b.pushArrayStartFixed;var w=b.pushArrayStartFixed32;var x=b.pushArrayStartFixed64;var y=b.pushObjectStart;var z=b.pushObjectStartFixed;var A=b.pushObjectStartFixed32;var B=b.pushObjectStartFixed64;var C=b.pushByteString;var D=b.pushByteStringStart;var E=b.pushUtf8String;var F=b.pushUtf8StringStart;var G=b.pushSimpleUnassigned;var H=b.pushTagStart;var I=b.pushTagStart4;var J=b.pushTagStart8;var K=b.pushTagUnassigned;var L=b.pushBreak;var M=a.Math.pow;var N=0;var O=0;var P=0;function Q(a){a=a|0;N=0;O=a;while((N|0)<(O|0)){P=aY[d[N]&255](d[N]|0)|0;if((P|0)>0){break}}return P|0}function R(a){a=a|0;if(((N|0)+(a|0)|0)<(O|0)){return 0}return 1}function S(a){a=a|0;return d[a|0]<<8|d[a+1|0]|0}function T(a){a=a|0;return d[a|0]<<24|d[a+1|0]<<16|d[a+2|0]<<8|d[a+3|0]|0}function U(a){a=a|0;e(a|0);N=N+1|0;return 0}function V(a){a=a|0;if(R(1)|0){return 1}e(d[N+1|0]|0);N=N+2|0;return 0}function W(a){a=a|0;if(R(2)|0){return 1}e(S(N+1|0)|0);N=N+3|0;return 0}function X(a){a=a|0;if(R(4)|0){return 1}f(S(N+1|0)|0,S(N+3|0)|0);N=N+5|0;return 0}function Y(a){a=a|0;if(R(8)|0){return 1}h(S(N+1|0)|0,S(N+3|0)|0,S(N+5|0)|0,S(N+7|0)|0);N=N+9|0;return 0}function Z(a){a=a|0;e(-1-(a-32|0)|0);N=N+1|0;return 0}function $(a){a=a|0;if(R(1)|0){return 1}e(-1-(d[N+1|0]|0)|0);N=N+2|0;return 0}function _(a){a=a|0;var b=0;if(R(2)|0){return 1}b=S(N+1|0)|0;e(-1-(b|0)|0);N=N+3|0;return 0}function aa(a){a=a|0;if(R(4)|0){return 1}g(S(N+1|0)|0,S(N+3|0)|0);N=N+5|0;return 0}function ab(a){a=a|0;if(R(8)|0){return 1}i(S(N+1|0)|0,S(N+3|0)|0,S(N+5|0)|0,S(N+7|0)|0);N=N+9|0;return 0}function ac(a){a=a|0;var b=0;var c=0;var d=0;d=a-64|0;if(R(d|0)|0){return 1}b=N+1|0;c=(N+1|0)+(d|0)|0;C(b|0,c|0);N=c|0;return 0}function ad(a){a=a|0;var b=0;var c=0;var e=0;if(R(1)|0){return 1}e=d[N+1|0]|0;b=N+2|0;c=(N+2|0)+(e|0)|0;if(R(e+1|0)|0){return 1}C(b|0,c|0);N=c|0;return 0}function ae(a){a=a|0;var b=0;var c=0;var d=0;if(R(2)|0){return 1}d=S(N+1|0)|0;b=N+3|0;c=(N+3|0)+(d|0)|0;if(R(d+2|0)|0){return 1}C(b|0,c|0);N=c|0;return 0}function af(a){a=a|0;var b=0;var c=0;var d=0;if(R(4)|0){return 1}d=T(N+1|0)|0;b=N+5|0;c=(N+5|0)+(d|0)|0;if(R(d+4|0)|0){return 1}C(b|0,c|0);N=c|0;return 0}function ag(a){a=a|0;return 1}function ah(a){a=a|0;D();N=N+1|0;return 0}function ai(a){a=a|0;var b=0;var c=0;var d=0;d=a-96|0;if(R(d|0)|0){return 1}b=N+1|0;c=(N+1|0)+(d|0)|0;E(b|0,c|0);N=c|0;return 0}function aj(a){a=a|0;var b=0;var c=0;var e=0;if(R(1)|0){return 1}e=d[N+1|0]|0;b=N+2|0;c=(N+2|0)+(e|0)|0;if(R(e+1|0)|0){return 1}E(b|0,c|0);N=c|0;return 0}function ak(a){a=a|0;var b=0;var c=0;var d=0;if(R(2)|0){return 1}d=S(N+1|0)|0;b=N+3|0;c=(N+3|0)+(d|0)|0;if(R(d+2|0)|0){return 1}E(b|0,c|0);N=c|0;return 0}function al(a){a=a|0;var b=0;var c=0;var d=0;if(R(4)|0){return 1}d=T(N+1|0)|0;b=N+5|0;c=(N+5|0)+(d|0)|0;if(R(d+4|0)|0){return 1}E(b|0,c|0);N=c|0;return 0}function am(a){a=a|0;return 1}function an(a){a=a|0;F();N=N+1|0;return 0}function ao(a){a=a|0;v(a-128|0);N=N+1|0;return 0}function ap(a){a=a|0;if(R(1)|0){return 1}v(d[N+1|0]|0);N=N+2|0;return 0}function aq(a){a=a|0;if(R(2)|0){return 1}v(S(N+1|0)|0);N=N+3|0;return 0}function ar(a){a=a|0;if(R(4)|0){return 1}w(S(N+1|0)|0,S(N+3|0)|0);N=N+5|0;return 0}function as(a){a=a|0;if(R(8)|0){return 1}x(S(N+1|0)|0,S(N+3|0)|0,S(N+5|0)|0,S(N+7|0)|0);N=N+9|0;return 0}function at(a){a=a|0;u();N=N+1|0;return 0}function au(a){a=a|0;var b=0;b=a-160|0;if(R(b|0)|0){return 1}z(b|0);N=N+1|0;return 0}function av(a){a=a|0;if(R(1)|0){return 1}z(d[N+1|0]|0);N=N+2|0;return 0}function aw(a){a=a|0;if(R(2)|0){return 1}z(S(N+1|0)|0);N=N+3|0;return 0}function ax(a){a=a|0;if(R(4)|0){return 1}A(S(N+1|0)|0,S(N+3|0)|0);N=N+5|0;return 0}function ay(a){a=a|0;if(R(8)|0){return 1}B(S(N+1|0)|0,S(N+3|0)|0,S(N+5|0)|0,S(N+7|0)|0);N=N+9|0;return 0}function az(a){a=a|0;y();N=N+1|0;return 0}function aA(a){a=a|0;H(a-192|0|0);N=N+1|0;return 0}function aB(a){a=a|0;H(a|0);N=N+1|0;return 0}function aC(a){a=a|0;H(a|0);N=N+1|0;return 0}function aD(a){a=a|0;H(a|0);N=N+1|0;return 0}function aE(a){a=a|0;H(a|0);N=N+1|0;return 0}function aF(a){a=a|0;H(a-192|0|0);N=N+1|0;return 0}function aG(a){a=a|0;H(a|0);N=N+1|0;return 0}function aH(a){a=a|0;H(a|0);N=N+1|0;return 0}function aI(a){a=a|0;H(a|0);N=N+1|0;return 0}function aJ(a){a=a|0;if(R(1)|0){return 1}H(d[N+1|0]|0);N=N+2|0;return 0}function aK(a){a=a|0;if(R(2)|0){return 1}H(S(N+1|0)|0);N=N+3|0;return 0}function aL(a){a=a|0;if(R(4)|0){return 1}I(S(N+1|0)|0,S(N+3|0)|0);N=N+5|0;return 0}function aM(a){a=a|0;if(R(8)|0){return 1}J(S(N+1|0)|0,S(N+3|0)|0,S(N+5|0)|0,S(N+7|0)|0);N=N+9|0;return 0}function aN(a){a=a|0;G((a|0)-224|0);N=N+1|0;return 0}function aO(a){a=a|0;n();N=N+1|0;return 0}function aP(a){a=a|0;m();N=N+1|0;return 0}function aQ(a){a=a|0;p();N=N+1|0;return 0}function aR(a){a=a|0;o();N=N+1|0;return 0}function aS(a){a=a|0;if(R(1)|0){return 1}G(d[N+1|0]|0);N=N+2|0;return 0}function aT(a){a=a|0;var b=0;var c=0;var e=1;var f=0;var g=0;var h=0;if(R(2)|0){return 1}b=d[N+1|0]|0;c=d[N+2|0]|0;if((b|0)&128){e=-1}f=+(((b|0)&124)>>2);g=+(((b|0)&3)<<8|c);if(+f==0){j(+(+e*+5960464477539063e-23*+g))}else if(+f==31){if(+e==1){if(+g>0){s()}else{q()}}else{if(+g>0){t()}else{r()}}}else{j(+(+e*M(+2,+(+f-25))*+(1024+g)))}N=N+3|0;return 0}function aU(a){a=a|0;if(R(4)|0){return 1}k(d[N+1|0]|0,d[N+2|0]|0,d[N+3|0]|0,d[N+4|0]|0);N=N+5|0;return 0}function aV(a){a=a|0;if(R(8)|0){return 1}l(d[N+1|0]|0,d[N+2|0]|0,d[N+3|0]|0,d[N+4|0]|0,d[N+5|0]|0,d[N+6|0]|0,d[N+7|0]|0,d[N+8|0]|0);N=N+9|0;return 0}function aW(a){a=a|0;return 1}function aX(a){a=a|0;L();N=N+1|0;return 0}var aY=[U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,V,W,X,Y,aW,aW,aW,aW,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,$,_,aa,ab,aW,aW,aW,aW,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ac,ad,ae,af,ag,aW,aW,aW,ah,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,ai,aj,ak,al,am,aW,aW,aW,an,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ao,ap,aq,ar,as,aW,aW,aW,at,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,au,av,aw,ax,ay,aW,aW,aW,az,aA,aA,aA,aA,aA,aA,aF,aF,aF,aF,aF,aF,aF,aF,aF,aF,aF,aF,aF,aF,aF,aF,aF,aF,aJ,aK,aL,aM,aW,aW,aW,aW,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aW,aW,aX];return{parse:Q}}},77214:function(a,b,c){"use strict";var d=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b};Object.defineProperty(b,"__esModule",{value:!0});var e=c(52148);for(var f in e)b.hasOwnProperty(f)||(b[f]=e[f]);b.value=d(c(15507))},80275:(a,b,c)=>{"use strict";let{URL:d,URLSearchParams:e,format:f}=c(79551),g="http://localhost";class h extends d{constructor(a="",b=g){super(a,b),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}format(){return this.toString()}}a.exports={URLWithLegacySupport:h,URLSearchParams:e,format:f,defaultBase:g}},80616:(a,b,c)=>{"use strict";var d;c.d(b,{q:()=>d,o:()=>f});let e=()=>{if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){let a=new Uint32Array(1);return window.crypto.getRandomValues(a),a[0]}if("undefined"!=typeof crypto&&crypto.getRandomValues){let a=new Uint32Array(1);return crypto.getRandomValues(a),a[0]}return"undefined"!=typeof crypto&&crypto.randomInt?crypto.randomInt(0,0xffffffff):Math.floor(0xffffffff*Math.random())};function f(){let a=new ArrayBuffer(16),b=new DataView(a),c=e(),d=e(),f=e(),g=e();return b.setUint32(0,c),b.setUint32(4,d),b.setUint32(8,f),b.setUint32(12,g),a}(d||(d={})).Call="call"},81119:(a,b)=>{"use strict";b.byteLength=function(a){var b=i(a),c=b[0],d=b[1];return(c+d)*3/4-d},b.toByteArray=function(a){var b,c,f=i(a),g=f[0],h=f[1],j=new e((g+h)*3/4-h),k=0,l=h>0?g-4:g;for(c=0;c<l;c+=4)b=d[a.charCodeAt(c)]<<18|d[a.charCodeAt(c+1)]<<12|d[a.charCodeAt(c+2)]<<6|d[a.charCodeAt(c+3)],j[k++]=b>>16&255,j[k++]=b>>8&255,j[k++]=255&b;return 2===h&&(b=d[a.charCodeAt(c)]<<2|d[a.charCodeAt(c+1)]>>4,j[k++]=255&b),1===h&&(b=d[a.charCodeAt(c)]<<10|d[a.charCodeAt(c+1)]<<4|d[a.charCodeAt(c+2)]>>2,j[k++]=b>>8&255,j[k++]=255&b),j},b.fromByteArray=function(a){for(var b,d=a.length,e=d%3,f=[],g=0,h=d-e;g<h;g+=16383)f.push(function(a,b,d){for(var e,f=[],g=b;g<d;g+=3)e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(c[(b=a[d-1])>>2]+c[b<<4&63]+"=="):2===e&&f.push(c[(b=(a[d-2]<<8)+a[d-1])>>10]+c[b>>4&63]+c[b<<2&63]+"="),f.join("")};for(var c=[],d=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,h=f.length;g<h;++g)c[g]=f[g],d[f.charCodeAt(g)]=g;function i(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}d[45]=62,d[95]=63},81195:(a,b,c)=>{"use strict";c.d(b,{hx:()=>h,oj:()=>g,tc:()=>e,wn:()=>f});var d=c(7736);class e extends d.Yv{constructor(a,b){super(a),this.response=b,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class f extends d.Yv{constructor(a,b,c,d,e,f){super(a),this.response=b,this.requestId=c,this.senderPubkey=d,this.senderSig=e,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class g extends d.Yv{constructor(a,b,c,d,e,f){super(a),this.response=b,this.requestId=c,this.senderPubkey=d,this.senderSig=e,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class h extends d.Yv{constructor(a,b,c,d,e,f){super(a),this.response=b,this.requestId=c,this.senderPubkey=d,this.senderSig=e,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}},82639:(a,b,c)=>{"use strict";c.r(b),c.d(b,{CustomPath:()=>j,encodePath:()=>m,fetchNodeKeys:()=>l,request:()=>k});var d=c(65689),e=c(7736),f=c(91818),g=c(83967),h=c(75095),i=c(85762);class j{constructor(a,b,c){this.key=a,this.path=b,this.decodeStrategy=c}}let k=async a=>{let{agent:b,paths:c}=a,g=d.p.from(a.canisterId),h=[...new Set(c)],j=h.map(a=>m(a,g)),k=new Map,r=h.map((a,c)=>(async()=>{var d;try{let a=await b.readState(g,{paths:[j[c]]});if(null==b.rootKey)throw Error("Agent is missing root key");let d=await f.us.create({certificate:a.certificate,rootKey:b.rootKey,canisterId:g,disableTimeVerification:!0}),{path:e,data:r}=((c,d)=>{if("subnet"!==d)return{path:d,data:(0,f.Xr)(c.lookup(m(d,g)))};{if(null==b.rootKey)throw Error("Agent is missing root key");let c=l(a.certificate,g,b.rootKey);return{path:d,data:c}}})(d,h[c]);if(r)switch(e){case"time":k.set(e,(0,i.A)(r));break;case"controllers":k.set(e,q(r));break;case"module_hash":k.set(e,n(r));break;case"subnet":k.set(e,r);break;case"candid":k.set(e,new TextDecoder().decode(r));break;default:if("string"!=typeof e&&"key"in e&&"path"in e)switch(e.decodeStrategy){case"raw":k.set(e.key,r);break;case"leb128":k.set(e.key,(0,i.b)(r));break;case"cbor":k.set(e.key,o(r));break;case"hex":k.set(e.key,n(r));break;case"utf-8":k.set(e.key,p(r))}}else console.warn(`Expected to find result for path ${e}, but instead found nothing.`),"string"==typeof e?k.set(e,null):k.set(e.key,null)}catch(b){if(null==(d=null==b?void 0:b.message)?void 0:d.includes("Invalid certificate"))throw new e.Yv(b.message);"string"!=typeof a&&"key"in a&&"path"in a?k.set(a.key,null):k.set(a,null),console.group(),console.warn(`Expected to find result for path ${a}, but instead found nothing.`),console.warn(b),console.groupEnd()}})());return await Promise.all(r),k},l=(a,b,c)=>{let e;if(!b._isPrincipal)throw Error("Invalid canisterId");let g=h.D4(new Uint8Array(a)),i=g.tree,j=g.delegation;if(j&&j.subnet_id?e=d.p.fromUint8Array(new Uint8Array(j.subnet_id)):j=j||void 0===c?{subnet_id:(e=d.p.selfAuthenticating(d.p.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array())).toUint8Array(),certificate:new ArrayBuffer(0)}:{subnet_id:(e=d.p.selfAuthenticating(new Uint8Array(c))).toUint8Array(),certificate:new ArrayBuffer(0)},!(0,f.Gk)({canisterId:b,subnetId:e,tree:i}))throw Error("Canister not in range");let k=(0,f.hV)(["subnet",j.subnet_id,"node"],i);if(k.status!==f.hi.Found)throw Error("Node not found");if(k.value instanceof ArrayBuffer)throw Error("Invalid node tree");let l=(0,f.Bx)(k.value),m=new Map;return l.forEach(a=>{let b=d.p.from(new Uint8Array(a[1])).toText(),c=(0,f.hV)(["public_key"],a[2]);if(c.status!==f.hi.Found)throw Error("Public key not found");let e=c.value;if(44!==e.byteLength)throw Error("Invalid public key length");m.set(b,e)}),{subnetId:d.p.fromUint8Array(new Uint8Array(j.subnet_id)).toText(),nodeKeys:m}},m=(a,b)=>{let c=new TextEncoder,d=a=>new DataView(c.encode(a).buffer).buffer,e=new DataView(b.toUint8Array().buffer).buffer;switch(a){case"time":return[d("time")];case"controllers":return[d("canister"),e,d("controllers")];case"module_hash":return[d("canister"),e,d("module_hash")];case"subnet":return[d("subnet")];case"candid":return[d("canister"),e,d("metadata"),d("candid:service")];default:if("key"in a&&"path"in a)if(!("string"==typeof a.path||a.path instanceof ArrayBuffer))return a.path;else{let b=a.path,c="string"==typeof b?d(b):b;return[d("canister"),e,d("metadata"),c]}}throw Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${a} was formatted correctly.`)},n=a=>(0,g.nj)(a),o=a=>h.D4(a),p=a=>new TextDecoder().decode(a),q=a=>o(a).map(a=>d.p.fromUint8Array(new Uint8Array(a)))},83967:(a,b,c)=>{"use strict";function d(...a){let b=new Uint8Array(a.reduce((a,b)=>a+b.byteLength,0)),c=0;for(let d of a)b.set(new Uint8Array(d),c),c+=d.byteLength;return b.buffer}function e(a){return[...new Uint8Array(a)].map(a=>a.toString(16).padStart(2,"0")).join("")}c.d(b,{HA:()=>i,Nn:()=>j,UD:()=>h,aD:()=>g,em:()=>function a(b){return b instanceof Uint8Array?j(b):b instanceof ArrayBuffer?b:Array.isArray(b)?j(new Uint8Array(b)):"buffer"in b?a(b.buffer):j(new Uint8Array(b))},nj:()=>e,xW:()=>d});let f=new RegExp(/^[0-9a-fA-F]+$/);function g(a){if(!f.test(a))throw Error("Invalid hexadecimal string.");return new Uint8Array([...a].reduce((a,b,c)=>(a[c/2|0]=(a[c/2|0]||"")+b,a),[]).map(a=>Number.parseInt(a,16))).buffer}function h(a,b){if(a.byteLength!==b.byteLength)return a.byteLength-b.byteLength;let c=new Uint8Array(a),d=new Uint8Array(b);for(let a=0;a<c.length;a++)if(c[a]!==d[a])return c[a]-d[a];return 0}function i(a,b){return 0===h(a,b)}function j(a){return new DataView(a.buffer,a.byteOffset,a.byteLength).buffer}},85762:(a,b,c)=>{"use strict";c.d(b,{A:()=>f,b:()=>e});var d=c(17243);let e=a=>(0,d.Ui)(new d.Ki(a)),f=a=>new Date(Number(e(a))/1e6)},86900:(a,b,c)=>{"use strict";c.d(b,{DS:()=>w,GU:()=>t,OG:()=>u,Ph:()=>j,SJ:()=>x,aK:()=>r,dJ:()=>s,e8:()=>g,ex:()=>o,jN:()=>v,lX:()=>k,lq:()=>l,qj:()=>n,r4:()=>q,x:()=>y,z:()=>m,zW:()=>h});var d=c(90113);let e=BigInt(0),f=BigInt(1);function g(a,b){if("boolean"!=typeof b)throw Error(a+" boolean expected, got "+b)}function h(a){let b=a.toString(16);return 1&b.length?"0"+b:b}function i(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);return""===a?e:BigInt("0x"+a)}function j(a){return i((0,d.My)(a))}function k(a){return(0,d.DO)(a),i((0,d.My)(Uint8Array.from(a).reverse()))}function l(a,b){return(0,d.aT)(a.toString(16).padStart(2*b,"0"))}function m(a,b){return l(a,b).reverse()}function n(a,b,c){let e;if("string"==typeof b)try{e=(0,d.aT)(b)}catch(b){throw Error(a+" must be hex string or Uint8Array, cause: "+b)}else if((0,d.aY)(b))e=Uint8Array.from(b);else throw Error(a+" must be hex string or Uint8Array");let f=e.length;if("number"==typeof c&&f!==c)throw Error(a+" of length "+c+" expected, got "+f);return e}function o(a,b){if(a.length!==b.length)return!1;let c=0;for(let d=0;d<a.length;d++)c|=a[d]^b[d];return 0===c}let p=a=>"bigint"==typeof a&&e<=a;function q(a,b,c){return p(a)&&p(b)&&p(c)&&b<=a&&a<c}function r(a,b,c,d){if(!q(b,c,d))throw Error("expected valid "+a+": "+c+" <= n < "+d+", got "+b)}function s(a){let b;for(b=0;a>e;a>>=f,b+=1);return b}function t(a,b){return a>>BigInt(b)&f}let u=a=>(f<<BigInt(a))-f;function v(a){return"function"==typeof a&&Number.isSafeInteger(a.outputLen)}function w(a,b,c={}){if(!a||"object"!=typeof a)throw Error("expected valid options object");function d(b,c,d){let e=a[b];if(d&&void 0===e)return;let f=typeof e;if(f!==c||null===e)throw Error(`param "${b}" is invalid: expected ${c}, got ${f}`)}Object.entries(b).forEach(([a,b])=>d(a,b,!1)),Object.entries(c).forEach(([a,b])=>d(a,b,!0))}let x=()=>{throw Error("not implemented")};function y(a){let b=new WeakMap;return(c,...d)=>{let e=b.get(c);if(void 0!==e)return e;let f=a(c,...d);return b.set(c,f),f}}},89706:(a,b,c)=>{"use strict";c.d(b,{o:()=>e});class d{constructor(){this.observers=[]}subscribe(a){this.observers.push(a)}unsubscribe(a){this.observers=this.observers.filter(b=>b!==a)}notify(a,...b){this.observers.forEach(c=>c(a,...b))}}class e extends d{constructor(){super()}print(a,...b){this.notify({message:a,level:"info"},...b)}warn(a,...b){this.notify({message:a,level:"warn"},...b)}error(a,b,...c){this.notify({message:a,level:"error",error:b},...c)}}},89940:(a,b,c)=>{"use strict";c.d(b,{C2:()=>j,WQ:()=>h,le:()=>i,n9:()=>k});var d=c(83967);let e=a=>{if(a<=127)return 1;if(a<=255)return 2;if(a<=65535)return 3;if(a<=0xffffff)return 4;throw Error("Length too long (> 4 bytes)")},f=(a,b,c)=>{if(c<=127)return a[b]=c,1;if(c<=255)return a[b]=129,a[b+1]=c,2;if(c<=65535)return a[b]=130,a[b+1]=c>>8,a[b+2]=c,3;if(c<=0xffffff)return a[b]=131,a[b+1]=c>>16,a[b+2]=c>>8,a[b+3]=c,4;throw Error("Length too long (> 4 bytes)")},g=(a,b)=>{if(a[b]<128)return 1;if(128===a[b])throw Error("Invalid length 0");if(129===a[b])return 2;if(130===a[b])return 3;if(131===a[b])return 4;throw Error("Length too long (> 4 bytes)")},h=Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]),i=Uint8Array.from([48,5,6,3,43,101,112]);function j(a,b){let c=2+e(a.byteLength+1),d=b.byteLength+c+a.byteLength,g=0,h=new Uint8Array(1+e(d)+d);return h[g++]=48,g+=f(h,g,d),h.set(b,g),g+=b.byteLength,h[g++]=3,g+=f(h,g,a.byteLength+1),h[g++]=0,h.set(new Uint8Array(a),g),h}Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);let k=(a,b)=>{let c=0,e=(a,b)=>{if(f[c++]!==a)throw Error("Expected: "+b)},f=new Uint8Array(a);if(e(48,"sequence"),c+=g(f,c),!(0,d.HA)(f.slice(c,c+b.byteLength),b))throw Error("Not the expected OID.");c+=b.byteLength,e(3,"bit string");let h=((a,b)=>{let c=g(a,b);if(1===c)return a[b];if(2===c)return a[b+1];if(3===c)return(a[b+1]<<8)+a[b+2];if(4===c)return(a[b+1]<<16)+(a[b+2]<<8)+a[b+3];throw Error("Length too long (> 4 bytes)")})(f,c)-1;c+=g(f,c),e(0,"0 padding");let i=f.slice(c);if(h!==i.length)throw Error(`DER payload mismatch: Expected length ${h} actual length ${i.length}`);return i}},90113:(a,b,c)=>{"use strict";c.d(b,{Vw:()=>x,DO:()=>i,CC:()=>j,Fe:()=>h,Ht:()=>k,My:()=>q,uH:()=>l,Id:()=>w,qj:()=>y,O8:()=>m,aT:()=>t,aY:()=>g,po:()=>z,Ow:()=>n,ZJ:()=>v,AI:()=>u});var d=c(77598),e=c.t(d,2);let f=e&&"object"==typeof e&&"webcrypto"in e?d.webcrypto:e&&"object"==typeof e&&"randomBytes"in e?e:void 0;function g(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function h(a){if(!Number.isSafeInteger(a)||a<0)throw Error("positive integer expected, got "+a)}function i(a,...b){if(!g(a))throw Error("Uint8Array expected");if(b.length>0&&!b.includes(a.length))throw Error("Uint8Array expected of length "+b+", got length="+a.length)}function j(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function k(a,b){i(a);let c=b.outputLen;if(a.length<c)throw Error("digestInto() expects output buffer of length at least "+c)}function l(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}function m(a){return new DataView(a.buffer,a.byteOffset,a.byteLength)}function n(a,b){return a<<32-b|a>>>b}let o="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,p=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function q(a){if(i(a),o)return a.toHex();let b="";for(let c=0;c<a.length;c++)b+=p[a[c]];return b}let r={_0:48,_9:57,A:65,F:70,a:97,f:102};function s(a){return a>=r._0&&a<=r._9?a-r._0:a>=r.A&&a<=r.F?a-(r.A-10):a>=r.a&&a<=r.f?a-(r.a-10):void 0}function t(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(o)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=s(a.charCodeAt(e)),f=s(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}function u(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}function v(a){return"string"==typeof a&&(a=u(a)),i(a),a}function w(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];i(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}class x{}function y(a){let b=b=>a().update(v(b)).digest(),c=a();return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=()=>a(),b}function z(a=32){if(f&&"function"==typeof f.getRandomValues)return f.getRandomValues(new Uint8Array(a));if(f&&"function"==typeof f.randomBytes)return Uint8Array.from(f.randomBytes(a));throw Error("crypto.getRandomValues must be defined")}},91248:(a,b,c)=>{"use strict";c.d(b,{qB:()=>ak,GZ:()=>ah,BY:()=>L});var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M=c(65689),N=c(7736),O=c(4981),P=c(75095),Q=c(6928),R=c(83967),S=c(4229),T=c(80616),U=c(81195),V=c(82639),W=c(91818),X=c(15608),Y=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},Z=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};class ${constructor(a={}){d.set(this,void 0),e.set(this,void 0),this[f]=this.entries.bind(this),this[g]="ExpirableMap";let{source:b=[],expirationTime:c=6e5}=a,h=Date.now();Y(this,d,new Map([...b].map(([a,b])=>[a,{value:b,timestamp:h}])),"f"),Y(this,e,c,"f")}prune(){let a=Date.now();for(let[b,c]of Z(this,d,"f").entries())a-c.timestamp>Z(this,e,"f")&&Z(this,d,"f").delete(b);return this}set(a,b){this.prune();let c={value:b,timestamp:Date.now()};return Z(this,d,"f").set(a,c),this}get(a){let b=Z(this,d,"f").get(a);if(void 0!==b)return Date.now()-b.timestamp>Z(this,e,"f")?void Z(this,d,"f").delete(a):b.value}clear(){Z(this,d,"f").clear()}entries(){let a=Z(this,d,"f").entries();return function*(){for(let[b,c]of a)yield[b,c.value]}()}values(){let a=Z(this,d,"f").values();return function*(){for(let b of a)yield b.value}()}keys(){return Z(this,d,"f").keys()}forEach(a,b){for(let[c,e]of Z(this,d,"f").entries())a.call(b,e.value,c,this)}has(a){return Z(this,d,"f").has(a)}delete(a){return Z(this,d,"f").delete(a)}get size(){return Z(this,d,"f").size}}d=new WeakMap,e=new WeakMap,f=Symbol.iterator,g=Symbol.toStringTag;var _=c(93258),aa=c(85762),ab=c(89706),ac=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},ad=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};class ae{constructor(a=ae.default){h.set(this,void 0),i.set(this,void 0),j.set(this,void 0),k.set(this,void 0),l.set(this,void 0),m.set(this,void 0),n.set(this,void 0),o.set(this,void 0),p.set(this,0);let{initialInterval:b=500,randomizationFactor:c=.5,multiplier:d=1.5,maxInterval:e=6e4,maxElapsedTime:f=9e5,maxIterations:g=10,date:q=Date}=a;ac(this,h,b,"f"),ac(this,i,c,"f"),ac(this,j,d,"f"),ac(this,k,e,"f"),ac(this,o,q,"f"),ac(this,l,q.now(),"f"),ac(this,m,f,"f"),ac(this,n,g,"f")}get ellapsedTimeInMsec(){return ad(this,o,"f").now()-ad(this,l,"f")}get currentInterval(){return ad(this,h,"f")}get count(){return ad(this,p,"f")}get randomValueFromInterval(){let a=ad(this,i,"f")*ad(this,h,"f"),b=ad(this,h,"f")-a;return Math.random()*(ad(this,h,"f")+a-b)+b}incrementCurrentInterval(){var a;return ac(this,h,Math.min(ad(this,h,"f")*ad(this,j,"f"),ad(this,k,"f")),"f"),ac(this,p,(a=ad(this,p,"f"),++a),"f"),ad(this,h,"f")}next(){return this.ellapsedTimeInMsec>=ad(this,m,"f")||ad(this,p,"f")>=ad(this,n,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}h=new WeakMap,i=new WeakMap,j=new WeakMap,k=new WeakMap,l=new WeakMap,m=new WeakMap,n=new WeakMap,o=new WeakMap,p=new WeakMap,ae.default={initialInterval:500,randomizationFactor:.5,multiplier:1.5,maxInterval:6e4,maxElapsedTime:9e5,maxIterations:10,date:Date};var af=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},ag=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};!function(a){a.Received="received",a.Processing="processing",a.Replied="replied",a.Rejected="rejected",a.Unknown="unknown",a.Done="done"}(L||(L={}));let ah="aaaaa-aa";class ai extends N.Yv{constructor(a){super(a),this.message=a}}class aj extends N.Yv{constructor(a){super(a),this.message=a}}class ak{constructor(a={}){var b,c;q.add(this),r.set(this,null),s.set(this,!1),t.set(this,void 0),u.set(this,void 0),v.set(this,void 0),w.set(this,void 0),x.set(this,0),y.set(this,void 0),z.set(this,void 0),A.set(this,void 0),B.set(this,void 0),this._isAgent=!0,this.config={},C.set(this,0),this.log=new ab.o,D.set(this,[]),E.set(this,[]),F.set(this,new $({expirationTime:3e5})),G.set(this,!0),J.set(this,(a,b)=>{if(!1===ag(this,G,"f"))return a;if(!b)throw new W.bK("Invalid signature from replica signed query: no matching node key found.");let{status:c,signatures:d=[],requestId:e}=a,f=(0,R.em)(new TextEncoder().encode("\vic-response"));for(let g of d){let d,{timestamp:h,identity:i}=g,j=M.p.fromUint8Array(i).toText();if("replied"===c){let{reply:b}=a;d=(0,Q.uF)({status:c,reply:b,timestamp:BigInt(h),request_id:e})}else if("rejected"===c){let{reject_code:b,reject_message:f,error_code:g}=a;d=(0,Q.uF)({status:c,reject_code:b,reject_message:f,error_code:g,timestamp:BigInt(h),request_id:e})}else throw Error(`Unknown status: ${c}`);let k=(0,R.xW)(f,(0,R.em)(new Uint8Array(d))),l=null==b?void 0:b.nodeKeys.get(j);if(!l)throw new W.bK("Invalid signature from replica signed query: no matching node key found.");let m=_.G.fromDer(l).rawKey;if(X.ev.verify(g.signature,new Uint8Array(k),new Uint8Array(m)))break;throw new W.bK(`Invalid signature from replica ${j} signed query.`)}return a}),this.config=a,af(this,u,a.fetch||function(){let a;if("undefined"!=typeof window)if(window.fetch)a=window.fetch.bind(window);else throw new ai("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if("undefined"!=typeof global)if(global.fetch)a=global.fetch.bind(global);else throw new ai("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else"undefined"!=typeof self&&self.fetch&&(a=self.fetch.bind(self));if(a)return a;throw new ai("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}()||fetch.bind(global),"f"),af(this,v,a.fetchOptions,"f"),af(this,w,a.callOptions,"f"),af(this,s,null!=(b=a.shouldFetchRootKey)&&b,"f"),a.rootKey?this.rootKey=a.rootKey:ag(this,s,"f")?this.rootKey=null:this.rootKey=(0,R.aD)("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae");let d=function(a){let b;if(void 0!==a)b=new URL(a.match(/^[a-z]+:/)||"undefined"==typeof window?a:window.location.protocol+"//"+a);else{let a,c="undefined"!=typeof window?window.location:void 0,d=null==c?void 0:c.hostname;d&&"string"==typeof d&&(a=[".github.dev",".gitpod.io"].some(a=>d.endsWith(a))?d:["ic0.app","icp0.io","127.0.0.1","localhost"].find(a=>d.endsWith(a))),b=new URL(c&&a?`${c.protocol}//${a}${c.port?":"+c.port:""}`:"https://icp-api.io")}return b.toString()}(a.host);this.host=new URL(d),void 0!==a.verifyQuerySignatures&&af(this,G,a.verifyQuerySignatures,"f"),af(this,z,null!=(c=a.retryTimes)?c:3,"f");let e=()=>new ae({maxIterations:ag(this,z,"f")});if(af(this,A,a.backoffStrategy||e,"f"),this.host.hostname.endsWith(".ic0.app")?this.host.hostname="ic0.app":this.host.hostname.endsWith(".icp0.io")?this.host.hostname="icp0.io":this.host.hostname.endsWith(".icp-api.io")&&(this.host.hostname="icp-api.io"),a.credentials){let{name:b,password:c}=a.credentials;af(this,y,`${b}${c?":"+c:""}`,"f")}if(af(this,t,Promise.resolve(a.identity||new O.mC),"f"),a.ingressExpiryInMinutes&&a.ingressExpiryInMinutes>5)throw new N.Yv(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${a.ingressExpiryInMinutes} minutes.`);if(a.ingressExpiryInMinutes&&a.ingressExpiryInMinutes<=0)throw new N.Yv(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${a.ingressExpiryInMinutes} minutes.`);af(this,B,a.ingressExpiryInMinutes||5,"f"),this.addTransform("update",(0,S.s8)(T.o)),a.useQueryNonces&&this.addTransform("query",(0,S.s8)(T.o)),a.logToConsole&&this.log.subscribe(a=>{"error"===a.level?console.error(a.message):"warn"===a.level?console.warn(a.message):console.log(a.message)})}get waterMark(){return ag(this,C,"f")}static createSync(a={}){return new this(Object.assign({},a))}static async create(a={shouldFetchRootKey:!1}){let b=ak.createSync(a),c=[b.syncTime()];return"https://icp-api.io"!==b.host.toString()&&a.shouldFetchRootKey&&c.push(b.fetchRootKey()),await Promise.all(c),b}static async from(a){var b;try{if("config"in a)return await ak.create(a.config);return await ak.create({fetch:a._fetch,fetchOptions:a._fetchOptions,callOptions:a._callOptions,host:a._host.toString(),identity:null!=(b=a._identity)?b:void 0})}catch(a){throw new N.Yv("Failed to create agent from provided agent")}}isLocal(){let a=this.host.hostname;return"127.0.0.1"===a||a.endsWith("127.0.0.1")}addTransform(a,b,c=b.priority||0){if("update"===a){let a=ag(this,E,"f").findIndex(a=>(a.priority||0)<c);ag(this,E,"f").splice(a>=0?a:ag(this,E,"f").length,0,Object.assign(b,{priority:c}))}else if("query"===a){let a=ag(this,D,"f").findIndex(a=>(a.priority||0)<c);ag(this,D,"f").splice(a>=0?a:ag(this,D,"f").length,0,Object.assign(b,{priority:c}))}}async getPrincipal(){if(!ag(this,t,"f"))throw new aj("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ag(this,t,"f")).getPrincipal()}async call(a,b,c){var d,e;await ag(this,q,"m",K).call(this);let f=null==(d=b.callSync)||d,g=await (void 0!==c?await c:await ag(this,t,"f"));if(!g)throw new aj("This identity has expired due this application's security policy. Please refresh your authentication.");let h=M.p.from(a),i=b.effectiveCanisterId?M.p.from(b.effectiveCanisterId):h,j=g.getPrincipal()||M.p.anonymous(),k=new S.MM(6e4*ag(this,B,"f"));Math.abs(ag(this,x,"f"))>3e4&&(k=new S.MM(6e4*ag(this,B,"f")+ag(this,x,"f")));let l={request_type:T.q.Call,canister_id:h,method_name:b.methodName,arg:b.arg,sender:j,ingress_expiry:k},m=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ag(this,y,"f")?{Authorization:"Basic "+btoa(ag(this,y,"f"))}:{})},endpoint:"call",body:l});function n(a){return new Uint8Array(a)}l.nonce=(null==b?void 0:b.nonce)?n(b.nonce):m.body.nonce?n(m.body.nonce):void 0,m=await g.transformRequest(m);let o=P.lF(m.body),p=ag(this,A,"f").call(this),r=(0,Q.Gb)(l);try{let a=()=>(this.log.print(`fetching "/api/v3/canister/${i.toText()}/call" with request:`,m),ag(this,u,"f").call(this,""+new URL(`/api/v3/canister/${i.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ag(this,w,"f")),m.request),{body:o}))),b=()=>(this.log.print(`fetching "/api/v2/canister/${i.toText()}/call" with request:`,m),ag(this,u,"f").call(this,""+new URL(`/api/v2/canister/${i.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ag(this,w,"f")),m.request),{body:o}))),c=ag(this,q,"m",I).call(this,{request:f?a:b,backoff:p,tries:0}),d=await c,e=await d.arrayBuffer(),g=200===d.status&&e.byteLength>0?P.D4(e):null;if(g&&"certificate"in g){let a=await this.parseTimeFromResponse({certificate:g.certificate});af(this,C,a,"f")}return{requestId:r,response:{ok:d.ok,status:d.status,statusText:d.statusText,body:g,headers:(0,S.Z3)(d.headers)},requestDetails:l}}catch(g){if(g.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(a,Object.assign(Object.assign({},b),{callSync:!1}),c);let d=`Error while making call: ${null!=(e=g.message)?e:String(g)}`,f=new U.wn(d,g,(0,R.nj)(r),(0,R.nj)(m.body.sender_pubkey),(0,R.nj)(m.body.sender_sig),String(m.body.content.ingress_expiry._value));throw this.log.error(d,f),f}}async query(a,b,c){var d,e,f,g;let h;await ag(this,q,"m",K).call(this);let i=ag(this,A,"f").call(this),j=b.effectiveCanisterId?M.p.from(b.effectiveCanisterId):M.p.from(a);this.log.print(`ecid ${j.toString()}`),this.log.print(`canisterId ${a.toString()}`);let k=await (void 0!==c?c:ag(this,t,"f"));if(!k)throw new aj("This identity has expired due this application's security policy. Please refresh your authentication.");let l=M.p.from(a),m=(null==k?void 0:k.getPrincipal())||M.p.anonymous(),n={request_type:"query",canister_id:l,method_name:b.methodName,arg:b.arg,sender:m,ingress_expiry:new S.MM(6e4*ag(this,B,"f"))},o=(0,Q.Gb)(n);h=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ag(this,y,"f")?{Authorization:"Basic "+btoa(ag(this,y,"f"))}:{})},endpoint:"read",body:n}),h=await (null==k?void 0:k.transformRequest(h));let p=P.lF(h.body),r={canister:l.toText(),ecid:j,transformedRequest:h,body:p,requestId:o,backoff:i,tries:0},s=async()=>({requestDetails:n,query:await ag(this,q,"m",H).call(this,r)}),u=async()=>{if(!ag(this,G,"f"))return;let a=ag(this,F,"f").get(j.toString());return a||(await this.fetchSubnetKeys(j.toString()),ag(this,F,"f").get(j.toString()))};try{let[b,c]=await Promise.all([s(),u()]),{requestDetails:d,query:e}=b,f=Object.assign(Object.assign({},e),{requestDetails:d});if(this.log.print("Query response:",f),!ag(this,G,"f"))return f;try{return ag(this,J,"f").call(this,f,c)}catch(c){this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ag(this,F,"f").delete(a.toString()),await this.fetchSubnetKeys(j.toString());let b=ag(this,F,"f").get(a.toString());if(!b)throw new W.bK("Invalid signature from replica signed query: no matching node key found.");return ag(this,J,"f").call(this,f,b)}}catch(c){let a=`Error while making call: ${null!=(d=c.message)?d:String(c)}`,b=new U.oj(a,c,String(o),(0,R.nj)(null==(e=null==h?void 0:h.body)?void 0:e.sender_pubkey),(0,R.nj)(null==(f=null==h?void 0:h.body)?void 0:f.sender_sig),String(null==(g=null==h?void 0:h.body)?void 0:g.content.ingress_expiry._value));throw this.log.error(a,b),b}}async createReadStateRequest(a,b){await ag(this,q,"m",K).call(this);let c=await (void 0!==b?await b:await ag(this,t,"f"));if(!c)throw new aj("This identity has expired due this application's security policy. Please refresh your authentication.");let d=(null==c?void 0:c.getPrincipal())||M.p.anonymous(),e=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ag(this,y,"f")?{Authorization:"Basic "+btoa(ag(this,y,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:a.paths,sender:d,ingress_expiry:new S.MM(6e4*ag(this,B,"f"))}});return null==c?void 0:c.transformRequest(e)}async readState(a,b,c,d){var e,f,g,h;let i=function(a){for(let b of a.paths){let[a,c]=b,d=(0,R.em)(new TextEncoder().encode("request_status"));if((0,R.HA)(a,d))return c}}(b);await ag(this,q,"m",K).call(this);let j="string"==typeof a?M.p.fromText(a):a,k=null!=d?d:await this.createReadStateRequest(b,c),l=P.lF(k.body);this.log.print(`fetching "/api/v2/canister/${j}/read_state" with request:`,k);let m=ag(this,A,"f").call(this);try{let a=await ag(this,q,"m",I).call(this,{request:()=>ag(this,u,"f").call(this,""+new URL(`/api/v2/canister/${j.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ag(this,v,"f")),k.request),{body:l})),backoff:m,tries:0});if(!a.ok)throw Error(`Server returned an error:
  Code: ${a.status} (${a.statusText})
  Body: ${await a.text()}
`);let b=P.D4(await a.arrayBuffer());this.log.print("Read state response:",b);let c=await this.parseTimeFromResponse(b);return c>0&&(this.log.print("Read state response time:",c),af(this,C,c,"f")),b}catch(c){let a=`Caught exception while attempting to read state: ${null!=(e=c.message)?e:String(c)}`,b=new U.hx(a,c,String(i),(0,R.nj)(null==(f=null==k?void 0:k.body)?void 0:f.sender_pubkey),(0,R.nj)(null==(g=null==k?void 0:k.body)?void 0:g.sender_sig),String(null==(h=null==k?void 0:k.body)?void 0:h.content.ingress_expiry._value));throw this.log.error(a,b),b}}async parseTimeFromResponse(a){let b;if(a.certificate){let c=P.D4(a.certificate);if(c&&"tree"in c)b=c.tree;else throw Error("Could not decode time from response");let d=(0,W.hV)(["time"],b);if(d.status!==W.hi.Found||!(d.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(d))throw Error("Time was not found in the response or was not in its expected format.");let e=(0,aa.A)((0,R.em)(d.value));return this.log.print("Time from response:",e),this.log.print("Time from response in milliseconds:",Number(e)),Number(e)}return this.log.warn("No certificate found in response"),0}async syncTime(a){await ag(this,q,"m",K).call(this);let b=await Promise.resolve().then(c.bind(c,82639)),d=Date.now();try{a||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");let c=ak.createSync({identity:new O.mC,host:this.host.toString(),fetch:ag(this,u,"f"),retryTimes:0}),e=(await b.request({canisterId:null!=a?a:M.p.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:c,paths:["time"]})).get("time");e&&(af(this,x,Number(e)-Number(d),"f"),this.log.notify({message:`Syncing time: offset of ${ag(this,x,"f")}`,level:"info"}))}catch(a){this.log.error("Caught exception while attempting to sync time",a)}}async status(){let a=ag(this,y,"f")?{Authorization:"Basic "+btoa(ag(this,y,"f"))}:{};this.log.print('fetching "/api/v2/status"');let b=ag(this,A,"f").call(this),c=await ag(this,q,"m",I).call(this,{backoff:b,request:()=>ag(this,u,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:a},ag(this,v,"f"))),tries:0});return P.D4(await c.arrayBuffer())}async fetchRootKey(){let a;return ag(this,r,"f")||af(this,r,new Promise((a,b)=>{this.status().then(b=>{let c=b.root_key;this.rootKey=c,a(c)}).catch(b)}),"f"),a=await ag(this,r,"f"),af(this,r,null,"f"),a}invalidateIdentity(){af(this,t,null,"f")}replaceIdentity(a){af(this,t,Promise.resolve(a),"f")}async fetchSubnetKeys(a){await ag(this,q,"m",K).call(this);let b=M.p.from(a),c=(await (0,V.request)({canisterId:b,paths:["subnet"],agent:this})).get("subnet");if(c&&"object"==typeof c&&"nodeKeys"in c)return ag(this,F,"f").set(b.toText(),c),c}_transform(a){let b=Promise.resolve(a);if("call"===a.endpoint)for(let a of ag(this,E,"f"))b=b.then(b=>a(b).then(a=>a||b));else for(let a of ag(this,D,"f"))b=b.then(b=>a(b).then(a=>a||b));return b}}r=new WeakMap,s=new WeakMap,t=new WeakMap,u=new WeakMap,v=new WeakMap,w=new WeakMap,x=new WeakMap,y=new WeakMap,z=new WeakMap,A=new WeakMap,B=new WeakMap,C=new WeakMap,D=new WeakMap,E=new WeakMap,F=new WeakMap,G=new WeakMap,J=new WeakMap,q=new WeakSet,H=async function a(b){var c,d;let e,{ecid:f,transformedRequest:g,body:h,requestId:i,backoff:j,tries:k}=b,l=0===k?0:j.next();if(this.log.print(`fetching "/api/v2/canister/${f.toString()}/query" with tries:`,{tries:k,backoff:j,delay:l}),null===l)throw new N.Yv(`Timestamp failed to pass the watermark after retrying the configured ${ag(this,z,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);l>0&&await new Promise(a=>setTimeout(a,l));try{this.log.print(`fetching "/api/v2/canister/${f.toString()}/query" with request:`,g);let a=await ag(this,u,"f").call(this,""+new URL(`/api/v2/canister/${f.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ag(this,v,"f")),g.request),{body:h}));if(200===a.status){let b=P.D4(await a.arrayBuffer());e=Object.assign(Object.assign({},b),{httpDetails:{ok:a.ok,status:a.status,statusText:a.statusText,headers:(0,S.Z3)(a.headers)},requestId:i})}else throw new U.tc(`Gateway returned an error:
  Code: ${a.status} (${a.statusText})
  Body: ${await a.text()}
`,{ok:a.ok,status:a.status,statusText:a.statusText,headers:(0,S.Z3)(a.headers)})}catch(c){if(k<ag(this,z,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${c}
  Retrying query.`),await ag(this,q,"m",a).call(this,Object.assign(Object.assign({},b),{tries:k+1}));throw c}let m=null==(d=null==(c=e.signatures)?void 0:c[0])?void 0:d.timestamp;if(!ag(this,G,"f"))return e;if(!m)throw Error("Timestamp not found in query response. This suggests a malformed or malicious response.");let n=Number(BigInt(m)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:n}),Number(this.waterMark)>n){let c=new N.Yv("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",c,{timestamp:m,waterMark:this.waterMark}),k<ag(this,z,"f"))return await ag(this,q,"m",a).call(this,Object.assign(Object.assign({},b),{tries:k+1}));throw new N.Yv(`Timestamp failed to pass the watermark after retrying the configured ${ag(this,z,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return e},I=async function a(b){let c,{request:d,backoff:e,tries:f}=b,g=0===f?0:e.next();if(null===g)throw new N.Yv(`Timestamp failed to pass the watermark after retrying the configured ${ag(this,z,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);g>0&&await new Promise(a=>setTimeout(a,g));try{c=await d()}catch(b){if(ag(this,z,"f")>f)return this.log.warn(`Caught exception while attempting to make request:
  ${b}
  Retrying request.`),await ag(this,q,"m",a).call(this,{request:d,backoff:e,tries:f+1});throw b}if(c.ok)return c;let h=await c.clone().text(),i=`Server returned an error:
  Code: ${c.status} (${c.statusText})
  Body: ${h}
`;if(404===c.status&&c.url.includes("api/v3"))throw new U.tc("v3 api not supported. Fall back to v2",{ok:c.ok,status:c.status,statusText:c.statusText,headers:(0,S.Z3)(c.headers)});if(f<ag(this,z,"f"))return await ag(this,q,"m",a).call(this,{request:d,backoff:e,tries:f+1});throw new U.tc(i,{ok:c.ok,status:c.status,statusText:c.statusText,headers:(0,S.Z3)(c.headers)})},K=async function(){if(!this.rootKey)if(null===this.rootKey&&ag(this,s,"f"))await this.fetchRootKey();else throw new N.Yv(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ag(this,s,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)}},91818:(a,b,c)=>{"use strict";c.d(b,{us:()=>av,bK:()=>au,hi:()=>f,Gk:()=>aB,Bx:()=>function a(b){switch(b[0]){case e.Empty:return[];case e.Fork:return a(b[1]).concat(a(b[2]));default:return[b]}},Xr:()=>ax,hV:()=>aA});var d,e,f,g,h=c(75095),i=c(7736),j=c(6928),k=c(83967),l=c(65689),m=c(13923),n=c(86900),o=c(90113),p=c(51151),q=c(69920),r=c(64014);let s=(a,b)=>(a+(a>=0?b:-b)/v)/b,t=BigInt(0),u=BigInt(1),v=BigInt(2),w=BigInt(3),x=BigInt(4);function y(a,b,c){return function(d){let e=a.sqr(d),f=a.mul(e,d);return a.add(a.add(f,a.mul(d,b)),c)}}function z(a,b){let c,{BYTES:d}=a;if("bigint"==typeof b)c=b;else{let e=(0,n.qj)("private key",b);try{c=a.fromBytes(e)}catch(a){throw Error(`invalid private key: expected ui8a of size ${d}, got ${typeof b}`)}}if(!a.isValidNot0(c))throw Error("invalid private key: out of range [1..N-1]");return c}function A(a){let{CURVE:b,curveOpts:c}=function(a){let b={a:a.a,b:a.b,p:a.Fp.ORDER,n:a.n,h:a.h,Gx:a.Gx,Gy:a.Gy},c=a.Fp,d=a.allowedPrivateKeyLengths?Array.from(new Set(a.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0,e={Fp:c,Fn:(0,r.D0)(b.n,{BITS:a.nBitLength,allowedLengths:d,modOnDecode:a.wrapPrivateKey}),allowInfinityPoint:a.allowInfinityPoint,endo:a.endo,isTorsionFree:a.isTorsionFree,clearCofactor:a.clearCofactor,fromBytes:a.fromBytes,toBytes:a.toBytes};return{CURVE:b,curveOpts:e}}(a);var d=a,e=function(a,b={}){let{Fp:c,Fn:d}=(0,p.UT)("weierstrass",a,b),{h:e,n:f}=a;(0,n.DS)(b,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:g}=b;if(g&&(!c.is0(a.a)||"bigint"!=typeof g.beta||!Array.isArray(g.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');function h(){if(!c.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let i=b.toBytes||function(a,b,d){let{x:e,y:f}=b.toAffine(),g=c.toBytes(e);if((0,n.e8)("isCompressed",d),!d)return(0,o.Id)(Uint8Array.of(4),g,c.toBytes(f));{var i;h();let a=!c.isOdd(f);return(0,o.Id)((i=a,Uint8Array.of(i?2:3)),g)}},j=b.fromBytes||function(a){(0,o.DO)(a);let b=c.BYTES,d=b+1,e=2*b+1,f=a.length,g=a[0],i=a.subarray(1);if(f===d&&(2===g||3===g)){let a,b=c.fromBytes(i);if(!c.isValid(b))throw Error("bad point: is not on curve, wrong x");let d=k(b);try{a=c.sqrt(d)}catch(a){throw Error("bad point: is not on curve, sqrt error"+(a instanceof Error?": "+a.message:""))}return h(),(1&g)==1!==c.isOdd(a)&&(a=c.neg(a)),{x:b,y:a}}if(f===e&&4===g){let a=c.fromBytes(i.subarray(0*b,+b)),d=c.fromBytes(i.subarray(+b,2*b));if(!l(a,d))throw Error("bad point: is not on curve");return{x:a,y:d}}throw Error(`bad point: got length ${f}, expected compressed=${d} or uncompressed=${e}`)},k=y(c,a.a,a.b);function l(a,b){let d=c.sqr(b),e=k(a);return c.eql(d,e)}if(!l(a.Gx,a.Gy))throw Error("bad curve params: generator point");let m=c.mul(c.pow(a.a,w),x),q=c.mul(c.sqr(a.b),BigInt(27));if(c.is0(c.add(m,q)))throw Error("bad curve params: a or b");function r(a,b,d=!1){if(!c.isValid(b)||d&&c.is0(b))throw Error(`bad point coordinate ${a}`);return b}function v(a){if(!(a instanceof E))throw Error("ProjectivePoint expected")}function A(a){if(!g||!g.basises)throw Error("no endo");return function(a,b,c){let[[d,e],[f,g]]=b,h=s(g*a,c),i=s(-e*a,c),j=a-h*d-i*f,k=-h*e-i*g,l=j<t,m=k<t;l&&(j=-j),m&&(k=-k);let o=(0,n.OG)(Math.ceil((0,n.dJ)(c)/2))+u;if(j<t||j>=o||k<t||k>=o)throw Error("splitScalar (endomorphism): failed, k="+a);return{k1neg:l,k1:j,k2neg:m,k2:k}}(a,g.basises,d.ORDER)}let B=(0,n.x)((a,b)=>{let{X:d,Y:e,Z:f}=a;if(c.eql(f,c.ONE))return{x:d,y:e};let g=a.is0();null==b&&(b=g?c.ONE:c.inv(f));let h=c.mul(d,b),i=c.mul(e,b),j=c.mul(f,b);if(g)return{x:c.ZERO,y:c.ZERO};if(!c.eql(j,c.ONE))throw Error("invZ was invalid");return{x:h,y:i}}),C=(0,n.x)(a=>{if(a.is0()){if(b.allowInfinityPoint&&!c.is0(a.Y))return;throw Error("bad point: ZERO")}let{x:d,y:e}=a.toAffine();if(!c.isValid(d)||!c.isValid(e))throw Error("bad point: x or y not field elements");if(!l(d,e))throw Error("bad point: equation left != right");if(!a.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function D(a,b,d,e,f){return d=new E(c.mul(d.X,a),d.Y,d.Z),b=(0,p.u0)(e,b),d=(0,p.u0)(f,d),b.add(d)}class E{constructor(a,b,c){this.X=r("x",a),this.Y=r("y",b,!0),this.Z=r("z",c),Object.freeze(this)}static fromAffine(a){let{x:b,y:d}=a||{};if(!a||!c.isValid(b)||!c.isValid(d))throw Error("invalid affine point");if(a instanceof E)throw Error("projective point not allowed");return c.is0(b)&&c.is0(d)?E.ZERO:new E(b,d,c.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}static normalizeZ(a){return(0,p.Ak)(E,a)}static fromBytes(a){return(0,o.DO)(a),E.fromHex(a)}static fromHex(a){let b=E.fromAffine(j((0,n.qj)("pointHex",a)));return b.assertValidity(),b}static fromPrivateKey(a){return E.BASE.multiply(z(d,a))}static msm(a,b){return(0,p.Xf)(E,d,a,b)}_setWindowSize(a){this.precompute(a)}precompute(a=8,b=!0){return G.createCache(this,a),b||this.multiply(w),this}assertValidity(){C(this)}hasEvenY(){let{y:a}=this.toAffine();if(!c.isOdd)throw Error("Field doesn't support isOdd");return!c.isOdd(a)}equals(a){v(a);let{X:b,Y:d,Z:e}=this,{X:f,Y:g,Z:h}=a,i=c.eql(c.mul(b,h),c.mul(f,e)),j=c.eql(c.mul(d,h),c.mul(g,e));return i&&j}negate(){return new E(this.X,c.neg(this.Y),this.Z)}double(){let{a:b,b:d}=a,e=c.mul(d,w),{X:f,Y:g,Z:h}=this,i=c.ZERO,j=c.ZERO,k=c.ZERO,l=c.mul(f,f),m=c.mul(g,g),n=c.mul(h,h),o=c.mul(f,g);return o=c.add(o,o),k=c.mul(f,h),k=c.add(k,k),i=c.mul(b,k),j=c.mul(e,n),j=c.add(i,j),i=c.sub(m,j),j=c.add(m,j),j=c.mul(i,j),i=c.mul(o,i),k=c.mul(e,k),n=c.mul(b,n),o=c.sub(l,n),o=c.mul(b,o),o=c.add(o,k),k=c.add(l,l),l=c.add(k,l),l=c.add(l,n),l=c.mul(l,o),j=c.add(j,l),n=c.mul(g,h),n=c.add(n,n),l=c.mul(n,o),i=c.sub(i,l),k=c.mul(n,m),k=c.add(k,k),new E(i,j,k=c.add(k,k))}add(b){v(b);let{X:d,Y:e,Z:f}=this,{X:g,Y:h,Z:i}=b,j=c.ZERO,k=c.ZERO,l=c.ZERO,m=a.a,n=c.mul(a.b,w),o=c.mul(d,g),p=c.mul(e,h),q=c.mul(f,i),r=c.add(d,e),s=c.add(g,h);r=c.mul(r,s),s=c.add(o,p),r=c.sub(r,s),s=c.add(d,f);let t=c.add(g,i);return s=c.mul(s,t),t=c.add(o,q),s=c.sub(s,t),t=c.add(e,f),j=c.add(h,i),t=c.mul(t,j),j=c.add(p,q),t=c.sub(t,j),l=c.mul(m,s),j=c.mul(n,q),l=c.add(j,l),j=c.sub(p,l),l=c.add(p,l),k=c.mul(j,l),p=c.add(o,o),p=c.add(p,o),q=c.mul(m,q),s=c.mul(n,s),p=c.add(p,q),q=c.sub(o,q),q=c.mul(m,q),s=c.add(s,q),o=c.mul(p,s),k=c.add(k,o),o=c.mul(t,s),j=c.mul(r,j),j=c.sub(j,o),o=c.mul(r,p),l=c.mul(t,l),new E(j,k,l=c.add(l,o))}subtract(a){return this.add(a.negate())}is0(){return this.equals(E.ZERO)}multiply(a){let c,e,{endo:f}=b;if(!d.isValidNot0(a))throw Error("invalid scalar: out of range");let g=a=>G.cached(this,a,a=>(0,p.Ak)(E,a));if(f){let{k1neg:b,k1:d,k2neg:h,k2:i}=A(a),{p:j,f:k}=g(d),{p:l,f:m}=g(i);e=k.add(m),c=D(f.beta,j,l,b,h)}else{let{p:b,f:d}=g(a);c=b,e=d}return(0,p.Ak)(E,[c,e])[0]}multiplyUnsafe(a){let{endo:c}=b;if(!d.isValid(a))throw Error("invalid scalar: out of range");if(a===t||this.is0())return E.ZERO;if(a===u)return this;if(G.hasCache(this))return this.multiply(a);if(!c)return G.unsafe(this,a);{let{k1neg:b,k1:d,k2neg:e,k2:f}=A(a),{p1:g,p2:h}=(0,p.fH)(E,this,d,f);return D(c.beta,g,h,b,e)}}multiplyAndAddUnsafe(a,b,c){let d=this.multiplyUnsafe(b).add(a.multiplyUnsafe(c));return d.is0()?void 0:d}toAffine(a){return B(this,a)}isTorsionFree(){let{isTorsionFree:a}=b;return e===u||(a?a(E,this):G.unsafe(this,f).is0())}clearCofactor(){let{clearCofactor:a}=b;return e===u?this:a?a(E,this):this.multiplyUnsafe(e)}isSmallOrder(){return this.multiplyUnsafe(e).is0()}toBytes(a=!0){return(0,n.e8)("isCompressed",a),this.assertValidity(),i(E,this,a)}toRawBytes(a=!0){return this.toBytes(a)}toHex(a=!0){return(0,o.My)(this.toBytes(a))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}E.BASE=new E(a.Gx,a.Gy,c.ONE),E.ZERO=new E(c.ZERO,c.ONE,c.ZERO),E.Fp=c,E.Fn=d;let F=d.BITS,G=new p.hT(E,b.endo?Math.ceil(F/2):F);return E}(b,c);let{Fp:f,Fn:g}=e,h=y(f,d.a,d.b);return Object.assign({},{CURVE:d,Point:e,ProjectivePoint:e,normPrivateKeyToScalar:a=>z(g,a),weierstrassEquation:h,isWithinCurveOrder:function(a){return(0,n.r4)(a,u,g.ORDER)}})}function B(a,b){(0,r.jr)(a);let{A:c,B:d,Z:e}=b;if(!a.isValid(c)||!a.isValid(d)||!a.isValid(e))throw Error("mapToCurveSimpleSWU: invalid opts");let f=function(a,b){let c=a.ORDER,d=t;for(let a=c-u;a%v===t;a/=v)d+=u;let e=d,f=v<<e-u-u,g=f*v,h=(c-u)/g,i=(h-u)/v,j=g-u,k=a.pow(b,h),l=a.pow(b,(h+u)/v),m=(b,c)=>{let d=k,g=a.pow(c,j),h=a.sqr(g);h=a.mul(h,c);let m=a.mul(b,h);m=a.pow(m,i),m=a.mul(m,g),g=a.mul(m,c),h=a.mul(m,b);let n=a.mul(h,g);m=a.pow(n,f);let o=a.eql(m,a.ONE);g=a.mul(h,l),m=a.mul(n,d),h=a.cmov(g,h,o),n=a.cmov(m,n,o);for(let b=e;b>u;b--){let c=b-v;c=v<<c-u;let e=a.pow(n,c),f=a.eql(e,a.ONE);g=a.mul(h,d),d=a.mul(d,d),e=a.mul(n,d),h=a.cmov(g,h,f),n=a.cmov(e,n,f)}return{isValid:o,value:h}};if(a.ORDER%x===w){let c=(a.ORDER-w)/x,d=a.sqrt(a.neg(b));m=(b,e)=>{let f=a.sqr(e),g=a.mul(b,e);f=a.mul(f,g);let h=a.pow(f,c);h=a.mul(h,g);let i=a.mul(h,d),j=a.mul(a.sqr(h),e),k=a.eql(j,b),l=a.cmov(i,h,k);return{isValid:k,value:l}}}return m}(a,e);if(!a.isOdd)throw Error("Field does not have .isOdd()");return b=>{let g,h,i,j,k,l,m,n;g=a.sqr(b),g=a.mul(g,e),h=a.sqr(g),h=a.add(h,g),i=a.add(h,a.ONE),i=a.mul(i,d),j=a.cmov(e,a.neg(h),!a.eql(h,a.ZERO)),j=a.mul(j,c),h=a.sqr(i),l=a.sqr(j),k=a.mul(l,c),h=a.add(h,k),h=a.mul(h,i),l=a.mul(l,j),k=a.mul(l,d),h=a.add(h,k),m=a.mul(g,i);let{isValid:o,value:p}=f(h,l);n=a.mul(g,b),n=a.mul(n,p),m=a.cmov(m,i,o),n=a.cmov(n,p,o);let q=a.isOdd(b)===a.isOdd(n);n=a.cmov(a.neg(n),n,q);let s=(0,r.pS)(a,[j],!0)[0];return{x:m=a.mul(m,s),y:n}}}let C=BigInt(0),D=BigInt(1),E=BigInt(2),F=BigInt(3);function G(a){if(!Array.isArray(a)||0===a.length)throw Error("expected non-empty array")}function H(a,b,c,d,e){let{Fp12:f,pairingBatch:g}=a;function h(a){return a instanceof b.Point?a:b.Point.fromHex(a)}function i(a){return a instanceof c.Point?a:c.Point.fromHex(a)}function j(a){if(!(a instanceof c.Point))throw Error(`expected valid message hashed to ${!e?"G2":"G1"} curve`);return a}let k=e?(a,b)=>({g1:b,g2:a}):(a,b)=>({g1:a,g2:b});return{getPublicKey(a){let c=z(b.Point.Fn,a);return b.Point.BASE.multiply(c)},sign(a,c,d){if(null!=d)throw Error("sign() expects 2 arguments");let e=z(b.Point.Fn,c);return j(a).assertValidity(),a.multiply(e)},verify(a,c,d,e){if(null!=e)throw Error("verify() expects 3 arguments");a=i(a);let l=(d=h(d)).negate(),m=b.Point.BASE,n=j(c),o=a,p=g([k(l,n),k(m,o)]);return f.eql(p,f.ONE)},verifyBatch(a,c,d){if(G(c),d.length!==c.length)throw Error("amount of public keys and messages should be equal");let e=i(a),j=d.map(h),l=new Map;for(let a=0;a<j.length;a++){let b=j[a],d=c[a],e=l.get(d);void 0===e&&(e=[],l.set(d,e)),e.push(b)}let m=[],n=b.Point.BASE;try{for(let[a,b]of l){let c=b.reduce((a,b)=>a.add(b));m.push(k(c,a))}return m.push(k(n.negate(),e)),f.eql(g(m),f.ONE)}catch{return!1}},aggregatePublicKeys(a){G(a);let c=(a=a.map(a=>h(a))).reduce((a,b)=>a.add(b),b.Point.ZERO);return c.assertValidity(),c},aggregateSignatures(a){G(a);let b=(a=a.map(a=>i(a))).reduce((a,b)=>a.add(b),c.Point.ZERO);return b.assertValidity(),b},hash:(a,b)=>((0,o.DO)(a),c.hashToCurve(a,b?{DST:b}:void 0)),Signature:d}}let I=BigInt(0),J=BigInt(1),K=BigInt(2),L=BigInt(3);function M(a,b,c,d,e=1,f){let g=BigInt(void 0===f?d:f),h=c**BigInt(d),i=[];for(let f=0;f<e;f++){let e=BigInt(f+1),j=[];for(let f=0,i=J;f<d;f++){let d=(e*i-e)/g%h;j.push(a.pow(b,d)),i*=c}i.push(j)}return i}let N=BigInt(0),O=BigInt(1),P=BigInt(2),Q=BigInt(3),R=BigInt(4),S=BigInt("0xd201000000010000"),T=(0,n.dJ)(S),U={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:N,b:R,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},V=(0,r.D0)(U.n,{modOnDecode:!0}),{Fp:W,Fp2:X,Fp6:Y,Fp4Square:Z,Fp12:$}=function(a){let{ORDER:b}=a,c=r.D0(b),d=c.create(a.NONRESIDUE||BigInt(-1)),e=c.div(c.ONE,K),f=M(c,d,c.ORDER,2)[0],g=({c0:a,c1:b},{c0:d,c1:e})=>({c0:c.add(a,d),c1:c.add(b,e)}),h=({c0:a,c1:b},{c0:d,c1:e})=>({c0:c.sub(a,d),c1:c.sub(b,e)}),i=({c0:a,c1:b},d)=>{if("bigint"==typeof d)return{c0:c.mul(a,d),c1:c.mul(b,d)};let{c0:e,c1:f}=d,g=c.mul(a,e),h=c.mul(b,f);return{c0:c.sub(g,h),c1:c.sub(c.mul(c.add(a,b),c.add(e,f)),c.add(g,h))}},j=({c0:a,c1:b})=>{let d=c.add(a,b),e=c.sub(a,b),f=c.add(a,a);return{c0:c.mul(d,e),c1:c.mul(f,b)}},k=a=>{if(2!==a.length)throw Error("invalid tuple");let b=a.map(a=>c.create(a));return{c0:b[0],c1:b[1]}};function l(a,b){return"bigint"==typeof a&&I<=a&&a<b}let m=b*b,p=k(a.FP2_NONRESIDUE),q={ORDER:m,isLE:c.isLE,NONRESIDUE:p,BITS:(0,n.dJ)(m),BYTES:Math.ceil((0,n.dJ)(m)/8),MASK:(0,n.OG)((0,n.dJ)(m)),ZERO:{c0:c.ZERO,c1:c.ZERO},ONE:{c0:c.ONE,c1:c.ZERO},create:a=>a,isValid:({c0:a,c1:b})=>l(a,m)&&l(b,m),is0:({c0:a,c1:b})=>c.is0(a)&&c.is0(b),isValidNot0:a=>!q.is0(a)&&q.isValid(a),eql:({c0:a,c1:b},{c0:d,c1:e})=>c.eql(a,d)&&c.eql(b,e),neg:({c0:a,c1:b})=>({c0:c.neg(a),c1:c.neg(b)}),pow:(a,b)=>r.f4(q,a,b),invertBatch:a=>r.pS(q,a),add:g,sub:h,mul:i,sqr:j,addN:g,subN:h,mulN:i,sqrN:j,div:(a,b)=>q.mul(a,"bigint"==typeof b?c.inv(c.create(b)):q.inv(b)),inv:({c0:a,c1:b})=>{let d=c.inv(c.create(a*a+b*b));return{c0:c.mul(d,c.create(a)),c1:c.mul(d,c.create(-b))}},sqrt:b=>{if(a.Fp2sqrt)return a.Fp2sqrt(b);let{c0:f,c1:g}=b;if(c.is0(g))if(1===r.tB(c,f))return q.create({c0:c.sqrt(f),c1:c.ZERO});else return q.create({c0:c.ZERO,c1:c.sqrt(c.div(f,d))});let h=c.sqrt(c.sub(c.sqr(f),c.mul(c.sqr(g),d))),i=c.mul(c.add(h,f),e);-1===r.tB(c,i)&&(i=c.sub(i,h));let j=c.sqrt(i),k=q.create({c0:j,c1:c.div(c.mul(g,e),j)});if(!q.eql(q.sqr(k),b))throw Error("Cannot find square root");let l=q.neg(k),{re:m,im:n}=q.reim(k),{re:o,im:p}=q.reim(l);return n>p||n===p&&m>o?k:l},isOdd:a=>{let{re:b,im:c}=q.reim(a),d=b%K,e=c%K;return BigInt(d||b===I&&e)==J},fromBytes(a){if(a.length!==q.BYTES)throw Error("fromBytes invalid length="+a.length);return{c0:c.fromBytes(a.subarray(0,c.BYTES)),c1:c.fromBytes(a.subarray(c.BYTES))}},toBytes:({c0:a,c1:b})=>(0,o.Id)(c.toBytes(a),c.toBytes(b)),cmov:({c0:a,c1:b},{c0:d,c1:e},f)=>({c0:c.cmov(a,d,f),c1:c.cmov(b,e,f)}),reim:({c0:a,c1:b})=>({re:a,im:b}),mulByNonresidue:({c0:a,c1:b})=>q.mul({c0:a,c1:b},p),mulByB:a.Fp2mulByB,fromBigTuple:k,frobeniusMap:({c0:a,c1:b},d)=>({c0:a,c1:c.mul(b,f[d%2])})},s=({c0:a,c1:b,c2:c},{c0:d,c1:e,c2:f})=>({c0:q.add(a,d),c1:q.add(b,e),c2:q.add(c,f)}),t=({c0:a,c1:b,c2:c},{c0:d,c1:e,c2:f})=>({c0:q.sub(a,d),c1:q.sub(b,e),c2:q.sub(c,f)}),u=({c0:a,c1:b,c2:c},d)=>{if("bigint"==typeof d)return{c0:q.mul(a,d),c1:q.mul(b,d),c2:q.mul(c,d)};let{c0:e,c1:f,c2:g}=d,h=q.mul(a,e),i=q.mul(b,f),j=q.mul(c,g);return{c0:q.add(h,q.mulByNonresidue(q.sub(q.mul(q.add(b,c),q.add(f,g)),q.add(i,j)))),c1:q.add(q.sub(q.mul(q.add(a,b),q.add(e,f)),q.add(h,i)),q.mulByNonresidue(j)),c2:q.sub(q.add(i,q.mul(q.add(a,c),q.add(e,g))),q.add(h,j))}},v=({c0:a,c1:b,c2:c})=>{let d=q.sqr(a),e=q.mul(q.mul(a,b),K),f=q.mul(q.mul(b,c),K),g=q.sqr(c);return{c0:q.add(q.mulByNonresidue(f),d),c1:q.add(q.mulByNonresidue(g),e),c2:q.sub(q.sub(q.add(q.add(e,q.sqr(q.add(q.sub(a,b),c))),f),d),g)}},[w,x]=M(q,p,c.ORDER,6,2,3),y={ORDER:q.ORDER,isLE:q.isLE,BITS:3*q.BITS,BYTES:3*q.BYTES,MASK:(0,n.OG)(3*q.BITS),ZERO:{c0:q.ZERO,c1:q.ZERO,c2:q.ZERO},ONE:{c0:q.ONE,c1:q.ZERO,c2:q.ZERO},create:a=>a,isValid:({c0:a,c1:b,c2:c})=>q.isValid(a)&&q.isValid(b)&&q.isValid(c),is0:({c0:a,c1:b,c2:c})=>q.is0(a)&&q.is0(b)&&q.is0(c),isValidNot0:a=>!y.is0(a)&&y.isValid(a),neg:({c0:a,c1:b,c2:c})=>({c0:q.neg(a),c1:q.neg(b),c2:q.neg(c)}),eql:({c0:a,c1:b,c2:c},{c0:d,c1:e,c2:f})=>q.eql(a,d)&&q.eql(b,e)&&q.eql(c,f),sqrt:n.SJ,div:(a,b)=>y.mul(a,"bigint"==typeof b?c.inv(c.create(b)):y.inv(b)),pow:(a,b)=>r.f4(y,a,b),invertBatch:a=>r.pS(y,a),add:s,sub:t,mul:u,sqr:v,addN:s,subN:t,mulN:u,sqrN:v,inv:({c0:a,c1:b,c2:c})=>{let d=q.sub(q.sqr(a),q.mulByNonresidue(q.mul(c,b))),e=q.sub(q.mulByNonresidue(q.sqr(c)),q.mul(a,b)),f=q.sub(q.sqr(b),q.mul(a,c)),g=q.inv(q.add(q.mulByNonresidue(q.add(q.mul(c,e),q.mul(b,f))),q.mul(a,d)));return{c0:q.mul(g,d),c1:q.mul(g,e),c2:q.mul(g,f)}},fromBytes:a=>{if(a.length!==y.BYTES)throw Error("fromBytes invalid length="+a.length);return{c0:q.fromBytes(a.subarray(0,q.BYTES)),c1:q.fromBytes(a.subarray(q.BYTES,2*q.BYTES)),c2:q.fromBytes(a.subarray(2*q.BYTES))}},toBytes:({c0:a,c1:b,c2:c})=>(0,o.Id)(q.toBytes(a),q.toBytes(b),q.toBytes(c)),cmov:({c0:a,c1:b,c2:c},{c0:d,c1:e,c2:f},g)=>({c0:q.cmov(a,d,g),c1:q.cmov(b,e,g),c2:q.cmov(c,f,g)}),fromBigSix:a=>{if(!Array.isArray(a)||6!==a.length)throw Error("invalid Fp6 usage");return{c0:q.fromBigTuple(a.slice(0,2)),c1:q.fromBigTuple(a.slice(2,4)),c2:q.fromBigTuple(a.slice(4,6))}},frobeniusMap:({c0:a,c1:b,c2:c},d)=>({c0:q.frobeniusMap(a,d),c1:q.mul(q.frobeniusMap(b,d),w[d%6]),c2:q.mul(q.frobeniusMap(c,d),x[d%6])}),mulByFp2:({c0:a,c1:b,c2:c},d)=>({c0:q.mul(a,d),c1:q.mul(b,d),c2:q.mul(c,d)}),mulByNonresidue:({c0:a,c1:b,c2:c})=>({c0:q.mulByNonresidue(c),c1:a,c2:b}),mul1:({c0:a,c1:b,c2:c},d)=>({c0:q.mulByNonresidue(q.mul(c,d)),c1:q.mul(a,d),c2:q.mul(b,d)}),mul01({c0:a,c1:b,c2:c},d,e){let f=q.mul(a,d),g=q.mul(b,e);return{c0:q.add(q.mulByNonresidue(q.sub(q.mul(q.add(b,c),e),g)),f),c1:q.sub(q.sub(q.mul(q.add(d,e),q.add(a,b)),f),g),c2:q.add(q.sub(q.mul(q.add(a,c),d),f),g)}}},z=M(q,p,c.ORDER,12,1,6)[0],A=({c0:a,c1:b},{c0:c,c1:d})=>({c0:y.add(a,c),c1:y.add(b,d)}),B=({c0:a,c1:b},{c0:c,c1:d})=>({c0:y.sub(a,c),c1:y.sub(b,d)}),C=({c0:a,c1:b},c)=>{if("bigint"==typeof c)return{c0:y.mul(a,c),c1:y.mul(b,c)};let{c0:d,c1:e}=c,f=y.mul(a,d),g=y.mul(b,e);return{c0:y.add(f,y.mulByNonresidue(g)),c1:y.sub(y.mul(y.add(a,b),y.add(d,e)),y.add(f,g))}},D=({c0:a,c1:b})=>{let c=y.mul(a,b);return{c0:y.sub(y.sub(y.mul(y.add(y.mulByNonresidue(b),a),y.add(a,b)),c),y.mulByNonresidue(c)),c1:y.add(c,c)}},E={ORDER:q.ORDER,isLE:y.isLE,BITS:2*y.BITS,BYTES:2*y.BYTES,MASK:(0,n.OG)(2*y.BITS),ZERO:{c0:y.ZERO,c1:y.ZERO},ONE:{c0:y.ONE,c1:y.ZERO},create:a=>a,isValid:({c0:a,c1:b})=>y.isValid(a)&&y.isValid(b),is0:({c0:a,c1:b})=>y.is0(a)&&y.is0(b),isValidNot0:a=>!E.is0(a)&&E.isValid(a),neg:({c0:a,c1:b})=>({c0:y.neg(a),c1:y.neg(b)}),eql:({c0:a,c1:b},{c0:c,c1:d})=>y.eql(a,c)&&y.eql(b,d),sqrt:n.SJ,inv:({c0:a,c1:b})=>{let c=y.inv(y.sub(y.sqr(a),y.mulByNonresidue(y.sqr(b))));return{c0:y.mul(a,c),c1:y.neg(y.mul(b,c))}},div:(a,b)=>E.mul(a,"bigint"==typeof b?c.inv(c.create(b)):E.inv(b)),pow:(a,b)=>r.f4(E,a,b),invertBatch:a=>r.pS(E,a),add:A,sub:B,mul:C,sqr:D,addN:A,subN:B,mulN:C,sqrN:D,fromBytes:a=>{if(a.length!==E.BYTES)throw Error("fromBytes invalid length="+a.length);return{c0:y.fromBytes(a.subarray(0,y.BYTES)),c1:y.fromBytes(a.subarray(y.BYTES))}},toBytes:({c0:a,c1:b})=>(0,o.Id)(y.toBytes(a),y.toBytes(b)),cmov:({c0:a,c1:b},{c0:c,c1:d},e)=>({c0:y.cmov(a,c,e),c1:y.cmov(b,d,e)}),fromBigTwelve:a=>({c0:y.fromBigSix(a.slice(0,6)),c1:y.fromBigSix(a.slice(6,12))}),frobeniusMap(a,b){let{c0:c,c1:d,c2:e}=y.frobeniusMap(a.c1,b),f=z[b%12];return{c0:y.frobeniusMap(a.c0,b),c1:y.create({c0:q.mul(c,f),c1:q.mul(d,f),c2:q.mul(e,f)})}},mulByFp2:({c0:a,c1:b},c)=>({c0:y.mulByFp2(a,c),c1:y.mulByFp2(b,c)}),conjugate:({c0:a,c1:b})=>({c0:a,c1:y.neg(b)}),mul014:({c0:a,c1:b},c,d,e)=>{let f=y.mul01(a,c,d),g=y.mul1(b,e);return{c0:y.add(y.mulByNonresidue(g),f),c1:y.sub(y.sub(y.mul01(y.add(b,a),c,q.add(d,e)),f),g)}},mul034:({c0:a,c1:b},c,d,e)=>{let f=y.create({c0:q.mul(a.c0,c),c1:q.mul(a.c1,c),c2:q.mul(a.c2,c)}),g=y.mul01(b,d,e),h=y.mul01(y.add(a,b),q.add(c,d),e);return{c0:y.add(y.mulByNonresidue(g),f),c1:y.sub(h,y.add(f,g))}},_cyclotomicSquare:a.Fp12cyclotomicSquare,_cyclotomicExp:a.Fp12cyclotomicExp,finalExponentiate:a.Fp12finalExponentiate};return{Fp:c,Fp2:q,Fp6:y,Fp12:E,Fp4Square:function(a,b){let c=q.sqr(a),d=q.sqr(b);return{first:q.add(q.mulByNonresidue(d),c),second:q.sub(q.sub(q.sqr(q.add(a,b)),c),d)}}}}({ORDER:U.p,FP2_NONRESIDUE:[O,O],Fp2mulByB:({c0:a,c1:b})=>{let c=W.mul(a,R),d=W.mul(b,R);return{c0:W.sub(c,d),c1:W.add(c,d)}},Fp12cyclotomicSquare:({c0:a,c1:b})=>{let{c0:c,c1:d,c2:e}=a,{c0:f,c1:g,c2:h}=b,{first:i,second:j}=Z(c,g),{first:k,second:l}=Z(f,e),{first:m,second:n}=Z(d,h),o=X.mulByNonresidue(n);return{c0:Y.create({c0:X.add(X.mul(X.sub(i,c),P),i),c1:X.add(X.mul(X.sub(k,d),P),k),c2:X.add(X.mul(X.sub(m,e),P),m)}),c1:Y.create({c0:X.add(X.mul(X.add(o,f),P),o),c1:X.add(X.mul(X.add(j,g),P),j),c2:X.add(X.mul(X.add(l,h),P),l)})}},Fp12cyclotomicExp(a,b){let c=$.ONE;for(let d=T-1;d>=0;d--)c=$._cyclotomicSquare(c),(0,n.GU)(b,d)&&(c=$.mul(c,a));return c},Fp12finalExponentiate:a=>{let b=$.div($.frobeniusMap(a,6),a),c=$.mul($.frobeniusMap(b,2),b),d=$.conjugate($._cyclotomicExp(c,S)),e=$.mul($.conjugate($._cyclotomicSquare(c)),d),f=$.conjugate($._cyclotomicExp(e,S)),g=$.conjugate($._cyclotomicExp(f,S)),h=$.mul($.conjugate($._cyclotomicExp(g,S)),$._cyclotomicSquare(d)),i=$.conjugate($._cyclotomicExp(h,S)),j=$.frobeniusMap($.mul(d,g),2),k=$.frobeniusMap($.mul(f,c),3),l=$.frobeniusMap($.mul(h,$.conjugate(c)),1),m=$.mul($.mul(i,$.conjugate(e)),c);return $.mul($.mul($.mul(j,k),l),m)}}),{G2psi:_,G2psi2:aa}=function(a,b,c){let d=b.pow(c,(a.ORDER-J)/L),e=b.pow(c,(a.ORDER-J)/K);function f(a,c){return[b.mul(b.frobeniusMap(a,1),d),b.mul(b.frobeniusMap(c,1),e)]}let g=b.pow(c,(a.ORDER**K-J)/L),h=b.pow(c,(a.ORDER**K-J)/K);if(!b.eql(h,b.neg(b.ONE)))throw Error("psiFrobenius: PSI2_Y!==-1");function i(a,c){return[b.mul(a,g),b.neg(c)]}let j=a=>(b,c)=>{let d=c.toAffine(),e=a(d.x,d.y);return b.fromAffine({x:e[0],y:e[1]})},k=j(f),l=j(i);return{psi:f,psi2:i,G2psi:k,G2psi2:l,PSI_X:d,PSI_Y:e,PSI2_X:g,PSI2_Y:h}}(W,X,X.div(X.ONE,X.NONRESIDUE)),ab=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:W.ORDER,m:2,k:128,expand:"xmd",hash:m.sc}),ac={p:X.ORDER,n:U.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:X.ZERO,b:X.fromBigTuple([R,R]),Gx:X.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:X.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},ad=af(W.toBytes(N),{infinity:!0,compressed:!0});function ae(a){let b=224&(a=a.slice())[0];return a[0]&=31,{compressed:!!(b>>7&1),infinity:!!(b>>6&1),sort:!!(b>>5&1),value:a}}function af(a,b){if(224&a[0])throw Error("setMask: non-empty mask");return b.compressed&&(a[0]|=128),b.infinity&&(a[0]|=64),b.sort&&(a[0]|=32),a}function ag(a){a.assertValidity();let{BYTES:b,ORDER:c}=W,{x:d,y:e}=a.toAffine();if(a.is0())return ad.slice();let f=!!(e*P/c);return af((0,n.lq)(d,b),{compressed:!0,sort:f})}function ah(a){let{infinity:b,sort:c,value:d}=ae((0,n.qj)("signatureHex",a,48)),e=W.ORDER,f=ak.G1.Point,g=(0,n.Ph)(d);if(b)return f.ZERO;let h=W.create(g&W.MASK),i=W.add(W.pow(h,Q),W.create(U.b)),j=W.sqrt(i);if(!j)throw Error("invalid G1 point: compressed");j*P/e!==BigInt(c)&&(j=W.neg(j));let k=f.fromAffine({x:h,y:j});return k.assertValidity(),k}function ai(a){a.assertValidity();let{BYTES:b}=W;if(a.is0())return(0,o.Id)(ad,(0,n.lq)(N,b));let{x:c,y:d}=a.toAffine(),{re:e,im:f}=X.reim(c),{re:g,im:h}=X.reim(d),i=!!((h>N?h*P:g*P)/W.ORDER&O);return(0,o.Id)(af((0,n.lq)(f,b),{sort:i,compressed:!0}),(0,n.lq)(e,b))}function aj(a){let{ORDER:b}=W,{infinity:c,sort:d,value:e}=ae((0,n.qj)("signatureHex",a)),f=ak.G2.Point,g=e.length/2;if(48!==g&&96!==g)throw Error("invalid compressed signature length, expected 96/192 bytes");let h=(0,n.Ph)(e.slice(0,g)),i=(0,n.Ph)(e.slice(g));if(c)return f.ZERO;let j=W.create(h&W.MASK),k=W.create(i),l=X.create({c0:k,c1:j}),m=X.add(X.pow(l,Q),ac.b),o=X.sqrt(m);if(!o)throw Error("Failed to find a square root");let{re:p,im:q}=X.reim(o),r=BigInt(d),s=q>N&&q*P/b!==r,t=q===N&&p*P/b!==r;(s||t)&&(o=X.neg(o));let u=f.fromAffine({x:l,y:o});return u.assertValidity(),u}let ak=function(a){let{Fp:b,Fr:c,Fp2:d,Fp6:e,Fp12:f}=a.fields,g=A(a.G1),h=Object.assign(g,(0,q.qj)(g.Point,a.G1.mapToCurve,{...a.htfDefaults,...a.G1.htfDefaults})),i=A(a.G2),j=Object.assign(i,(0,q.qj)(i.Point,a.G2.mapToCurve,{...a.htfDefaults,...a.G2.htfDefaults})),k=function(a,b,c,d){let e,{Fp2:f,Fp12:g}=a,{twistType:h,ateLoopSize:i,xNegative:j,postPrecompute:k}=d;if("multiplicative"===h)e=(a,b,c,d,e,h)=>g.mul014(d,a,f.mul(b,e),f.mul(c,h));else if("divisive"===h)e=(a,b,c,d,e,h)=>g.mul034(d,f.mul(c,h),f.mul(b,e),a);else throw Error("bls: unknown twist type");let l=f.div(f.ONE,f.mul(f.ONE,E));function m(a,b,c,d,e,g){let h=f.sub(c,f.mul(g,d)),i=f.sub(b,f.mul(e,d)),j=f.sub(f.mul(h,e),f.mul(i,g)),k=f.neg(h);a.push([j,k,i]);let l=f.sqr(i),m=f.mul(l,i),n=f.mul(l,b),o=f.add(f.sub(m,f.mul(n,E)),f.mul(f.sqr(h),d));return b=f.mul(i,o),{Rx:b,Ry:c=f.sub(f.mul(f.sub(n,o),h),f.mul(m,c)),Rz:d=f.mul(d,m)}}let o=function(a){let b=[];for(;a>D;a>>=D)(a&D)===C?b.unshift(0):(a&F)===F?(b.unshift(-1),a+=D):b.unshift(1);return b}(i),q=(0,n.x)(a=>{let{x:b,y:c}=a.toAffine(),d=f.neg(c),e=b,g=c,h=f.ONE,i=[];for(let a of o){let j=[];({Rx:e,Ry:g,Rz:h}=function(a,b,c,d){let e=f.sqr(c),g=f.sqr(d),h=f.mulByB(f.mul(g,F)),i=f.mul(h,F),j=f.sub(f.sub(f.sqr(f.add(c,d)),g),e),k=f.sub(h,e),m=f.mul(f.sqr(b),F),n=f.neg(j);return a.push([k,m,n]),b=f.mul(f.mul(f.mul(f.sub(e,i),b),c),l),{Rx:b,Ry:c=f.sub(f.sqr(f.mul(f.add(e,i),l)),f.mul(f.sqr(h),F)),Rz:d=f.mul(e,j)}}(j,e,g,h)),a&&({Rx:e,Ry:g,Rz:h}=m(j,e,g,h,b,-1===a?d:c)),i.push(j)}if(k){let a=i[i.length-1];k(e,g,h,b,c,m.bind(null,a))}return i});function r(a,b=!1){let c=g.ONE;if(a.length){let b=a[0][0].length;for(let d=0;d<b;d++)for(let[b,f,h]of(c=g.sqr(c),a))for(let[a,g,i]of b[d])c=e(a,g,i,c,f,h)}return j&&(c=g.conjugate(c)),b?g.finalExponentiate(c):c}function s(a,d=!0){let e=[];for(let{g1:d,g2:f}of((0,p.Ak)(b,a.map(({g1:a})=>a)),(0,p.Ak)(c,a.map(({g2:a})=>a)),a)){if(d.is0()||f.is0())throw Error("pairing is not available for ZERO point");d.assertValidity(),f.assertValidity();let a=d.toAffine();e.push([q(f),a.x,a.y])}return r(e,d)}return{Fp12:g,millerLoopBatch:r,pairing:function(a,b,c=!0){return s([{g1:a,g2:b}],c)},pairingBatch:s,calcPairingPrecomputes:q}}(a.fields,h.Point,j.Point,{...a.params,postPrecompute:a.postPrecompute}),{millerLoopBatch:l,pairing:m,pairingBatch:s,calcPairingPrecomputes:t}=k,u=H(k,h,j,a.G2.Signature,!1),v=H(k,j,h,a.G1.ShortSignature,!0),w=a.randomBytes||o.po,x=()=>{let a=(0,r.Tp)(c.ORDER);return(0,r.qy)(w(a),c.ORDER)},{ShortSignature:y}=a.G1,{Signature:z}=a.G2;function B(a,b){return a instanceof h.Point?a:v.hash((0,n.qj)("point",a),b?.DST)}function G(a,b){return a instanceof j.Point?a:u.hash((0,n.qj)("point",a),b?.DST)}return h.Point.BASE.precompute(4),{longSignatures:u,shortSignatures:v,millerLoopBatch:l,pairing:m,pairingBatch:s,verifyBatch:function(a,b,c,d){let e=b.map(a=>G(a,d));return u.verifyBatch(a,e,c)},fields:{Fr:c,Fp:b,Fp2:d,Fp6:e,Fp12:f},params:{ateLoopSize:a.params.ateLoopSize,twistType:a.params.twistType,r:a.params.r,G1b:a.G1.b,G2b:a.G2.b},utils:{randomSecretKey:x,randomPrivateKey:x,calcPairingPrecomputes:t},getPublicKey:function(a){return u.getPublicKey(a).toBytes(!0)},getPublicKeyForShortSignatures:function(a){return v.getPublicKey(a).toBytes(!0)},sign:function(a,b,c){let d=G(a,c),e=u.sign(d,b);return a instanceof j.Point?e:z.toBytes(e)},signShortSignature:function(a,b,c){let d=B(a,c),e=v.sign(d,b);return a instanceof h.Point?e:y.toBytes(e)},verify:function(a,b,c,d){let e=G(b,d);return u.verify(a,e,c)},verifyShortSignature:function(a,b,c,d){let e=B(b,d);return v.verify(a,e,c)},aggregatePublicKeys:function(a){let b=u.aggregatePublicKeys(a);return a[0]instanceof h.Point?b:b.toBytes(!0)},aggregateSignatures:function(a){let b=u.aggregateSignatures(a);return a[0]instanceof j.Point?b:z.toBytes(b)},aggregateShortSignatures:function(a){let b=v.aggregateSignatures(a);return a[0]instanceof h.Point?b:y.toBytes(b)},G1:h,G2:j,Signature:z,ShortSignature:y}}({fields:{Fp:W,Fp2:X,Fp6:Y,Fp12:$,Fr:V},G1:{...U,Fp:W,htfDefaults:{...ab,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(a,b)=>{let c=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),d=new a(W.mul(b.X,c),b.Y,b.Z);return b.multiplyUnsafe(S).negate().multiplyUnsafe(S).equals(d)},clearCofactor:(a,b)=>b.multiplyUnsafe(S).add(b),mapToCurve:function(a){let{x:b,y:c}=an(W.create(a[0]));return am(b,c)},fromBytes:function(a){let{compressed:b,infinity:c,sort:d,value:e}=ae(a),{BYTES:f,ORDER:g}=W;if(48===e.length&&b){let a=(0,n.Ph)(e),b=W.create(a&W.MASK);if(c){if(b!==N)throw Error("invalid G1 point: non-empty, at infinity, with compression");return{x:N,y:N}}let f=W.add(W.pow(b,Q),W.create(U.b)),h=W.sqrt(f);if(!h)throw Error("invalid G1 point: compressed point");return h*P/g!==BigInt(d)&&(h=W.neg(h)),{x:W.create(b),y:W.create(h)}}if(96!==e.length||b)throw Error("invalid G1 point: expected 48/96 bytes");{let a=(0,n.Ph)(e.subarray(0,f)),b=(0,n.Ph)(e.subarray(f));if(c){if(a!==N||b!==N)throw Error("G1: non-empty point at infinity");return ak.G1.Point.ZERO.toAffine()}return{x:W.create(a),y:W.create(b)}}},toBytes:function(a,b,c){let{BYTES:d,ORDER:e}=W,f=b.is0(),{x:g,y:h}=b.toAffine();if(c){if(f)return ad.slice();let a=!!(h*P/e);return af((0,n.lq)(g,d),{compressed:!0,sort:a})}return f?(0,o.Id)(Uint8Array.of(64),new Uint8Array(2*d-1)):(0,o.Id)((0,n.lq)(g,d),(0,n.lq)(h,d))},ShortSignature:{fromBytes:a=>((0,o.DO)(a),ah(a)),fromHex:a=>ah(a),toBytes:a=>ag(a),toRawBytes:a=>ag(a),toHex:a=>(0,o.My)(ag(a))}},G2:{...ac,Fp:X,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...ab},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:function(a){let{x:b,y:c}=ao(X.fromBigTuple(a));return al(b,c)},isTorsionFree:(a,b)=>b.multiplyUnsafe(S).negate().equals(_(a,b)),clearCofactor:(a,b)=>{let c=b.multiplyUnsafe(S).negate(),d=_(a,b),e=b.double();return e=(e=aa(a,e)).subtract(d),d=(d=c.add(d)).multiplyUnsafe(S).negate(),(e=(e=e.add(d)).subtract(c)).subtract(b)},fromBytes:function(a){let{BYTES:b,ORDER:c}=W,{compressed:d,infinity:e,sort:f,value:g}=ae(a);if(!d&&!e&&f||!d&&e&&f||f&&e&&d)throw Error("invalid encoding flag: "+(224&a[0]));let h=(a,b,c)=>(0,n.Ph)(a.slice(b,c));if(96===g.length&&d){if(e){if(g.reduce((a,b)=>0!==a?b+1:b,0)>0)throw Error("invalid G2 point: compressed");return{x:X.ZERO,y:X.ZERO}}let a=h(g,0,b),d=h(g,b,2*b),i=X.create({c0:W.create(d),c1:W.create(a)}),j=X.add(X.pow(i,Q),ac.b),k=X.sqrt(j),l=k.c1===N?k.c0*P/c:k.c1*P/c?O:N;return{x:i,y:k=f&&l>0?k:X.neg(k)}}if(192!==g.length||d)throw Error("invalid G2 point: expected 96/192 bytes");{if(e){if(g.reduce((a,b)=>0!==a?b+1:b,0)>0)throw Error("invalid G2 point: uncompressed");return{x:X.ZERO,y:X.ZERO}}let a=h(g,0*b,+b),c=h(g,+b,2*b),d=h(g,2*b,3*b),f=h(g,3*b,4*b);return{x:X.fromBigTuple([c,a]),y:X.fromBigTuple([f,d])}}},toBytes:function(a,b,c){let{BYTES:d,ORDER:e}=W,f=b.is0(),{x:g,y:h}=b.toAffine();if(c){if(f)return(0,o.Id)(ad,(0,n.lq)(N,d));let a=!!(h.c1===N?h.c0*P/e:h.c1*P/e);return(0,o.Id)(af((0,n.lq)(g.c1,d),{compressed:!0,sort:a}),(0,n.lq)(g.c0,d))}{if(f)return(0,o.Id)(Uint8Array.of(64),new Uint8Array(4*d-1));let{re:a,im:b}=X.reim(g),{re:c,im:e}=X.reim(h);return(0,o.Id)((0,n.lq)(b,d),(0,n.lq)(a,d),(0,n.lq)(e,d),(0,n.lq)(c,d))}},Signature:{fromBytes:a=>((0,o.DO)(a),aj(a)),fromHex:a=>aj(a),toBytes:a=>ai(a),toRawBytes:a=>ai(a),toHex:a=>(0,o.My)(ai(a))}},params:{ateLoopSize:S,r:U.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:ab,hash:m.sc}),al=(0,q.FL)(X,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(a=>a.map(a=>X.fromBigTuple(a.map(BigInt))))),am=(0,q.FL)(W,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(a=>a.map(a=>BigInt(a)))),an=B(W,{A:W.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:W.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:W.create(BigInt(11))}),ao=B(X,{A:X.create({c0:W.create(N),c1:W.create(BigInt(240))}),B:X.create({c0:W.create(BigInt(1012)),c1:W.create(BigInt(1012))}),Z:X.create({c0:W.create(BigInt(-2)),c1:W.create(BigInt(-1))})});function ap(a,b,c){let d="string"==typeof a?a:(0,k.nj)(a),e="string"==typeof b?b:(0,k.nj)(b),f="string"==typeof c?c:(0,k.nj)(c);return ak.verifyShortSignature(e,f,d)}var aq=c(85762),ar=c(65962),as=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},at=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};class au extends i.Yv{constructor(a){super(`Invalid certificate: ${a}`)}}!function(a){a[a.Empty=0]="Empty",a[a.Fork=1]="Fork",a[a.Labeled=2]="Labeled",a[a.Leaf=3]="Leaf",a[a.Pruned=4]="Pruned"}(e||(e={}));class av{constructor(a,b,c,e,f=5,g=!1){this._rootKey=b,this._canisterId=c,this._blsVerify=e,this._maxAgeInMinutes=f,d.set(this,!1),as(this,d,g,"f"),this.cert=h.D4(new Uint8Array(a))}static async create(a){let b=av.createUnverified(a);return await b.verify(),b}static createUnverified(a){let b=a.blsVerify;return b||(b=ap),new av(a.certificate,a.rootKey,a.canisterId,b,a.maxAgeInMinutes,a.disableTimeVerification)}lookup(a){return aA(a,this.cert.tree)}lookup_label(a){return this.lookup([a])}async verify(){let a=await ay(this.cert.tree),b=await this._checkDelegationAndGetKey(this.cert.delegation),c=this.cert.signature,e=function(a){let b=aw.byteLength+96;if(a.byteLength!==b)throw TypeError(`BLS DER-encoded public key must be ${b} bytes long`);let c=a.slice(0,aw.byteLength);if(!(0,k.HA)(c,aw))throw TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${aw}, but get ${c}`);return a.slice(aw.byteLength)}(b),f=(0,k.xW)(az("ic-state-root"),a),g=!1,h=ax(this.lookup(["time"]));if(!h)throw new au("Certificate does not contain a time");if(!at(this,d,"f")){let a=60*this._maxAgeInMinutes*1e3,b=Date.now(),c=(0,aq.A)(h);if(c.getTime()<b-a)throw new au(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+c.toISOString()+" Current time: "+new Date(b).toISOString());if(c.getTime()>b+3e5)throw new au("Certificate is signed more than 5 minutes in the future. Certificate time: "+c.toISOString()+" Current time: "+new Date(b).toISOString())}try{g=await this._blsVerify(new Uint8Array(e),new Uint8Array(c),new Uint8Array(f))}catch(a){g=!1}if(!g)throw new au("Signature verification failed")}async _checkDelegationAndGetKey(a){if(!a)return this._rootKey;let b=await av.createUnverified({certificate:a.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(b.cert.delegation)throw new au("Delegation certificates cannot be nested");if(await b.verify(),this._canisterId.toString()!==ar.GZ&&!aB({canisterId:this._canisterId,subnetId:l.p.fromUint8Array(new Uint8Array(a.subnet_id)),tree:b.cert.tree}))throw new au(`Canister ${this._canisterId} not in range of delegations for subnet 0x${(0,k.nj)(a.subnet_id)}`);let c=ax(b.lookup(["subnet",a.subnet_id,"public_key"]));if(!c)throw Error(`Could not find subnet key for subnet 0x${(0,k.nj)(a.subnet_id)}`);return c}}d=new WeakMap;let aw=(0,k.aD)("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100");function ax(a){if(a.status===f.Found){if(a.value instanceof ArrayBuffer)return a.value;if(a.value instanceof Uint8Array)return a.value.buffer}}async function ay(a){switch(a[0]){case e.Empty:return(0,j.tW)(az("ic-hashtree-empty"));case e.Pruned:return a[1];case e.Leaf:return(0,j.tW)((0,k.xW)(az("ic-hashtree-leaf"),a[1]));case e.Labeled:return(0,j.tW)((0,k.xW)(az("ic-hashtree-labeled"),a[1],await ay(a[2])));case e.Fork:return(0,j.tW)((0,k.xW)(az("ic-hashtree-fork"),await ay(a[1]),await ay(a[2])));default:throw Error("unreachable")}}function az(a){let b=new Uint8Array([a.length]),c=new TextEncoder().encode(a);return(0,k.xW)(b,c)}function aA(a,b){if(0===a.length)if(b[0]!==e.Leaf)return{status:f.Found,value:b};else{if(!b[1])throw Error("Invalid tree structure for leaf");return b[1]instanceof ArrayBuffer?{status:f.Found,value:b[1]}:b[1]instanceof Uint8Array?{status:f.Found,value:b[1].buffer}:{status:f.Found,value:b[1]}}let c=function a(b,c){switch(c[0]){case e.Labeled:if(function(a,b){let c=new Uint8Array(a),d=new Uint8Array(b);for(let a=0;a<c.length;a++)if(c[a]>d[a])return!0;return!1}(b,c[1]))return{status:g.Greater};if((0,k.HA)(b,c[1]))return{status:f.Found,value:c[2]};return{status:g.Less};case e.Fork:let d=a(b,c[1]);switch(d.status){case g.Greater:{let d=a(b,c[2]);if(d.status===g.Less)return{status:f.Absent};return d}case f.Unknown:{let d=a(b,c[2]);if(d.status===g.Less)return{status:f.Unknown};return d}default:return d}case e.Pruned:return{status:f.Unknown};default:return{status:f.Absent}}}("string"==typeof a[0]?new TextEncoder().encode(a[0]):a[0],b);switch(c.status){case f.Found:return aA(a.slice(1),c.value);case g.Greater:case g.Less:return{status:f.Absent};default:return c}}function aB(a){let{canisterId:b,subnetId:c,tree:d}=a,e=aA(["subnet",c.toUint8Array(),"canister_ranges"],d);if(e.status!==f.Found||!(e.value instanceof ArrayBuffer))throw Error(`Could not find canister ranges for subnet ${c}`);return h.D4(e.value).map(a=>[l.p.fromUint8Array(a[0]),l.p.fromUint8Array(a[1])]).some(a=>a[0].ltEq(b)&&a[1].gtEq(b))}!function(a){a.Unknown="unknown",a.Absent="absent",a.Found="found"}(f||(f={})),function(a){a.Less="less",a.Greater="greater"}(g||(g={}))},93258:(a,b,c)=>{"use strict";c.d(b,{G:()=>i});var d,e,f=c(89940),g=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},h=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};class i{constructor(a){if(d.set(this,void 0),e.set(this,void 0),a.byteLength!==i.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");g(this,d,a,"f"),g(this,e,i.derEncode(a),"f")}static from(a){return this.fromDer(a.toDer())}static fromRaw(a){return new i(a)}static fromDer(a){return new i(this.derDecode(a))}static derEncode(a){return(0,f.C2)(a,f.le).buffer}static derDecode(a){let b=(0,f.n9)(a,f.le);if(b.length!==this.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");return b}get rawKey(){return h(this,d,"f")}get derKey(){return h(this,e,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}d=new WeakMap,e=new WeakMap,i.RAW_KEY_LENGTH=32}};